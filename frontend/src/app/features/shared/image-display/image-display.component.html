<div
  class="image-container"
  [style.height]="containerHeight"
  [style.width]="containerWidth"
  [class.loading]="isLoading()"
  [class.error]="hasError()"
  [class.loaded]="isLoaded()"
>
  <!-- Spinner de Carga -->
  @if (isLoading() && enableSpinner) {
  <div class="overlay spinner-overlay">
    <mat-progress-spinner
      mode="indeterminate"
      diameter="40"
    ></mat-progress-spinner>
  </div>
  }

  <!-- Icono de Error -->
  @if (hasError() && enableErrorIcon && !isLoading()) {
  <div class="overlay error-overlay">
    <mat-icon class="error-icon">broken_image</mat-icon>
    <span class="error-text">No se pudo cargar la imagen</span>
  </div>
  }

  <!-- La Imagen (se muestra solo si hay URL y no hay error, o despuÃ©s de cargar) -->
  @if (processedImageUrl() && !hasError()) {
  <div class="button-container">
    <button
      mat-flat-button
      class="btn-corp-primary"
      (click)="openImageDialog()"
    >
      Ver Imagen
    </button>
  </div>
  }
</div>
