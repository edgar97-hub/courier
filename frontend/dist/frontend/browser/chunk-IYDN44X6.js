import{d as O,g as V,s as q,u as H,v as J,w as z,x as W,y as K,z as Q}from"./chunk-K5ZG3GAK.js";import"./chunk-FFAAVIVD.js";import{a as L}from"./chunk-E75IIMLS.js";import{a as E,b as x,g as D,h as T}from"./chunk-NQ23PRK7.js";import"./chunk-ZZO4XKTB.js";import"./chunk-T5UCPTXZ.js";import{b as U,d as k,e as s,g as j,h as A,k as G,l as P,m as w,o as B,q as R}from"./chunk-274QBDMQ.js";import{T as I,V as N,c as F}from"./chunk-XT6BZMKU.js";import{F as f,Kb as y,Q as b,Ub as i,Vb as o,Wb as m,ac as C,f as l,ga as g,ib as M,la as h,ma as _,mc as n,nb as v,s as c,wb as S}from"./chunk-DHFLL7AS.js";var d=class a{constructor(e){this.http=e}API_URL="http://161.132.41.184:8000/api/settings";unsubscribe=null;getAuthState(){return l(this,null,function*(){})}getUsers(e){return this.http.get(this.API_URL+"/all",{headers:{codrr_token:e.token}})}update(e){return this.http.put(this.API_URL+"/edit/"+e.id,{business_name:e.business_name,address:e.address,phone_number:e.phone_number,logo_url:e.logo_url},{headers:{"Content-Type":"application/json",codrr_token:e.token}})}remove(e,r){return this.http.delete(this.API_URL+"/delete/"+e,{headers:{"Content-Type":"application/json",codrr_token:r.token}})}ngOnDestroy(){this.unsubscribe?.()}static \u0275fac=function(r){return new(r||a)(h(F))};static \u0275prov=g({token:a,factory:a.\u0275fac,providedIn:"root"})};var p=class a{constructor(e){this.fb=e;this.myForm=this.fb.group({id:["",[]],business_name:["",[s.required]],address:["",[s.required]],phone_number:["",[]],logo_url:["",[]]}),this.getUsers()}userService=_(d);myForm;getUsers(){return l(this,null,function*(){let e=localStorage.getItem("user"),r=e?JSON.parse(e):null;r&&this.userService.getUsers(r).subscribe({next:t=>{console.log("data",t),this.myForm=this.fb.group({id:[t[0].id,[]],business_name:[t[0].business_name,[s.required]],address:[t[0].address,[s.required]],phone_number:[t[0].phone_number,[]],logo_url:[t[0].logo_url,[]]})},error:t=>{console.log(t)}})})}remove(e){}onSubmit(e){return l(this,null,function*(){if(console.log("Valid?",e.valid),e.valid){let r=localStorage.getItem("user"),t=r?JSON.parse(r):null;if(console.log("user",t),!t)return;this.userService.update({id:e.value.id,business_name:e.value.business_name,address:e.value.address,phone_number:e.value.phone_number,logo_url:e.value.logo_url,token:t.token}).subscribe({next:u=>{console.log(u);let X=c("Data received"),Y=f(1e3);X.pipe(b(()=>Y)).subscribe(Z=>{console.log(Z),window.location.reload()})},error:u=>{console.log(u)}})}})}static \u0275fac=function(r){return new(r||a)(v(B))};static \u0275cmp=S({type:a,selectors:[["app-table"]],decls:30,vars:1,consts:[["appearance","outlined"],[1,"flex","gap-3","mt-3"],[1,"flex","mb-10",3,"ngSubmit","formGroup"],[1,"max-w-3xl","p-2","rounded-lg","mat-elevation-z3","mb-6","bg-surface-container"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-0"],["matInput","","formControlName","business_name"],["appFieldError",""],["matInput","","formControlName","address"],["matInput","","formControlName","phone_number"],["matInput","","formControlName","logo_url"],["type","submit","mat-flat-button","",1,"mb-3","mt-5"]],template:function(r,t){r&1&&(i(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),n(3," Configuraci\xF3n "),o(),m(4,"mat-card-subtitle"),o(),i(5,"mat-card-content",1)(6,"form",2),C("ngSubmit",function(){return t.onSubmit(t.myForm)}),i(7,"div",3)(8,"div",4)(9,"mat-form-field")(10,"mat-label"),n(11,"Nombre de la empresa"),o(),m(12,"input",5)(13,"mat-error",6),o(),i(14,"mat-form-field")(15,"mat-label"),n(16,"Direcci\xF3n"),o(),m(17,"input",7)(18,"mat-error",6),o(),i(19,"mat-form-field")(20,"mat-label"),n(21,"N\xFAmero de tel\xE9fono"),o(),m(22,"input",8)(23,"mat-error",6),o(),i(24,"mat-form-field")(25,"mat-label"),n(26,"logo"),o(),m(27,"input",9),o()(),i(28,"button",10),n(29," Guardar "),o()()()()()),r&2&&(M(6),y("formGroup",t.myForm))},dependencies:[T,D,E,x,q,O,L,V,U,Q,H,z,K,W,J,N,I,R,G,k,j,A,P,w],encapsulation:2})};export{p as default};
