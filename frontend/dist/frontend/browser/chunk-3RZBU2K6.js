import{c as E}from"./chunk-XT6BZMKU.js";import{Ba as I,Da as y,Hc as j,Ic as M,Jc as k,Ka as m,La as v,a as o,b as f,f as x,ga as w,h as T,la as A,m as O,ma as h,ta as D,u as P}from"./chunk-DHFLL7AS.js";var U=class e{constructor(t){this.http=t}API_URL="http://161.132.41.184:8000/api/auth/login";user=v(null);unsubscribe=null;getAuthState(){return x(this,null,function*(){let t=localStorage.getItem("user"),n=t?JSON.parse(t):null;if(!n){this.user.set(null);return}let r=yield this.getUserInfo(n?.uid);return this.user.set(f(o({},r),{uid:n.uid})),this.user})}login(t,n){return this.http.post(this.API_URL,{username:t,password:n},{headers:{"Content-Type":"application/json"}})}logout(){}getUserInfo(t){return x(this,null,function*(){let n=localStorage.getItem("user");return n?JSON.parse(n):null})}ngOnDestroy(){this.unsubscribe?.()}static \u0275fac=function(n){return new(n||e)(A(E))};static \u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"})};function W(e){let t=j(()=>e());return _(t)?new Proxy(e,{get(n,r){return r in t?(m(n[r])||Object.defineProperty(n,r,{value:M(()=>n()[r]),configurable:!0}),W(n[r])):n[r]}}):e}var F=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function _(e){if(e===null||typeof e!="object"||z(e))return!1;let t=Object.getPrototypeOf(e);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(F.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function z(e){return typeof e?.[Symbol.iterator]=="function"}var J=new WeakMap,c=Symbol("STATE_SOURCE");function it(e,...t){e[c].update(n=>t.reduce((r,i)=>o(o({},r),typeof i=="function"?i(r):i),n)),q(e)}function L(e){return e[c]()}function N(e){return J.get(e[c])||[]}function q(e){let t=N(e);for(let n of t){let r=j(()=>L(e));n(r)}}function st(...e){let t=[...e],n=typeof t[0]=="function"?{}:t.shift(),r=t;return(()=>{class s{constructor(){let u=r.reduce((S,H)=>H(S),B()),{stateSignals:d,props:p,methods:g,hooks:l}=u,b=o(o(o({},d),p),g);this[c]=u[c];for(let S of Reflect.ownKeys(b))this[S]=b[S];let{onInit:R,onDestroy:C}=l;R&&R(),C&&h(y).onDestroy(C)}static \u0275fac=function(d){return new(d||s)};static \u0275prov=w({token:s,factory:s.\u0275fac,providedIn:n.providedIn||null})}return s})()}function B(){return{[c]:v({}),stateSignals:{},props:{},methods:{},hooks:{}}}function ct(e,...t){let n=typeof e=="function"?[e,...t]:t;return r=>n.reduce((i,s)=>s(i),r)}function V(e){return t=>{let n=e(o(o(o({[c]:t[c]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),f(o({},t),{props:o(o({},t.props),n)})}}function at(e){return V(e)}function ut(e){return t=>{let n=o(o(o({[c]:t[c]},t.stateSignals),t.props),t.methods),r=typeof e=="function"?e(n):e,i=s=>{let a=r[s],u=t.hooks[s];return a?()=>{u&&u(),a(n)}:u};return f(o({},t),{hooks:{onInit:i("onInit"),onDestroy:i("onDestroy")}})}}function ft(e){return t=>{let n=e(o(o(o({[c]:t[c]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),f(o({},t),{methods:o(o({},t.methods),n)})}}function lt(e){return t=>{let n=typeof e=="function"?e():e,r=Reflect.ownKeys(n);t[c].update(s=>o(o({},s),n));let i=r.reduce((s,a)=>{let u=M(()=>t[c]()[a]);return f(o({},s),{[a]:W(u)})},{});return f(o({},t),{stateSignals:o(o({},t.stateSignals),i)})}}function $(e,t){t?.injector||D($);let n=t?.injector??h(I),r=new O,i=e(r).subscribe();n.get(y).onDestroy(()=>i.unsubscribe());let s=(a,u)=>{if(G(a))return r.next(a),{destroy:T};let d=Q(),p=u?.injector??d??n;if(m(a)){let l=k(()=>{let b=a();j(()=>r.next(b))},{injector:p});return i.add({unsubscribe:()=>l.destroy()}),l}let g=a.subscribe(l=>r.next(l));return i.add(g),p!==n&&p.get(y).onDestroy(()=>g.unsubscribe()),{destroy:()=>g.unsubscribe()}};return s.destroy=i.unsubscribe.bind(i),s}function G(e){return!m(e)&&!P(e)}function Q(){try{return h(I)}catch{return}}export{U as a,it as b,st as c,ct as d,at as e,ut as f,ft as g,lt as h,$ as i};
