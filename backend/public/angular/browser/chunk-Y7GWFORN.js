import{d as Y,e as H}from"./chunk-A2GZCIHE.js";import{a as Z,b as $}from"./chunk-YSXPYM2V.js";import"./chunk-7RWCIHFI.js";import{C as A,F as V,G as K,b as R,d as l,f as q,g as N,l as T,o as L,r as B,t as D,v as G,x as U,y as j,z}from"./chunk-I57H2NTY.js";import"./chunk-7SNYFGVH.js";import"./chunk-NTJKNPMM.js";import{a as S,b as y,d as F,f as O,g as k,i as I}from"./chunk-ABVOVIA5.js";import{b as J,e as Q}from"./chunk-JRHRK62N.js";import"./chunk-J25GVFCX.js";import{Bb as C,Cc as P,Dd as W,Ed as X,Ob as n,Pc as v,Qb as M,Qc as E,Ta as o,Uc as w,Vc as g,ab as h,gb as p,h as _,kb as m,lb as b,ma as u,tb as r,ub as t,uc as x,vb as d}from"./chunk-NTZTTLCP.js";function re(i,a){i&1&&(r(0,"mat-error"),n(1,"El nombre es obligatorio"),t())}function ne(i,a){i&1&&(r(0,"mat-error"),n(1,"El telefono es obligatorio"),t())}function ie(i,a){i&1&&(r(0,"mat-error"),n(1,"Se requiere correo"),t())}function oe(i,a){i&1&&(r(0,"mat-error"),n(1,"Formato de correo electr\xF3nico no v\xE1lido"),t())}function ae(i,a){i&1&&(r(0,"mat-error"),n(1,"Se requiere contrase\xF1a"),t())}function me(i,a){i&1&&(r(0,"mat-error"),n(1,"La contrase\xF1a debe tener al menos 6 caracteres"),t())}var ee=class i{imageUrl=g.apiUrl+"/settings/company/background-image";fb=u(G);router=u(v);snackBar=u(Z);registerForm;isLoading=!1;logoImageUrl=g.apiUrl+"/settings/company/logo-image";constructor(){this.registerForm=this.fb.group({username:["",l.required],owner_phone_number:["",l.required],userEmail:["",[l.required,l.email]],userPass:["",[l.required,l.minLength(6)]]})}get name(){return this.registerForm.get("username")}get owner_phone_number(){return this.registerForm.get("owner_phone_number")}get email(){return this.registerForm.get("userEmail")}get password(){return this.registerForm.get("userPass")}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.isLoading=!0;let{username:a,owner_phone_number:s,userEmail:e,userPass:c}=this.registerForm.value;fetch(g.apiUrl+"/users/register-company",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,owner_phone_number:s,email:e,password:c})}).then(f=>_(this,null,function*(){let te=yield f.json();this.isLoading=!1,te.message?this.snackBar.open("Ya existe un usuario con ese correo","OK",{duration:3e3,verticalPosition:"top",panelClass:["success-snackbar"]}):(this.snackBar.open("\xA1Registro exitoso! Por favor, inicia sesi\xF3n.","OK",{duration:3e3,verticalPosition:"top",panelClass:["success-snackbar"]}),this.router.navigate(["/login"]))})).catch(f=>{this.isLoading=!1,this.snackBar.open("No se pudo registrar su informacion.","OK",{duration:3e3,verticalPosition:"top",panelClass:["error-snackbar"]})})}static \u0275fac=function(s){return new(s||i)};static \u0275cmp=h({type:i,selectors:[["app-register-page"]],decls:41,vars:11,consts:[[1,"login-page-wrapper"],[1,"login-card"],[1,"login-card-header"],[1,"logo-wrapper"],[2,"margin-top","10px","color","#012147","font-family","Montserrat, sans-serif !important"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","required",""],[4,"ngIf"],["matInput","","formControlName","owner_phone_number","required",""],["matInput","","formControlName","userEmail","type","email","required","","autocomplete","off"],["matSuffix",""],["matInput","","formControlName","userPass","type","password","required",""],["mat-flat-button","","type","submit",1,"full-width","btn-corp-primary",3,"disabled"],[1,"auth-card-actions"],["routerLink","/login",2,"color","#012147"]],template:function(s,e){s&1&&(r(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"div",3)(4,"mat-card-title",4),n(5,"Reg\xEDstrate gratis"),t()()(),r(6,"mat-card-content")(7,"form",5),C("ngSubmit",function(){return e.onSubmit()}),r(8,"mat-form-field",6)(9,"mat-label"),n(10,"Nombre"),t(),d(11,"input",7),p(12,re,2,0,"mat-error",8),t(),r(13,"mat-form-field",6)(14,"mat-label"),n(15,"Telefono"),t(),d(16,"input",9),p(17,ne,2,0,"mat-error",8),t(),r(18,"mat-form-field",6)(19,"mat-label"),n(20,"Correo"),t(),d(21,"input",10),r(22,"mat-icon",11),n(23,"email"),t(),p(24,ie,2,0,"mat-error",8)(25,oe,2,0,"mat-error",8),t(),r(26,"mat-form-field",6)(27,"mat-label"),n(28,"Password"),t(),d(29,"input",12),r(30,"mat-icon",11),n(31,"lock"),t(),p(32,ae,2,0,"mat-error",8)(33,me,2,0,"mat-error",8),t(),r(34,"button",13),n(35),t()()(),r(36,"mat-card-actions",14)(37,"p"),n(38," \xBFYa tienes una cuenta?"),r(39,"a",15),n(40," Iniciar sesi\xF3n"),t()()()()()),s&2&&(b("background-image","url("+e.imageUrl+")"),o(7),m("formGroup",e.registerForm),o(5),m("ngIf",e.name==null?null:e.name.hasError("required")),o(5),m("ngIf",e.owner_phone_number==null?null:e.owner_phone_number.hasError("required")),o(7),m("ngIf",e.email==null?null:e.email.hasError("required")),o(),m("ngIf",e.email==null?null:e.email.hasError("email")),o(7),m("ngIf",e.password==null?null:e.password.hasError("required")),o(),m("ngIf",e.password==null?null:e.password.hasError("minlength")),o(),m("disabled",e.isLoading||e.registerForm.invalid),o(),M(" ",e.isLoading?"Registrarse...":"Registrarse"," "))},dependencies:[P,x,w,E,U,T,R,q,N,D,L,B,I,S,O,F,k,y,K,V,j,z,A,H,Y,Q,J,X,W,$],styles:[".login-page-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-size:cover;background-position:center;background-repeat:no-repeat}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:24px;border-radius:8px;box-shadow:0 4px 12px #00000026;background-color:#ffffffe6}.login-card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.login-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:2em;font-weight:500;color:#3f51b5;margin-bottom:8px;text-shadow:1px 1px 2px rgba(0,0,0,.2)}.login-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:1em;color:#757575}.card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2}.spinner-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#fffc;display:flex;justify-content:center;align-items:center;z-index:10;border-radius:8px}.login-card-actions[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding-top:16px;border-top:1px solid #e0e0e0;font-size:.9em}.login-card-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#555}.login-card-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;text-decoration:none}.login-card-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.logo-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}"]})};export{ee as RegisterPageComponent};
