import{d as K,e as W}from"./chunk-44LGRUYF.js";import{a as X,b as Z}from"./chunk-3IGH7FBX.js";import"./chunk-7RWCIHFI.js";import{A as j,D as z,G as $,H as V,b as I,d as m,f as N,g as T,l as q,o as B,r as A,t as L,v as U,x as D,z as G}from"./chunk-ICWTIKD4.js";import"./chunk-BWBG2IHT.js";import"./chunk-U3COC3EF.js";import{a as S,b as E,d as F,f as O,g as k,i as R}from"./chunk-K4QNRRQ5.js";import{b as H,e as Y}from"./chunk-2H2YZZAU.js";import"./chunk-NUMYIFQH.js";import{Db as _,Ec as P,Gd as J,Hd as Q,Qb as o,Sc as w,Tc as v,Va as l,Xc as y,Yc as d,cb as C,h as b,ib as u,mb as p,na as c,nb as M,vb as r,wb as t,wc as x,xb as g}from"./chunk-YUSEJVZ2.js";function oe(n,a){n&1&&(r(0,"mat-error"),o(1,"El nombre es obligatorio"),t())}function ne(n,a){n&1&&(r(0,"mat-error"),o(1,"El telefono es obligatorio"),t())}function ie(n,a){n&1&&(r(0,"mat-error"),o(1,"Se requiere correo"),t())}function ae(n,a){n&1&&(r(0,"mat-error"),o(1,"Formato de correo electr\xF3nico no v\xE1lido"),t())}var ee=class n{imageUrl=d.apiUrl+"/settings/company/background-image";fb=c(U);router=c(w);snackBar=c(X);registerForm;isLoading=!1;logoImageUrl=d.apiUrl+"/settings/company/logo-image";constructor(){this.registerForm=this.fb.group({username:["",m.required],owner_phone_number:["",m.required],userEmail:["",[m.required,m.email]],userPass:["",[m.required,m.minLength(6)]]})}get name(){return this.registerForm.get("username")}get owner_phone_number(){return this.registerForm.get("owner_phone_number")}get email(){return this.registerForm.get("userEmail")}get password(){return this.registerForm.get("userPass")}openWhatsAppRegistration(a){let{username:i,owner_phone_number:e,userEmail:s,userPass:f}=this.registerForm.value;if(!i||!e||!s){alert("Completa los campos");return}let h="51912018197",te=encodeURIComponent(`Hola, me gustar\xEDa solicitar el registro. Mi correo es: ${s}. 
      Mis datos de registro son: ${i}, ${e}.`),re=`https://api.whatsapp.com/send?phone=${h}&text=${te}`;window.open(re,"_blank")}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.isLoading=!0;let{username:a,owner_phone_number:i,userEmail:e,userPass:s}=this.registerForm.value;fetch(d.apiUrl+"/users/register-company",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,owner_phone_number:i,email:e,password:s})}).then(f=>b(this,null,function*(){let h=yield f.json();this.isLoading=!1,h.message?this.snackBar.open("Ya existe un usuario con ese correo","OK",{duration:3e3,verticalPosition:"top",panelClass:["success-snackbar"]}):(this.snackBar.open("\xA1Registro exitoso! Por favor, inicia sesi\xF3n.","OK",{duration:3e3,verticalPosition:"top",panelClass:["success-snackbar"]}),this.router.navigate(["/login"]))})).catch(f=>{this.isLoading=!1,this.snackBar.open("No se pudo registrar su informacion.","OK",{duration:3e3,verticalPosition:"top",panelClass:["error-snackbar"]})})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=C({type:n,selectors:[["app-register-page"]],decls:33,vars:7,consts:[[1,"login-page-wrapper"],[1,"login-card"],[1,"login-card-header"],[1,"logo-wrapper"],[2,"margin-top","10px","color","#012147","font-family","Montserrat, sans-serif !important"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","required",""],[4,"ngIf"],["matInput","","formControlName","owner_phone_number","required",""],["matInput","","formControlName","userEmail","type","email","required","","autocomplete","off"],["matSuffix",""],["mat-flat-button","",1,"btn-corp-primary",3,"click"],[1,"auth-card-actions"],["routerLink","/login",2,"color","#012147"]],template:function(i,e){i&1&&(r(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"div",3)(4,"mat-card-title",4),o(5,"Reg\xEDstrate gratis"),t()()(),r(6,"mat-card-content")(7,"form",5),_("ngSubmit",function(){return e.onSubmit()}),r(8,"mat-form-field",6)(9,"mat-label"),o(10,"Nombre"),t(),g(11,"input",7),u(12,oe,2,0,"mat-error",8),t(),r(13,"mat-form-field",6)(14,"mat-label"),o(15,"Telefono"),t(),g(16,"input",9),u(17,ne,2,0,"mat-error",8),t(),r(18,"mat-form-field",6)(19,"mat-label"),o(20,"Correo"),t(),g(21,"input",10),r(22,"mat-icon",11),o(23,"email"),t(),u(24,ie,2,0,"mat-error",8)(25,ae,2,0,"mat-error",8),t(),r(26,"button",12),_("click",function(){return e.openWhatsAppRegistration(e.registerForm)}),o(27," Solicitar Registro por WhatsApp "),t()()(),r(28,"mat-card-actions",13)(29,"p"),o(30," \xBFYa tienes una cuenta?"),r(31,"a",14),o(32," Iniciar sesi\xF3n"),t()()()()()),i&2&&(M("background-image","url("+e.imageUrl+")"),l(7),p("formGroup",e.registerForm),l(5),p("ngIf",e.name==null?null:e.name.hasError("required")),l(5),p("ngIf",e.owner_phone_number==null?null:e.owner_phone_number.hasError("required")),l(7),p("ngIf",e.email==null?null:e.email.hasError("required")),l(),p("ngIf",e.email==null?null:e.email.hasError("email")))},dependencies:[P,x,y,v,D,q,I,N,T,L,B,A,R,S,O,F,k,E,V,$,G,j,z,W,K,Y,H,Q,J,Z],styles:[".login-page-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-size:cover;background-position:center;background-repeat:no-repeat}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:24px;border-radius:8px;box-shadow:0 4px 12px #00000026;background-color:#ffffffe6}.login-card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.login-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:2em;font-weight:500;color:#3f51b5;margin-bottom:8px;text-shadow:1px 1px 2px rgba(0,0,0,.2)}.login-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:1em;color:#757575}.card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2}.spinner-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#fffc;display:flex;justify-content:center;align-items:center;z-index:10;border-radius:8px}.login-card-actions[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding-top:16px;border-top:1px solid #e0e0e0;font-size:.9em}.login-card-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#555}.login-card-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;text-decoration:none}.login-card-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.logo-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}"]})};export{ee as RegisterPageComponent};
