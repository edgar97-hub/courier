import{a as zr,b as Gr,c as Ur}from"./chunk-VGP2GCDA.js";import{a as lt,b as dt,c as st,d as ct,e as $r,f as qr,g as jr,h as Hr,i as Qr,j as Wr,k as Kr,l as Zr,m as Yt}from"./chunk-ISYSJPXQ.js";import{a as Xr}from"./chunk-6RQBOZTH.js";import{a as Tt,b as Ft,c as At,d as Rt,h as Bt,i as Lt}from"./chunk-CCOXIPP4.js";import{a as Fr,b as Ar}from"./chunk-OWMXOL66.js";import"./chunk-F5X5MWHG.js";import{a as kr}from"./chunk-NFDRKC7B.js";import{b as Pr}from"./chunk-Y5LQWM6A.js";import{a as ie,b as re}from"./chunk-PO6EGR72.js";import{b as Me,c as at}from"./chunk-UQIIK7B7.js";import{d as Ir,e as Tr,h as Vt}from"./chunk-4YZKOROJ.js";import{a as zt,b as Gt,c as Ut,d as $t,e as qt,f as jt,g as Ht,h as Qt,i as Wt,j as Xt,k as Rr,l as Kt,m as Nr,n as We,o as Te,p as Zt,q as Vr,r as Jt,s as Br,t as Lr}from"./chunk-BHRBLRE5.js";import{a as Sr,b as Dr}from"./chunk-XZT5CDXQ.js";import{a as je,b as He,c as Ee,d as Qe,e as Nt,g as Se,h as De,i as ke,j as me,n as Ie}from"./chunk-47H6S35A.js";import{a as Pe,b as we}from"./chunk-6BPTTRW6.js";import{a as wr}from"./chunk-Y6XL547V.js";import{a as Er}from"./chunk-4Q5ZI4FH.js";import{a as dr,b as sr,d as cr,g as mr,h as pr}from"./chunk-DKGJOR6J.js";import{C as K,D as Z,E as It,F as br,J as de,K as se,a as ur,b as oe,d as O,f as Q,g as ne,h as gr,j as _t,k as _r,l as xe,m as Dt,n as kt,o as ae,p as ye,q as fr,r as Pt,s as Oe,t as hr,u as W,v as X,w as le,x as wt,y as vr,z as qe}from"./chunk-KZG7UARR.js";import{a as V,b as w}from"./chunk-EYS5YO4C.js";import"./chunk-WXNUOF5Q.js";import{a as St}from"./chunk-DLKYVSML.js";import{k as Cr,l as xr,m as ce,n as yr,o as N,p as Or,q as Mr,r as D}from"./chunk-UISUTDCV.js";import{$ as L,$a as M,Aa as $i,Ab as _,Bb as f,Ca as k,Cb as Ji,Da as qi,Db as Yi,Dc as gt,Eb as er,Ec as Si,Fb as ge,Fc as Ot,G,Ga as Ci,Gb as ee,H as Ct,Hb as te,Ia as pe,Kb as z,La as ji,Lb as a,Lc as Mt,M as vi,Mb as P,Mc as nr,Nb as p,O as Le,Oa as Hi,Ob as tr,Pb as ir,Q as Vi,Qb as yi,Qc as Et,Ra as yt,Rb as Oi,Rc as Re,Sa as d,Sb as Mi,Ub as ze,Va as Qi,Vb as tt,Wa as Y,Xb as rr,Yb as C,Z as xt,Zb as F,_ as Bi,_b as E,a as ve,ab as Wi,ac as Ge,b as bt,ba as be,bb as Xi,bc as it,bd as ar,c as Fi,dd as lr,ec as Ze,f as Ve,fa as Li,fb as m,ga as et,gc as Ae,h as Ai,ha as zi,hc as Ei,ia as bi,ib as ut,j as U,jb as s,jc as or,k as Ri,la as g,lb as xi,ob as ue,pc as Ue,pd as Di,qb as Ki,qc as Ce,r as Be,rb as Zi,rc as R,s as $,sb as n,ta as Gi,tb as r,tc as $e,u as Ni,ua as h,ub as b,uc as rt,v as Ye,va as v,vb as I,vc as q,wb as T,wc as ot,xc as nt,yb as x,yd as ki,za as Ui,zc as S}from"./chunk-SAZU6VCU.js";var j=class o{apiUrlOrders=Re.apiUrl+"/orders";apiUrl=Re.apiUrl+"/districts";apiUrlUsers=Re.apiUrl+"/users";apiUrlSettings=Re.apiUrl+"/settings";http=g(Ot);authService=g(St);constructor(){}getAuthHeaders(){let t=this.authService.getAccessToken();return t?new gt({"Content-Type":"application/json",codrr_token:t}):new gt({"Content-Type":"application/json"})}getOrders(t,e=1,i=10,l="id",c="desc"){let u=new Si().set("page_number",e.toString()).set("page_size",i.toString()).set("sort_field",l).set("sort_direction",c);t&&(t.start_date&&(u=u.set("start_date",t.start_date)),t.end_date&&(u=u.set("end_date",t.end_date)),t.status&&(u=u.set("status",t.status)),t.search_term&&t.search_term.trim()!==""&&(u=u.set("search_term",t.search_term.trim())));let A=this.getAuthHeaders();return this.authService.getAccessToken()?this.http.get(this.apiUrlOrders,{params:u,headers:A}).pipe(Ye(y=>y),G(this.handleError)):$(()=>new Error("Not authenticated to fetch users."))}getOrders2(t,e="id",i="desc"){let l=new Si().set("sort_field",e).set("sort_direction",i);t&&(t.start_date&&(l=l.set("start_date",t.start_date)),t.end_date&&(l=l.set("end_date",t.end_date)),t.status&&(l=l.set("status",t.status)),t.search_term&&t.search_term.trim()!==""&&(l=l.set("search_term",t.search_term.trim())));let c=this.getAuthHeaders();return this.authService.getAccessToken()?this.http.get(this.apiUrlOrders+"/filtered-orders",{params:l,headers:c}).pipe(Ye(u=>u.items),G(this.handleError)):$(()=>new Error("Not authenticated to fetch users."))}getOrderStatuses(){return new Ai(t=>{t.next(["REGISTRADO","RECOGIDO","EN ALMACEN","EN TRANSITO","ENTREGADO","CANCELADO","RECHAZADO","REPROGRAMADO"]),t.complete()})}getDeliveryDistricts(){let t=this.getAuthHeaders();return this.authService.getAccessToken()?this.http.get(`${this.apiUrl}/all`,{headers:t}).pipe(G(this.handleError)):$(()=>new Error("Not authenticated to fetch users."))}updateOrderStatus(t,e,i,l,c,u){let A=this.getAuthHeaders();if(!this.authService.getAccessToken())return $(()=>new Error("Not authenticated to fetch users."));let y={orderId:t,reason:i,newStatus:e,action:"CAMBIO DE ESTADO"};return l&&(y.product_delivery_photo_url=l),c&&(y.payment_method_for_shipping_cost=c),u&&(y.payment_method_for_collection=u),this.http.post(`${this.apiUrlOrders}/update-order-status`,{payload:y},{headers:A}).pipe(G(this.handleError))}getMaxPackageDimensions(){let t=this.getAuthHeaders();return this.authService.getAccessToken()?this.http.get(`${this.apiUrlSettings}/all`,{headers:t}).pipe(be(e=>console.log("OrderService: API response for max dimensions:",e)),Ye(e=>{if(console.log("apiResponse",e),e.length){let i="Est\xE1ndar : "+e[0].standard_measurements_length+"cmx"+e[0].standard_measurements_width+"cmx"+e[0].standard_measurements_height+"cm "+e[0].standard_measurements_weight+"kg",l="MEDIDAS MAXIMAS (Largo "+e[0].maximum_measurements_length+" cm x Ancho "+e[0].maximum_measurements_width+" cm x Alto "+e[0].maximum_measurements_height+" cm) y PESO MAXIMO ("+e[0].maximum_measurements_weight+" kilogramos)";return{max_length_cm:e[0].maximum_measurements_length,max_width_cm:e[0].maximum_measurements_width,max_height_cm:e[0].maximum_measurements_height,max_weight_kg:e[0].maximum_measurements_weight,sta_length_cm:e[0].standard_measurements_length,sta_width_cm:e[0].standard_measurements_width,sta_height_cm:e[0].standard_measurements_height,sta_weight_kg:e[0].standard_measurements_weight,volumetric_factor:e[0].volumetric_factor,standard_package_info:i,info_text:l}}return{max_length_cm:0,max_width_cm:0,max_height_cm:0,max_weight_kg:0,sta_length_cm:0,sta_width_cm:0,sta_height_cm:0,sta_weight_kg:0,volumetric_factor:0,standard_package_info:"",info_text:""}}),G(e=>(console.error("OrderService: API error fetching max package dimensions. Details:",e.message),Be({max_length_cm:30,max_width_cm:25,max_height_cm:45,max_weight_kg:5,standard_package_info:"Est\xE1ndar : 30cmx15cmx20cm 1.5kg",info_text:"MEDIDAS MAXIMAS (Largo 30 cm x Ancho 25 cm x Alto 45 cm) y PESO MAXIMO (5 kilogramos)"}).pipe(vi(200))))):$(()=>new Error("Not authenticated to fetch users."))}calculateShippingCost(t){console.log("packageData",t),console.log("OrderService: Calculating shipping cost (simulated) for",t);let e=8;return t.package_size_type==="custom"&&(e=10,(t.package_weight_kg||0)>2&&(e+=5),((t.package_length_cm||0)>30||(t.package_width_cm||0)>25||(t.package_height_cm||0)>20)&&(e+=4)),t.delivery_district_id==="D003"&&(e+=2),Be({shipping_cost:e}).pipe(vi(500))}createBatchOrders(t){let e=this.getAuthHeaders();return this.authService.getAccessToken()?this.http.post(`${this.apiUrlOrders}/batch-create`,t,{headers:e}).pipe(G(this.handleError)):$(()=>new Error("Not authenticated to fetch users."))}importOrdersFromParsedJson(t){console.log("OrderService: Sending parsed JSON to backend for import",t);let e=this.getAuthHeaders();return this.authService.getAccessToken()?this.http.post(`${this.apiUrlOrders}/import-batch-json`,t,{headers:e}).pipe(G(this.handleImportError)):$(()=>new Error("Not authenticated to fetch users."))}getAvailableDrivers(t){let e=this.getAuthHeaders();return this.authService.getAccessToken()?this.http.get(`${this.apiUrlUsers}/rol/MOTORIZADO`,{headers:e}).pipe(G(this.handleError)):$(()=>new Error("Not authenticated to fetch users."))}assignDriverToOrder(t,e){let i=this.getAuthHeaders();return this.authService.getAccessToken()?this.http.put(`${this.apiUrlOrders}/assign-driver-to-order/`+t,{motorizedId:e},{headers:i}).pipe(G(this.handleError)):$(()=>new Error("Not authenticated to fetch users."))}rescheduleOrder(t,e,i){let l=this.getAuthHeaders();return this.authService.getAccessToken()?this.http.put(`${this.apiUrlOrders}/reschedule-order/`+t,{newDate:e,reason:i},{headers:l}).pipe(G(this.handleError)):$(()=>new Error("Not authenticated to fetch users."))}handleImportError(t){console.error("API Import Error:",t);let e={success:!1,message:"Error de comunicaci\xF3n con el servidor durante la importaci\xF3n.",errors:[{row:0,message:`Error: ${t.status} - ${t.statusText||"Error desconocido"}`}]};return t.error&&typeof t.error=="object"&&"message"in t.error&&(e=ve(ve({},e),t.error)),$(()=>e)}handleError(t){let e="An unknown error occurred!";return t.error instanceof ErrorEvent?e=`Error: ${t.error.message}`:(e=`Error Code: ${t.status}
Message: ${t.message||t.error?.message||"Server error"}`,t.status===0&&(e="Could not connect to the server. Please check your network or if the server is running.")),console.error("API Error in OrderService:",t),$(()=>new Error(e))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=et({token:o,factory:o.\u0275fac,providedIn:"root"})};function io(o,t){if(o&1&&(n(0,"mat-option",8),a(1),r()),o&2){let e=t.$implicit;s("value",e),d(),p(" ",e," ")}}var ei=class o{filtersChanged=new k;filterForm;orderStatuses$;orderService=g(j);fb=g(Oe);datePipe=g(q);destroy$=new U;constructor(){this.filterForm=this.fb.group({start_date:[null],end_date:[null],status:[null],search_term:[""]}),this.orderStatuses$=this.orderService.getOrderStatuses()}ngOnInit(){this.filterForm.valueChanges.pipe(L(this.destroy$),Ct(400),Le((t,e)=>JSON.stringify(t)===JSON.stringify(e))).subscribe(()=>{this.applyFilters()})}applyFilters(){let t=this.filterForm.value,e={start_date:t.start_date?this.datePipe.transform(t.start_date,"yyyy-MM-dd"):null,end_date:t.end_date?this.datePipe.transform(t.end_date,"yyyy-MM-dd"):null,status:t.status||null,search_term:t.search_term?.trim()||null};console.log("OrderFiltersComponent: Emitting filters",e),this.filtersChanged.emit(e)}clearFilters(){this.filterForm.reset({start_date:null,end_date:null,status:null,search_term:""})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-order-filters"]],outputs:{filtersChanged:"filtersChanged"},features:[ze([Lt(),q])],decls:36,vars:9,consts:[["startDatePicker",""],["endDatePicker",""],[1,"filters-container",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","start_date","placeholder","mm/dd/yyyy",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","end_date","placeholder","mm/dd/yyyy",3,"matDatepicker"],["formControlName","status","placeholder","Seleccione estado..."],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","search_term","placeholder","Buscar..."],[1,"filter-actions"],["mat-stroked-button","","color","primary","type","button",3,"click"],["mat-stroked-button","","type","button",3,"click"]],template:function(e,i){if(e&1){let l=x();n(0,"form",2)(1,"mat-form-field",3)(2,"mat-label"),a(3,"Fecha de entrega inicio"),r(),b(4,"input",4)(5,"mat-datepicker-toggle",5)(6,"mat-datepicker",null,0),r(),n(8,"mat-form-field",3)(9,"mat-label"),a(10,"Fecha de entrega fin"),r(),b(11,"input",6)(12,"mat-datepicker-toggle",5)(13,"mat-datepicker",null,1),r(),n(15,"mat-form-field",3)(16,"mat-label"),a(17,"Estado"),r(),n(18,"mat-select",7)(19,"mat-option",8),a(20,"Todos"),r(),m(21,io,2,2,"mat-option",9),C(22,"async"),r()(),n(23,"mat-form-field",3)(24,"mat-label"),a(25,"Buscar"),r(),b(26,"input",10),r(),n(27,"div",11)(28,"button",12),_("click",function(){return h(l),v(i.applyFilters())}),n(29,"mat-icon"),a(30,"search"),r(),a(31," Buscar "),r(),n(32,"button",13),_("click",function(){return h(l),v(i.clearFilters())}),n(33,"mat-icon"),a(34,"clear_all"),r(),a(35," Limpiar "),r()()()}if(e&2){let l=z(7),c=z(14);s("formGroup",i.filterForm),d(4),s("matDatepicker",l),d(),s("for",l),d(6),s("matDatepicker",c),d(),s("for",c),d(7),s("value",null),d(2),s("ngForOf",F(22,7,i.orderStatuses$))}},dependencies:[S,Ce,$e,W,xe,oe,Q,ne,ae,ye,Z,K,X,qe,se,de,ct,lt,dt,st,Bt,Te,We,Ie,D,N,w,V],styles:[".filters-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;align-items:flex-start;padding:16px;background-color:var(--sys-surface-container-low);border-radius:8px;margin-bottom:20px;box-shadow:0 1px 3px #00000014}mat-form-field[_ngcontent-%COMP%]{min-width:200px;flex-grow:1}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;padding-top:8px}@media (max-width: 768px){mat-form-field[_ngcontent-%COMP%]{width:calc(50% - 8px);min-width:unset}.filter-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-end;padding-top:16px}}@media (max-width: 480px){mat-form-field[_ngcontent-%COMP%]{width:100%}}"]})};var Je=(y=>(y.REGISTRADO="REGISTRADO",y.RECOGIDO="RECOGIDO",y.EN_ALMACEN="EN ALMACEN",y.EN_TRANSITO="EN TRANSITO",y.ENTREGADO="ENTREGADO",y.CANCELADO="CANCELADO",y.RECHAZADO="RECHAZADO",y.REPROGRAMADO="REPROGRAMADO",y))(Je||{});var ii=class o{http=g(Ot);apiUrl=Re.apiUrl+"/settings";authService=g(St);uploadFile(t){let e=new FormData;e.append("file",t,t.name);let i=this.authService.getAccessToken();if(!i)return $(()=>new Error("Not authenticated to fetch users."));let l=new gt({codrr_token:i});return this.http.post(`${this.apiUrl}/upload-file`,e,{headers:l}).pipe(be(c=>console.log("SettingsService: Terms PDF uploaded",c)),G(this.handleError("file")))}handleError(t="operation",e){return i=>(console.error(`${t} failed: ${i.message}`,i),e!==void 0?Be(e):$(()=>new Error(`Error in ${t}. Details: ${i.message||"Server error"}`)))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=et({token:o,factory:o.\u0275fac,providedIn:"root"})};var oo=["videoPlayer"],no=["canvasElement"],Yr=()=>({standalone:!0});function ao(o,t){if(o&1&&(n(0,"mat-option",20),a(1),C(2,"titlecase"),r()),o&2){let e=t.$implicit;s("value",e),d(),p(" ",F(2,2,e)," ")}}function lo(o,t){o&1&&(n(0,"mat-error"),a(1,"Debe seleccionar un nuevo estado."),r())}function so(o,t){o&1&&(n(0,"mat-hint",24),a(1," Es importante detallar el motivo para este estados. "),r())}function co(o,t){o&1&&(n(0,"mat-error"),a(1," El motivo es obligatorio. "),r())}function mo(o,t){if(o&1){let e=x();n(0,"mat-form-field",21)(1,"mat-label"),a(2,"Motivo / Observaci\xF3n"),r(),n(3,"textarea",22),Mi("ngModelChange",function(l){h(e);let c=f();return Oi(c.reason,l)||(c.reason=l),v(l)}),r(),m(4,so,2,0,"mat-hint",23)(5,co,2,0,"mat-error",14),r()}if(o&2){let e=f();d(3),yi("ngModel",e.reason),s("ngModelOptions",tt(4,Yr)),d(),s("ngIf",e.isReasonMandatory(e.selectedStatus)),d(),s("ngIf",e.formSubmitted&&e.isReasonMandatory(e.selectedStatus)&&(!e.reason||e.reason.trim()===""))}}function po(o,t){if(o&1){let e=x();n(0,"div",37)(1,"p",42),a(2,"Vista Previa:"),r(),b(3,"img",43),n(4,"button",44),_("click",function(){h(e);let l=f(2);return v(l.removeImage())}),n(5,"mat-icon"),a(6,"delete_forever"),r()()()}if(o&2){let e=f(2);d(3),s("src",e.imagePreviewUrl,yt)}}function uo(o,t){o&1&&(n(0,"div",38),b(1,"mat-progress-spinner",45),n(2,"span"),a(3,"Subiendo imagen..."),r()())}function go(o,t){if(o&1&&(n(0,"mat-option",20),a(1),r()),o&2){let e=t.$implicit;s("value",e),d(),P(e)}}function _o(o,t){o&1&&(n(0,"mat-error"),a(1,"Seleccione m\xE9todo de pago para costo de env\xEDo."),r())}function fo(o,t){if(o&1&&(n(0,"mat-option",20),a(1),r()),o&2){let e=t.$implicit;s("value",e),d(),P(e)}}function ho(o,t){o&1&&(n(0,"mat-error"),a(1,"Seleccione m\xE9todo de pago para el monto a cobrar."),r())}function vo(o,t){if(o&1){let e=x();n(0,"div",16),b(1,"mat-divider"),n(2,"h4"),a(3,"Prueba de Entrega y Pagos"),r(),n(4,"div",25)(5,"label",26),a(6,"Foto de Prueba de Entrega:"),r(),n(7,"div",27)(8,"button",28),_("click",function(){h(e);let l=f();return v(l.startCamera())}),n(9,"mat-icon"),a(10,"photo_camera"),r(),a(11," Acceder a C\xE1mara "),r(),n(12,"span",29),a(13,"o"),r(),n(14,"button",30),_("click",function(){h(e);let l=f();return v(l.triggerFileUpload())}),n(15,"mat-icon"),a(16,"attach_file"),r(),a(17," Subir Archivo "),r()(),n(18,"input",31,0),_("change",function(l){h(e);let c=f();return v(c.onFileSelected(l))}),r(),n(20,"div",32),b(21,"video",33,1),n(23,"button",34),_("click",function(){h(e);let l=f();return v(l.takePhoto())}),n(24,"mat-icon"),a(25,"camera"),r(),a(26," Tomar Foto "),r(),n(27,"button",35),_("click",function(){h(e);let l=f();return v(l.stopCamera())}),n(28,"mat-icon"),a(29,"videocam_off"),r()()(),b(30,"canvas",36,2),m(32,po,7,1,"div",37)(33,uo,4,0,"div",38),r(),n(34,"mat-form-field",39)(35,"mat-label"),a(36),C(37,"number"),r(),n(38,"mat-select",40),m(39,go,2,2,"mat-option",13),r(),m(40,_o,2,0,"mat-error"),r(),n(41,"mat-form-field",39)(42,"mat-label"),a(43),C(44,"number"),r(),n(45,"mat-select",41),m(46,fo,2,2,"mat-option",13),r(),m(47,ho,2,0,"mat-error"),r()()}if(o&2){let e=f();d(8),s("disabled",e.showCamera),d(15),s("disabled",!e.stream),d(9),ue(e.imagePreviewUrl?32:-1),d(),ue(e.isUploadingImage?33:-1),d(3),p("M\xE9todo Pago Costo Env\xEDo (S/ ",E(37,10,e.data.order.shipping_cost,"1.2-2"),")"),d(3),s("ngForOf",e.paymentMethods),d(),ue(e.formSubmitted&&(e.scpmCtrl!=null&&e.scpmCtrl.hasError("required"))?40:-1),d(3),p("M\xE9todo Pago Cobro (S/ ",E(44,13,e.data.order.amount_to_collect_at_delivery,"1.2-2"),")"),d(3),s("ngForOf",e.paymentMethods),d(),ue(e.formSubmitted&&(e.cpmCtrl!=null&&e.cpmCtrl.hasError("required"))?47:-1)}}var ri=class o{constructor(t,e){this.dialogRef=t;this.data=e;this.deliveryDetailsForm=this.fb.group({shippingCostPaymentMethod:[null],collectionPaymentMethod:[null]})}selectedStatus;reason="";showReasonField=!1;deliveryDetailsForm;videoPlayer;canvasElement;imagePreviewUrl=null;selectedImageFile=null;isUploadingImage=!1;uploadedImageUrl=null;showCamera=!1;stream=null;photoTaken=!1;cameraError=null;formSubmitted=!1;paymentMethods=["Efectivo","Pago directo","POS"];showDeliveryDetails=!1;OrderStatusEnum=Je;fb=g(Oe);imageUploadService=g(ii);snackBar=g(Me);cdr=g(Ze);destroy$=new U;ngOnInit(){this.data.availableStatuses.includes(this.data.order.status)}startCamera(){return Ve(this,null,function*(){this.cameraError=null,this.removeImage();try{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(this.stream=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}),this.videoPlayer&&this.videoPlayer.nativeElement&&(this.videoPlayer.nativeElement.srcObject=this.stream,this.videoPlayer.nativeElement.play().catch(t=>console.error("Error playing video:",alert(t))),this.showCamera=!0,this.photoTaken=!1)):(this.cameraError="Tu navegador no soporta el acceso a la c\xE1mara.",this.snackBar.open(this.cameraError,"Cerrar",{duration:5e3}))}catch(t){console.error("Error al acceder a la c\xE1mara:",t),t.name==="NotAllowedError"||t.name==="PermissionDeniedError"?this.cameraError="Permiso de c\xE1mara denegado. Por favor, habilita el acceso en tu navegador.":t.name==="NotFoundError"||t.name==="DevicesNotFoundError"?this.cameraError="No se encontr\xF3 una c\xE1mara compatible.":this.cameraError="Error al iniciar la c\xE1mara. Intenta de nuevo o sube un archivo.",this.snackBar.open(this.cameraError,"Cerrar",{duration:7e3}),this.showCamera=!1}this.cdr.detectChanges()})}takePhoto(){if(!this.stream||!this.videoPlayer||!this.canvasElement)return;let t=this.videoPlayer.nativeElement,e=this.canvasElement.nativeElement,i=e.getContext("2d");i&&(e.width=t.videoWidth,e.height=t.videoHeight,i.drawImage(t,0,0,e.width,e.height),this.imagePreviewUrl=e.toDataURL("image/jpeg"),this.photoTaken=!0,this.selectedImageFile=null,this.uploadedImageUrl=null,this.stopCamera())}stopCamera(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null),this.showCamera=!1}onFileSelected(t){this.stopCamera(),this.photoTaken=!1;let i=t.currentTarget.files;if(i&&i[0]){this.selectedImageFile=i[0];let l=new FileReader;l.onload=c=>{this.imagePreviewUrl=c.target.result,this.uploadedImageUrl=null,this.cdr.detectChanges()},l.readAsDataURL(this.selectedImageFile)}else this.selectedImageFile=null,this.imagePreviewUrl=null}triggerFileUpload(){this.stopCamera(),document.getElementById("proofOfDeliveryImageUpload")?.click()}removeImage(){this.stopCamera(),this.selectedImageFile=null,this.imagePreviewUrl=null,this.uploadedImageUrl=null,this.photoTaken=!1;let t=document.getElementById("proofOfDeliveryImageUpload");t&&(t.value="")}onStatusChange(t){this.selectedStatus=t.value,this.checkIfReasonIsNeeded(this.selectedStatus),this.checkIfDeliveryDetailsNeeded(this.selectedStatus)}checkIfReasonIsNeeded(t){if(!t){this.showReasonField=!1;return}this.showReasonField=this.isReasonMandatory(t)}isReasonMandatory(t){let e=t||this.selectedStatus;return e?["CANCELADO","REPROGRAMADO","RECHAZADO"].includes(e):!1}checkIfDeliveryDetailsNeeded(t){t==="ENTREGADO"?(this.showDeliveryDetails=!0,this.data.order.shipping_cost&&this.data.order.shipping_cost>0?this.deliveryDetailsForm.get("shippingCostPaymentMethod")?.setValidators([O.required]):this.deliveryDetailsForm.get("shippingCostPaymentMethod")?.clearValidators(),this.data.order.amount_to_collect_at_delivery&&this.data.order.amount_to_collect_at_delivery>0?this.deliveryDetailsForm.get("collectionPaymentMethod")?.setValidators([O.required]):this.deliveryDetailsForm.get("collectionPaymentMethod")?.clearValidators(),this.deliveryDetailsForm.get("shippingCostPaymentMethod")?.updateValueAndValidity(),this.deliveryDetailsForm.get("collectionPaymentMethod")?.updateValueAndValidity()):(this.showDeliveryDetails=!1,this.deliveryDetailsForm.get("shippingCostPaymentMethod")?.clearValidators(),this.deliveryDetailsForm.get("shippingCostPaymentMethod")?.updateValueAndValidity(),this.deliveryDetailsForm.get("collectionPaymentMethod")?.clearValidators(),this.deliveryDetailsForm.get("collectionPaymentMethod")?.updateValueAndValidity(),this.deliveryDetailsForm.reset(),this.imagePreviewUrl=null,this.selectedImageFile=null,this.uploadedImageUrl=null)}isConfirmDisabled(){return!!(!this.selectedStatus||this.isReasonMandatory(this.selectedStatus)&&(!this.reason||this.reason.trim()==="")||this.selectedStatus==="ENTREGADO"&&!this.selectedImageFile)}onConfirm(){return Ve(this,null,function*(){if(this.formSubmitted=!0,this.isConfirmDisabled()){this.selectedStatus==="ENTREGADO"&&this.deliveryDetailsForm.markAllAsTouched();return}let t=this.uploadedImageUrl;if(this.selectedStatus==="ENTREGADO"&&(this.photoTaken||this.selectedImageFile)&&!this.uploadedImageUrl){this.isUploadingImage=!0;try{let e=null;if(this.photoTaken&&this.imagePreviewUrl&&typeof this.imagePreviewUrl=="string"?e=yield(yield fetch(this.imagePreviewUrl)).blob():this.selectedImageFile&&(e=this.selectedImageFile),e){let i=e instanceof File?e:new File([e],"proof_of_delivery.jpg",{type:e.type}),l=yield this.imageUploadService.uploadFile(i).toPromise();t=l?.file_url||null,console.log("uploadResponse",l),this.uploadedImageUrl=t}else this.uploadedImageUrl||console.warn("No image data to upload, but proceeding as ENTREGADO without image proof.")}catch(e){console.error("Error uploading/processing image:",e),this.snackBar.open("Error al procesar la imagen de prueba.","Cerrar",{duration:3e3,panelClass:["error-snackbar"]}),this.isUploadingImage=!1;return}finally{this.isUploadingImage=!1}}this.dialogRef.close({newStatus:this.selectedStatus,reason:this.showReasonField&&this.reason?this.reason.trim():void 0,proofOfDeliveryImageUrl:t,shippingCostPaymentMethod:this.showDeliveryDetails?this.deliveryDetailsForm.value.shippingCostPaymentMethod:null,collectionPaymentMethod:this.showDeliveryDetails?this.deliveryDetailsForm.value.collectionPaymentMethod:null})})}onCancel(){this.dialogRef.close()}get scpmCtrl(){return this.deliveryDetailsForm.get("shippingCostPaymentMethod")}get cpmCtrl(){return this.deliveryDetailsForm.get("collectionPaymentMethod")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getStatusClass(t){if(!t)return"status-desconocido";let e=t.toLowerCase().replace(/[\s_]+/g,"-");return console.log("`status-${formattedStatus}`",`status-${e}`),`status-${e}`}static \u0275fac=function(e){return new(e||o)(Y(Ee),Y(Qe))};static \u0275cmp=M({type:o,selectors:[["app-change-status-dialog"]],viewQuery:function(e,i){if(e&1&&(ge(oo,5),ge(no,5)),e&2){let l;ee(l=te())&&(i.videoPlayer=l.first),ee(l=te())&&(i.canvasElement=l.first)}},decls:27,vars:15,consts:[["fileUpload",""],["videoPlayer",""],["canvasElement",""],[1,"dialog-container"],[1,"dialog-header"],["mat-dialog-title",""],[1,"order-code-chip"],[3,"ngSubmit","formGroup"],[1,"dialog-content"],[1,"current-status-container"],[1,"status-badge",3,"ngClass"],["appearance","outline",1,"full-width","select-status-field"],["name","newStatus","required","",3,"ngModelChange","selectionChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["appearance","outline","class","full-width reason-field",4,"ngIf"],[1,"delivery-details-section"],["align","end",1,"dialog-actions"],["mat-stroked-button","","type","button",1,"cancel-button",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"confirm-button",3,"disabled"],[3,"value"],["appearance","outline",1,"full-width","reason-field"],["matInput","","name","reason","rows","3","cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","3","placeholder","Describa el motivo del cambio de estado...",3,"ngModelChange","ngModel","ngModelOptions"],["align","start",4,"ngIf"],["align","start"],[1,"image-upload-container"],[1,"image-upload-label"],[1,"image-actions"],["mat-stroked-button","","type","button","color","primary",1,"camera-button",3,"click","disabled"],[1,"or-divider"],["mat-stroked-button","","type","button","color","accent",1,"upload-button",3,"click"],["type","file","hidden","","id","proofOfDeliveryImageUpload","accept","image/*",3,"change"],[1,"camera-view"],["autoplay","","playsinline","",1,"video-preview"],["mat-fab","","extended","","color","primary",1,"take-photo-button",3,"click","disabled"],["mat-icon-button","","matTooltip","Cerrar c\xE1mara",1,"stop-camera-button",3,"click"],[2,"display","none"],[1,"image-preview-wrapper"],[1,"upload-spinner"],["appearance","outline",1,"full-width","payment-method-field"],["formControlName","shippingCostPaymentMethod","name","shippingCostPaymentMethod"],["formControlName","collectionPaymentMethod","name","collectionPaymentMethod"],[1,"preview-label"],["alt","Vista previa de la imagen",1,"image-preview",3,"src"],["mat-icon-button","","type","button","matTooltip","Quitar imagen / Tomar otra",1,"remove-image-button",3,"click"],["mode","indeterminate","diameter","24"]],template:function(e,i){e&1&&(n(0,"div",3)(1,"div",4)(2,"h2",5),a(3,"Cambiar Estado del Pedido"),r(),n(4,"span",6),a(5),r()(),n(6,"form",7),_("ngSubmit",function(){return i.onConfirm()}),n(7,"mat-dialog-content",8)(8,"div",9)(9,"span"),a(10,"Estado Actual:"),r(),n(11,"span",10),a(12),C(13,"titlecase"),r()(),n(14,"mat-form-field",11)(15,"mat-label"),a(16,"Seleccionar Nuevo Estado"),r(),n(17,"mat-select",12),Mi("ngModelChange",function(c){return Oi(i.selectedStatus,c)||(i.selectedStatus=c),c}),_("selectionChange",function(c){return i.onStatusChange(c)}),m(18,ao,3,4,"mat-option",13),r(),m(19,lo,2,0,"mat-error",14),r(),m(20,mo,6,5,"mat-form-field",15)(21,vo,48,16,"div",16),r(),n(22,"mat-dialog-actions",17)(23,"button",18),_("click",function(){return i.onCancel()}),a(24," Cancelar "),r(),n(25,"button",19),a(26),r()()()()),e&2&&(d(5),p("Pedido N\xB0: ",i.data.order.code||i.data.order.id,""),d(),s("formGroup",i.deliveryDetailsForm),d(5),s("ngClass",i.getStatusClass(i.data.order.status)),d(),p(" ",F(13,12,i.data.order.status)," "),d(5),yi("ngModel",i.selectedStatus),s("ngModelOptions",tt(14,Yr)),d(),s("ngForOf",i.data.availableStatuses),d(),s("ngIf",i.formSubmitted&&!i.selectedStatus),d(),s("ngIf",i.showReasonField),d(),ue(i.showDeliveryDetails?21:-1),d(4),s("disabled",i.isConfirmDisabled()||i.isUploadingImage||i.showCamera&&!i.photoTaken&&!i.imagePreviewUrl),d(),p(" ",i.isUploadingImage?"Subiendo...":"Confirmar Cambio"," "))},dependencies:[S,Ue,Ce,R,ot,rt,hr,xe,oe,Q,ne,Pt,_r,W,ae,ye,me,Se,ke,De,Z,K,X,wt,le,Te,We,Ie,se,de,It,D,N,ce,Mr,br,w,V,re,ie,we,Pe],styles:[".dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:80vh}.dialog-header[_ngcontent-%COMP%]{padding:20px 24px 0;border-bottom:1px solid var(--sys-outline-variant);margin-bottom:20px}.dialog-header[_ngcontent-%COMP%]   h2.mat-mdc-dialog-title[_ngcontent-%COMP%]{margin-bottom:4px;font-size:1.5em;font-weight:500;color:var(--sys-on-surface)}.order-code-chip[_ngcontent-%COMP%]{display:inline-block;font-size:.85em;color:var(--sys-on-surface-variant);background-color:var(--sys-surface-container-low);padding:4px 10px;border-radius:16px;margin-bottom:16px;font-family:Consolas,Monaco,monospace}.dialog-content[_ngcontent-%COMP%]{padding:0 24px 20px;overflow-y:auto;flex-grow:1}.current-status-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:24px;font-size:1em;color:var(--sys-on-surface-variant)}.current-status-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{margin-right:8px}.status-badge[_ngcontent-%COMP%]{padding:5px 12px;border-radius:16px;font-size:.8rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;display:inline-flex;align-items:center;line-height:1;color:var(--sys-on-surface)}.status-registrado[_ngcontent-%COMP%]{background-color:var(--status-registrado-bg);color:var(--status-registrado-color)}.status-recogido[_ngcontent-%COMP%]{background-color:var(--status-recogido-bg);color:var(--status-recogido-color)}.status-en-almacen[_ngcontent-%COMP%]{background-color:var(--status-en-almacen-bg);color:var(--status-en-almacen-color)}.status-en-transito[_ngcontent-%COMP%]{background-color:var(--status-en-transito-bg);color:var(--status-en-transito-color)}.status-entregado[_ngcontent-%COMP%]{background-color:var(--status-entregado-bg);color:var(--status-entregado-color)}.status-no-entregado[_ngcontent-%COMP%]{background-color:var(--status-no-entregado-bg);color:var(--status-no-entregado-color)}.status-cancelado[_ngcontent-%COMP%]{background-color:var(--status-cancelado-bg);color:var(--status-cancelado-color)}.status-rechazado[_ngcontent-%COMP%]{background-color:var(--status-rechazado-bg);color:var(--status-rechazado-color)}.status-reprogramado[_ngcontent-%COMP%]{background-color:var(--status-reprogramado-bg);color:var(--status-reprogramado-color)}.full-width[_ngcontent-%COMP%]{width:100%}.select-status-field[_ngcontent-%COMP%]{margin-bottom:20px}.reason-field[_ngcontent-%COMP%]{margin-top:10px}.reason-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:60px}.dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid rgba(0,0,0,.12);background-color:var(--sys-surface-container-low)}.dialog-actions[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{margin-right:8px}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{min-height:1.25em;height:auto}.delivery-details-section[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid rgba(0,0,0,.12)}.delivery-details-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1em;font-weight:500;margin-bottom:16px;color:#444}.image-upload-container[_ngcontent-%COMP%]{margin-bottom:20px}.image-upload-container[_ngcontent-%COMP%]   .image-upload-label[_ngcontent-%COMP%]{display:block;font-size:.9em;color:#555;margin-bottom:8px;font-weight:500}.image-upload-container[_ngcontent-%COMP%]   .upload-button[_ngcontent-%COMP%]{margin-bottom:10px}.image-upload-container[_ngcontent-%COMP%]   .upload-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:6px}.image-preview-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;border:1px solid #ddd;padding:5px;border-radius:4px;background-color:#f9f9f9;margin-top:10px}.image-preview-wrapper[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:200px;border-radius:3px}.image-preview-wrapper[_ngcontent-%COMP%]   .remove-image-button[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-10px;background-color:#fffc;line-height:normal;padding:0;width:28px;height:28px}.image-preview-wrapper[_ngcontent-%COMP%]   .remove-image-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.upload-spinner[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.9em;color:#555;margin-top:10px}.upload-spinner[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin-right:8px}.payment-method-field[_ngcontent-%COMP%]{margin-top:16px}.close-button-header[_ngcontent-%COMP%]{min-width:auto;padding:0;line-height:normal;color:#757575}"]})};function bo(o,t){if(o&1&&(n(0,"mat-grid-tile")(1,"div",10)(2,"mat-icon",11),a(3,"account_circle"),r(),n(4,"div")(5,"div",12),a(6,"Usuario Creador"),r(),n(7,"div",13),a(8),C(9,"default"),r()()()()),o&2){let e=f();d(8),p(" ",E(9,1,e.data.order.user==null?null:e.data.order.user.username,"N/A")," ")}}function Co(o,t){if(o&1&&(n(0,"mat-grid-tile")(1,"div",10)(2,"mat-icon",11),a(3,"account_circle"),r(),n(4,"div")(5,"div",12),a(6,"Motorizado"),r(),n(7,"div",13),a(8),C(9,"default"),r()()()()),o&2){let e=f();d(8),p(" ",E(9,1,e.data.order.assigned_driver==null?null:e.data.order.assigned_driver.username,"N/A")," ")}}function xo(o,t){if(o&1&&(n(0,"mat-grid-tile")(1,"div",10)(2,"mat-icon",11),a(3,"explore"),r(),n(4,"div")(5,"div",12),a(6,"Coordenadas"),r(),n(7,"div",13),a(8),r()()()()),o&2){let e=f();d(8),p(" ",e.data.order.delivery_coordinates," ")}}function yo(o,t){o&1&&b(0,"mat-divider")}function Oo(o,t){if(o&1&&(n(0,"mat-grid-tile")(1,"div",10)(2,"mat-icon",11),a(3,"aspect_ratio"),r(),n(4,"div")(5,"div",12),a(6,"Tama\xF1o Paquete"),r(),n(7,"div",13),a(8),C(9,"titlecase"),r()()()()),o&2){let e=f();d(8),p(" ",F(9,1,e.data.order.package_size_type)," ")}}function Mo(o,t){if(o&1&&(n(0,"mat-grid-tile")(1,"div",10)(2,"mat-icon",11),a(3,"fitness_center"),r(),n(4,"div")(5,"div",12),a(6,"Peso (kg)"),r(),n(7,"div",13),a(8),C(9,"number"),r()()()()),o&2){let e=f();d(8),p(" ",E(9,1,e.data.order.package_weight_kg,"1.1-2")," kg ")}}function Eo(o,t){if(o&1&&(n(0,"mat-grid-tile")(1,"div",10)(2,"mat-icon",11),a(3,"width_normal"),r(),n(4,"div")(5,"div",12),a(6,"Dimensiones (cm)"),r(),n(7,"div",13),a(8),r()()()()),o&2){let e=f();d(8),ir(" An: ",e.data.order.package_width_cm," x L: ",e.data.order.package_length_cm," x Al: ",e.data.order.package_height_cm," ")}}function So(o,t){if(o&1&&(n(0,"mat-grid-tile")(1,"div",10)(2,"mat-icon",11),a(3,"credit_card"),r(),n(4,"div")(5,"div",12),a(6,"M\xE9todo de Cobro"),r(),n(7,"div",13),a(8),C(9,"titlecase"),r()()()()),o&2){let e=f();d(8),p(" ",F(9,1,e.data.order.payment_method_for_collection)," ")}}function Do(o,t){if(o&1&&(n(0,"div",24)(1,"div",25)(2,"mat-icon"),a(3,"speaker_notes"),r(),a(4," Observaciones Cliente/Pedido: "),r(),n(5,"p",26),a(6),r()()),o&2){let e=f(2);d(6),P(e.data.order.observations)}}function ko(o,t){o&1&&b(0,"mat-divider")}function Po(o,t){if(o&1&&(n(0,"div",24)(1,"div",25)(2,"mat-icon"),a(3,"warehouse"),r(),a(4," Tipo de Transferencia a Almac\xE9n: "),r(),n(5,"p",26),a(6),C(7,"titlecase"),r()()),o&2){let e=f(2);d(6),p(" ",F(7,1,e.data.order.type_order_transfer_to_warehouse)," ")}}function wo(o,t){if(o&1&&(n(0,"mat-card",6)(1,"mat-card-header",7)(2,"mat-card-title"),a(3,"Observaciones y Log\xEDstica"),r()(),n(4,"mat-card-content"),m(5,Do,7,1,"div",23)(6,ko,1,0,"mat-divider",14)(7,Po,8,3,"div",23),r()()),o&2){let e=f();d(5),s("ngIf",e.data.order.observations),d(),s("ngIf",e.data.order.observations&&e.data.order.type_order_transfer_to_warehouse),d(),s("ngIf",e.data.order.type_order_transfer_to_warehouse)}}var ai=class o{constructor(t,e){this.dialogRef=t;this.data=e;console.log("data",e)}OrderStatusEnum=Je;getStatusBadgeClass(t){return t?`status-${t.toString().toLowerCase().replace(/[\s_]+/g,"-")}`:"status-desconocido"}onClose(){this.dialogRef.close()}openMaps(t){t&&window.open(`https://www.google.com/maps/search/?api=1&query=${t}`,"_blank")}callPhone(t){t&&(window.location.href=`tel:${t}`)}printOrder(){console.log("Imprimiendo pedido (simulado):",this.data.order.code),this.dialogRef.close("print")}static \u0275fac=function(e){return new(e||o)(Y(Ee),Y(Qe))};static \u0275cmp=M({type:o,selectors:[["app-order-detail-dialog"]],decls:145,vars:66,consts:[["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle",".dialog-header-draggable",1,"dialog-container"],[1,"dialog-header","dialog-header-draggable"],["mat-dialog-title",""],[1,"order-code-chip"],["mat-icon-button","","aria-label","Cerrar di\xE1logo","matTooltip","Cerrar",1,"close-button",3,"click"],["tabindex","-1",1,"dialog-content"],["appearance","outlined",1,"info-card"],[1,"compact-card-header"],[1,"status-badge-dialog",3,"ngClass"],["cols","2","rowHeight","80px"],[1,"detail-item"],[1,"detail-icon"],[1,"detail-label"],[1,"detail-value"],[4,"ngIf"],[1,"detail-item",3,"click"],[1,"detail-value","link-like"],[3,"colspan"],[1,"item-description"],[1,"detail-value","bold-value"],["appearance","outlined","class","info-card",4,"ngIf"],["align","end",1,"dialog-actions"],["mat-flat-button","","color","primary",3,"click"],["class","detail-block",4,"ngIf"],[1,"detail-block"],[1,"detail-label-block"],[1,"detail-value-block"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"Detalles del Pedido"),r(),n(4,"span",3),a(5),r(),n(6,"button",4),_("click",function(){return i.onClose()}),n(7,"mat-icon"),a(8,"close"),r()()(),n(9,"mat-dialog-content",5)(10,"mat-card",6)(11,"mat-card-header",7)(12,"mat-card-title"),a(13,"Informaci\xF3n General"),r(),n(14,"span",8),a(15),C(16,"titlecase"),r()(),n(17,"mat-card-content")(18,"mat-grid-list",9)(19,"mat-grid-tile")(20,"div",10)(21,"mat-icon",11),a(22,"local_shipping"),r(),n(23,"div")(24,"div",12),a(25,"Tipo de Env\xEDo"),r(),n(26,"div",13),a(27),C(28,"titlecase"),C(29,"default"),r()()()(),n(30,"mat-grid-tile")(31,"div",10)(32,"mat-icon",11),a(33,"calendar_today"),r(),n(34,"div")(35,"div",12),a(36,"Fecha Registro"),r(),n(37,"div",13),a(38),C(39,"date"),C(40,"default"),r()()()(),n(41,"mat-grid-tile")(42,"div",10)(43,"mat-icon",11),a(44,"event_available"),r(),n(45,"div")(46,"div",12),a(47,"Fecha Entrega Prog."),r(),n(48,"div",13),a(49),C(50,"date"),C(51,"default"),r()()()(),m(52,bo,10,4,"mat-grid-tile",14)(53,Co,10,4,"mat-grid-tile",14),r()()(),n(54,"mat-card",6)(55,"mat-card-header",7)(56,"mat-card-title"),a(57,"Destinatario y Entrega"),r()(),n(58,"mat-card-content")(59,"mat-grid-list",9)(60,"mat-grid-tile")(61,"div",10)(62,"mat-icon",11),a(63,"person_pin"),r(),n(64,"div")(65,"div",12),a(66,"Nombre Destinatario"),r(),n(67,"div",13),a(68),C(69,"default"),r()()()(),n(70,"mat-grid-tile")(71,"div",15),_("click",function(){return i.callPhone(i.data.order.recipient_phone)}),n(72,"mat-icon",11),a(73,"phone_iphone"),r(),n(74,"div")(75,"div",12),a(76,"Tel\xE9fono Destinatario"),r(),n(77,"div",16),a(78),r()()()(),n(79,"mat-grid-tile",17)(80,"div",10)(81,"mat-icon",11),a(82,"location_on"),r(),n(83,"div")(84,"div",12),a(85,"Direcci\xF3n de Entrega"),r(),n(86,"div",13),a(87),C(88,"default"),r()()()(),n(89,"mat-grid-tile")(90,"div",10)(91,"mat-icon",11),a(92,"map"),r(),n(93,"div")(94,"div",12),a(95,"Distrito"),r(),n(96,"div",13),a(97),C(98,"titlecase"),C(99,"default"),r()()()(),m(100,xo,9,1,"mat-grid-tile",14),r()()(),n(101,"mat-card",6)(102,"mat-card-header",7)(103,"mat-card-title"),a(104,"Detalles del Paquete"),r()(),n(105,"mat-card-content")(106,"p",18),a(107),C(108,"default"),r(),m(109,yo,1,0,"mat-divider",14),n(110,"mat-grid-list",9),m(111,Oo,10,3,"mat-grid-tile",14)(112,Mo,10,4,"mat-grid-tile",14)(113,Eo,9,3,"mat-grid-tile",14),r()()(),n(114,"mat-card",6)(115,"mat-card-header",7)(116,"mat-card-title"),a(117,"Informaci\xF3n Financiera"),r()(),n(118,"mat-card-content")(119,"mat-grid-list",9)(120,"mat-grid-tile")(121,"div",10)(122,"mat-icon",11),a(123,"payments"),r(),n(124,"div")(125,"div",12),a(126,"Monto a Cobrar Entrega"),r(),n(127,"div",19),a(128),C(129,"currency"),r()()()(),n(130,"mat-grid-tile")(131,"div",10)(132,"mat-icon",11),a(133,"local_atm"),r(),n(134,"div")(135,"div",12),a(136,"Costo de Env\xEDo"),r(),n(137,"div",19),a(138),C(139,"currency"),r()()()(),m(140,So,10,3,"mat-grid-tile",14),r()()(),m(141,wo,8,3,"mat-card",20),r(),n(142,"mat-dialog-actions",21)(143,"button",22),_("click",function(){return i.onClose()}),a(144,"Cerrar"),r()()()),e&2&&(d(5),p("N\xB0: ",i.data.order.code||i.data.order.id,""),d(9),s("ngClass",i.getStatusBadgeClass(i.data.order.status)),d(),p(" ",F(16,23,i.data.order.status)," "),d(12),p(" ",E(29,27,F(28,25,i.data.order.shipment_type),"N/A")," "),d(11),p(" ",E(40,33,E(39,30,i.data.order.createdAt,"dd/MM/yy HH:mm"),"N/A")," "),d(11),p(" ",E(51,39,E(50,36,i.data.order.delivery_date,"dd/MM/yyyy"),"No especificada")," "),d(3),s("ngIf",i.data.order.user==null?null:i.data.order.user.username),d(),s("ngIf",i.data.order.assigned_driver==null?null:i.data.order.assigned_driver.username),d(15),p(" ",E(69,42,i.data.order.recipient_name,"N/A")," "),d(10),p(" ",i.data.order.recipient_phone||"N/A"," "),d(),s("colspan",2),d(8),p(" ",E(88,45,i.data.order.delivery_address,"N/A")," "),d(10),p(" ",E(99,50,F(98,48,i.data.order.delivery_district_name),"N/A")," "),d(3),s("ngIf",i.data.order.delivery_coordinates),d(7),p(" ",E(108,53,i.data.order.item_description,"Sin descripci\xF3n del contenido.")," "),d(2),s("ngIf",i.data.order.package_size_type||i.data.order.package_weight_kg),d(2),s("ngIf",i.data.order.package_size_type),d(),s("ngIf",i.data.order.package_weight_kg),d(),s("ngIf",i.data.order.package_width_cm),d(15),p(" ",Ge(129,56,i.data.order.amount_to_collect_at_delivery||0,"PEN","S/ ","1.2-2")," "),d(10),p(" ",Ge(139,61,i.data.order.shipping_cost||0,"PEN","S/ ","1.2-2")," "),d(2),s("ngIf",i.data.order.payment_method_for_collection),d(),s("ngIf",i.data.order.observations||i.data.order.type_order_transfer_to_warehouse))},dependencies:[S,Ue,R,ot,rt,nt,q,me,Se,ke,De,D,N,ce,w,V,we,Pe,pr,dr,cr,mr,sr,jr,qr,$r,He,je,Wr,Qr,Hr,Xr],styles:["[_nghost-%COMP%]{display:block}.dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:calc(100vh - 80px)}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #e0e0e0;background-color:#f5f5f5}.dialog-header-draggable[_ngcontent-%COMP%]{cursor:move}h2.mat-mdc-dialog-title[_ngcontent-%COMP%]{margin:0;font-size:1.35em;font-weight:500;color:#455a64}.order-code-chip[_ngcontent-%COMP%]{font-size:.9em;color:#3f51b5;font-weight:500;margin-left:16px;flex-grow:1}.close-button[_ngcontent-%COMP%]{min-width:auto;padding:0;line-height:normal;color:#757575}.dialog-content[_ngcontent-%COMP%]{padding:20px 24px 24px;overflow-y:auto;flex-grow:1;background-color:#fff}.info-card[_ngcontent-%COMP%]{margin-bottom:24px;border:1px solid #eeeeee!important;box-shadow:none!important;border-radius:8px}.info-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.info-card[_ngcontent-%COMP%]   mat-card-header.compact-card-header[_ngcontent-%COMP%]{padding:12px 16px;display:flex;align-items:center;justify-content:space-between;background-color:#fafafa;border-bottom:1px solid #eeeeee}.info-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.1em;font-weight:500;color:#546e7a;margin:0}.info-card[_ngcontent-%COMP%]   .status-badge-dialog[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:.7rem;font-weight:600;text-transform:uppercase;color:#fff;line-height:1.2}.info-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px;font-size:.9rem}mat-grid-list[_ngcontent-%COMP%]{padding:0}mat-grid-tile[_ngcontent-%COMP%]     .mat-figure{align-items:flex-start;padding:8px}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;gap:10px}.detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{color:#90a4ae;font-size:20px}.detail-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column;line-height:1.4}.interactive-detail-item[_ngcontent-%COMP%]{cursor:pointer}.interactive-detail-item[_ngcontent-%COMP%]:hover   .detail-value[_ngcontent-%COMP%]{color:#3f51b5;text-decoration:underline}.link-like[_ngcontent-%COMP%]{color:#5c6bc0;font-weight:500}.detail-label[_ngcontent-%COMP%]{font-size:.75em;color:#616161;margin-bottom:2px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.detail-value[_ngcontent-%COMP%]{color:#212121;word-break:break-word}.bold-value[_ngcontent-%COMP%]{font-weight:600;font-size:1.05em}.item-description[_ngcontent-%COMP%]{font-style:italic;color:#555;margin-bottom:12px;padding-bottom:12px;border-bottom:1px dashed #e0e0e0;font-size:.9em}.detail-block[_ngcontent-%COMP%]{margin-bottom:16px}.detail-block[_ngcontent-%COMP%]   .detail-label-block[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.9em;font-weight:500;color:#607d8b;margin-bottom:6px}.detail-block[_ngcontent-%COMP%]   .detail-label-block[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px}.detail-block[_ngcontent-%COMP%]   .detail-value-block[_ngcontent-%COMP%]{font-size:.9em;color:#424242;padding-left:26px;white-space:pre-wrap}.dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0;background-color:#fafafa}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}.status-registrado[_ngcontent-%COMP%]{background-color:#6610f2;color:#fff}.status-recogido[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff}.status-en-almacen[_ngcontent-%COMP%]{background-color:#0d6efd;color:#fff}.status-en-transito[_ngcontent-%COMP%]{background-color:#0c1a77;color:#d0c8c8}.status-entregado[_ngcontent-%COMP%]{background-color:#198754;color:#fff}.status-no-entregado[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.status-cancelado[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.status-rechazado[_ngcontent-%COMP%]{background-color:#ff6b6b;color:#fff}.status-reprogramado[_ngcontent-%COMP%]{background-color:#adb5bd;color:#212529}.status-desconocido[_ngcontent-%COMP%]{background-color:#9e9e9e;color:#fff}"]})};var Io=(o,t)=>t.uid;function To(o,t){if(o&1&&(n(0,"div",23)(1,"p"),a(2," Actualmente asignado a: "),n(3,"strong"),a(4),r()()()),o&2){let e=t.ngIf;d(4),P(e)}}function Fo(o,t){o&1&&(n(0,"p",24),a(1," Este pedido a\xFAn no tiene un motorizado asignado. "),r())}function Ao(o,t){if(o&1){let e=x();n(0,"button",25),_("click",function(){h(e);let l=f();return v(l.clearSelection())}),n(1,"mat-icon"),a(2,"close"),r()()}}function Ro(o,t){o&1&&(n(0,"mat-icon",26),a(1,"person_search"),r())}function No(o,t){o&1&&b(0,"mat-progress-spinner",27)}function Vo(o,t){if(o&1&&(n(0,"mat-option",16)(1,"div",28)(2,"mat-icon",29),a(3,"two_wheeler"),r(),n(4,"span"),a(5),r()()()),o&2){let e=t.$implicit;s("value",e),d(5),P(e.username)}}function Bo(o,t){o&1&&(n(0,"mat-option",17),a(1,"No se encontraron motorizados."),r())}function Lo(o,t){o&1&&(n(0,"mat-error"),a(1," Debe seleccionar un motorizado. "),r())}function zo(o,t){if(o&1&&(n(0,"p",30),a(1," Motorizado seleccionado: "),n(2,"strong"),a(3),r()()),o&2){let e=f();d(3),P(e.selectedDriver.username)}}var li=class o{constructor(t,e){this.dialogRef=t;this.data=e;this.assignDriverForm=this.fb.group({}),this.filteredDrivers$=this.driverSearchCtrl.valueChanges.pipe(xt(""),Ct(300),Le(),Bi(i=>(this.isLoadingDrivers=!0,this.orderService.getAvailableDrivers(i||"").pipe(be(()=>this.isLoadingDrivers=!1),G(()=>(this.isLoadingDrivers=!1,Be([])))))),L(this.destroy$))}assignDriverForm;drivers$=Be([]);isLoadingDrivers=!1;selectedDriver=null;driverSearchCtrl=new _t("");filteredDrivers$;destroy$=new U;orderService=g(j);fb=g(Oe);ngOnInit(){this.data.currentDriverId&&this.data.order.assigned_driver&&(this.selectedDriver=this.data.order.assigned_driver,this.driverSearchCtrl.setValue(this.data.order.assigned_driver.username||"",{emitEvent:!1}))}displayDriverName(t){return t&&t.name?t.name:""}onDriverSelected(t){this.selectedDriver=t.option.value,console.log("Driver selected:",this.selectedDriver)}onConfirm(){this.selectedDriver?this.dialogRef.close({selectedDriver:this.selectedDriver}):console.warn("No driver selected")}onCancel(){this.dialogRef.close()}clearSelection(){this.selectedDriver=null,this.driverSearchCtrl.setValue("")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||o)(Y(Ee),Y(Qe))};static \u0275cmp=M({type:o,selectors:[["app-assign-driver-dialog"]],decls:35,vars:19,consts:[["noDriverAssigned",""],["autoDriver","matAutocomplete"],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle",".dialog-header-draggable",1,"dialog-container"],[1,"dialog-header","dialog-header-draggable"],["mat-dialog-title",""],[1,"order-code-chip"],[1,"dialog-content"],["class","current-assignment",4,"ngIf","ngIfElse"],[1,"content-divider"],["novalidate","",3,"formGroup"],["appearance","outline",1,"full-width","driver-search-field"],["type","text","placeholder","Escriba el nombre del motorizado...","aria-label","Motorizado","matInput","",3,"formControl","matAutocomplete"],["matSuffix","","mat-icon-button","","aria-label","Limpiar",3,"click",4,"ngIf"],["matSuffix","",4,"ngIf"],["matSuffix","","mode","indeterminate","diameter","20",4,"ngIf"],[3,"optionSelected","displayWith"],[3,"value"],["disabled",""],[4,"ngIf"],["class","selected-driver-info",4,"ngIf"],["align","end",1,"dialog-actions"],["mat-stroked-button","",1,"cancel-button",3,"click"],["mat-flat-button","","color","primary",1,"confirm-button",3,"click","disabled"],[1,"current-assignment"],[1,"no-driver-message"],["matSuffix","","mat-icon-button","","aria-label","Limpiar",3,"click"],["matSuffix",""],["matSuffix","","mode","indeterminate","diameter","20"],[1,"driver-option"],[1,"driver-option-icon"],[1,"selected-driver-info"]],template:function(e,i){if(e&1){let l=x();n(0,"div",2)(1,"div",3)(2,"h2",4),a(3,"Asignar / Cambiar Motorizado"),r(),n(4,"span",5),a(5),r()(),n(6,"mat-dialog-content",6)(7,"section"),m(8,To,5,1,"div",7)(9,Fo,2,0,"ng-template",null,0,it),r(),b(11,"mat-divider",8),n(12,"section")(13,"form",9)(14,"mat-form-field",10)(15,"mat-label"),a(16,"Buscar y Seleccionar Motorizado"),r(),b(17,"input",11),m(18,Ao,3,0,"button",12)(19,Ro,2,0,"mat-icon",13)(20,No,1,0,"mat-progress-spinner",14),n(21,"mat-autocomplete",15,1),_("optionSelected",function(u){return h(l),v(i.onDriverSelected(u))}),Ki(23,Vo,6,2,"mat-option",16,Io),C(25,"async"),m(26,Bo,2,0,"mat-option",17),C(27,"async"),r(),m(28,Lo,2,0,"mat-error",18),r()()(),m(29,zo,4,1,"p",19),r(),n(30,"mat-dialog-actions",20)(31,"button",21),_("click",function(){return h(l),v(i.onCancel())}),a(32," Cancelar "),r(),n(33,"button",22),_("click",function(){return h(l),v(i.onConfirm())}),a(34),r()()()}if(e&2){let l,c=z(10),u=z(22);d(5),p("Pedido N\xB0: ",i.data.order.code||i.data.order.id,""),d(3),s("ngIf",i.data.order.assigned_driver==null?null:i.data.order.assigned_driver.username)("ngIfElse",c),d(5),s("formGroup",i.assignDriverForm),d(4),s("formControl",i.driverSearchCtrl)("matAutocomplete",u),d(),s("ngIf",i.driverSearchCtrl.value&&!i.isLoadingDrivers),d(),s("ngIf",!i.driverSearchCtrl.value&&!i.isLoadingDrivers),d(),s("ngIf",i.isLoadingDrivers),d(),s("displayWith",i.displayDriverName),d(2),Zi(F(25,15,i.filteredDrivers$)),d(3),ue(((l=F(27,17,i.filteredDrivers$))==null?null:l.length)===0&&!i.isLoadingDrivers&&i.driverSearchCtrl.value?26:-1),d(2),s("ngIf",i.assignDriverForm.hasError("required","driverId")&&i.selectedDriver===null),d(),s("ngIf",i.selectedDriver),d(4),s("disabled",!i.selectedDriver||i.isLoadingDrivers),d(),p(" ",i.data.currentDriverId?"Reasignar":"Asignar"," Motorizado ")}},dependencies:[S,R,$e,W,xe,oe,Q,ne,kt,ae,me,Se,ke,De,Z,K,X,le,qe,Te,Ie,Ur,zr,Gr,se,de,D,N,ce,w,V,re,ie,Vt,Pe],styles:["[_nghost-%COMP%]{display:block}.dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:95vh;max-width:90%;padding:16px;box-shadow:0 4px 16px #0000001a}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;margin-bottom:16px;border-bottom:1px solid var(--app-border-color);background-color:var(--app-background-dialog-header)}.dialog-header-draggable[_ngcontent-%COMP%]{cursor:move}h2.mat-mdc-dialog-title[_ngcontent-%COMP%]{margin:0;font-size:1.3em;font-weight:500;color:var(--app-blue-grey-700)}.order-code-chip[_ngcontent-%COMP%]{font-size:.85em;color:var(--app-indigo-500);font-weight:500;margin-left:12px;flex-grow:1}.close-button[_ngcontent-%COMP%]{min-width:auto;padding:0;line-height:normal;color:var(--app-gray-600)}.dialog-content[_ngcontent-%COMP%]{padding:20px 24px 24px;overflow-y:auto;flex-grow:1}.dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:8px;color:var(--app-text-default);font-size:.95em}.dialog-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:500;color:var(--app-text-default)}.current-assignment[_ngcontent-%COMP%]{margin-bottom:16px;padding:10px;background-color:var(--app-blue-50);border-radius:4px;border-left:4px solid var(--app-blue-500)}.no-driver-message[_ngcontent-%COMP%]{font-style:italic;color:var(--app-orange-700);margin-bottom:16px}.content-divider[_ngcontent-%COMP%]{margin:16px 0;border-top-color:var(--app-border-color)}.full-width[_ngcontent-%COMP%]{width:100%}.driver-search-field[_ngcontent-%COMP%]{margin-bottom:8px}.driver-select-container[_ngcontent-%COMP%]{position:relative;min-height:90px}.spinner-container-small[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:10px;color:var(--app-text-secondary);font-size:.9em}.spinner-container-small[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:8px}.mat-mdc-autocomplete-panel[_ngcontent-%COMP%]{max-height:250px!important}.driver-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.driver-option[_ngcontent-%COMP%]   .driver-option-icon[_ngcontent-%COMP%]{color:var(--app-blue-grey-400)}.driver-option[_ngcontent-%COMP%]   .driver-status[_ngcontent-%COMP%]{font-size:.8em;font-style:italic;color:var(--app-orange-700);margin-left:auto}.selected-driver-info[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px;padding:8px;background-color:var(--app-green-50);border-left:3px solid var(--app-green-500);border-radius:4px;font-size:.9em}.dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid var(--app-border-color);background-color:var(--sys-surface-container-low);display:flex;flex-direction:row;justify-content:flex-end;gap:8px}@media (max-width: 480px){.dialog-actions[_ngcontent-%COMP%]{flex-direction:row-reverse}}.hidden[_ngcontent-%COMP%]{visibility:hidden;height:0;overflow:hidden}"]})};function Go(o,t){if(o&1&&(n(0,"strong"),a(1),C(2,"date"),r()),o&2){let e=f();d(),p(" ",E(2,1,e.data.order.delivery_date,"dd/MM/yyyy")," ")}}function Uo(o,t){o&1&&(n(0,"span"),a(1,"No programada"),r())}function $o(o,t){o&1&&(n(0,"mat-error"),a(1,"Debe seleccionar una nueva fecha de entrega."),r())}function qo(o,t){o&1&&(n(0,"mat-error"),a(1,"El motivo no debe exceder los 250 caracteres."),r())}var di=class o{constructor(t,e){this.dialogRef=t;this.data=e;this.minDateForReschedule=this.data.minDate||new Date,this.data.minDate||this.minDateForReschedule.setDate(this.minDateForReschedule.getDate()+1),this.rescheduleForm=this.fb.group({newDeliveryDate:[this.data.order.delivery_date?new Date(this.data.order.delivery_date):null,O.required],reason:["",O.maxLength(250)]})}rescheduleForm;minDateForReschedule;formSubmitted=!1;fb=g(Oe);ngOnInit(){}get newDeliveryDateCtrl(){return this.rescheduleForm.get("newDeliveryDate")}get reasonCtrl(){return this.rescheduleForm.get("reason")}onConfirm(){this.formSubmitted=!0,this.rescheduleForm.valid?this.dialogRef.close({newDeliveryDate:this.newDeliveryDateCtrl?.value,reason:this.reasonCtrl?.value?.trim()||void 0}):this.rescheduleForm.markAllAsTouched()}onCancel(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||o)(Y(Ee),Y(Qe))};static \u0275cmp=M({type:o,selectors:[["app-reschedule-order-dialog"]],features:[ze([])],decls:39,vars:11,consts:[["noCurrentDate",""],["picker",""],["cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","cdkDragHandle",".dialog-header-draggable",1,"dialog-container"],[1,"dialog-header","dialog-header-draggable"],["mat-dialog-title",""],[1,"order-code-chip"],["mat-icon-button","","aria-label","Cerrar di\xE1logo","matTooltip","Cerrar",1,"close-button",3,"click"],[3,"ngSubmit","formGroup"],[1,"dialog-content"],[4,"ngIf","ngIfElse"],[1,"content-divider"],["appearance","outline",1,"full-width","date-picker-field"],["matInput","","formControlName","newDeliveryDate","placeholder","Seleccione una fecha","readonly","","required","",3,"matDatepicker","min"],["matSuffix","",3,"for"],["appearance","outline",1,"full-width","reason-field"],["matInput","","formControlName","reason","rows","3","cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","5","placeholder","Ej: Cliente solicit\xF3 cambio, Ruta congestionada..."],["align","end",1,"dialog-actions"],["mat-stroked-button","","type","button",1,"cancel-button",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"confirm-button",3,"disabled"]],template:function(e,i){if(e&1){let l=x();n(0,"div",2)(1,"div",3)(2,"h2",4),a(3,"Reprogramar Pedido"),r(),n(4,"span",5),a(5),r(),n(6,"button",6),_("click",function(){return h(l),v(i.onCancel())}),n(7,"mat-icon"),a(8,"close"),r()()(),n(9,"form",7),_("ngSubmit",function(){return h(l),v(i.onConfirm())}),n(10,"mat-dialog-content",8)(11,"p"),a(12," Cliente: "),n(13,"strong"),a(14),r()(),n(15,"p"),a(16," Fecha de Entrega Actual: "),m(17,Go,3,4,"strong",9)(18,Uo,2,0,"ng-template",null,0,it),r(),b(20,"mat-divider",10),n(21,"mat-form-field",11)(22,"mat-label"),a(23,"Nueva Fecha de Entrega"),r(),b(24,"input",12)(25,"mat-datepicker-toggle",13)(26,"mat-datepicker",null,1),m(28,$o,2,0,"mat-error"),r(),n(29,"mat-form-field",14)(30,"mat-label"),a(31,"Motivo de Reprogramaci\xF3n (Opcional)"),r(),b(32,"textarea",15),m(33,qo,2,0,"mat-error"),r()(),n(34,"mat-dialog-actions",16)(35,"button",17),_("click",function(){return h(l),v(i.onCancel())}),a(36," Cancelar "),r(),n(37,"button",18),a(38," Confirmar Reprogramaci\xF3n "),r()()()()}if(e&2){let l=z(19),c=z(27);d(5),p("Pedido N\xB0: ",i.data.order.code||i.data.order.id,""),d(4),s("formGroup",i.rescheduleForm),d(5),P(i.data.order.recipient_name),d(3),s("ngIf",i.data.order.delivery_date)("ngIfElse",l),d(7),s("matDatepicker",c)("min",i.minDateForReschedule),d(),s("for",c),d(3),ue(i.newDeliveryDateCtrl!=null&&i.newDeliveryDateCtrl.hasError("required")&&(i.newDeliveryDateCtrl!=null&&i.newDeliveryDateCtrl.touched||i.newDeliveryDateCtrl!=null&&i.newDeliveryDateCtrl.dirty||i.formSubmitted)?28:-1),d(5),ue(i.reasonCtrl!=null&&i.reasonCtrl.hasError("maxlength")?33:-1),d(4),s("disabled",i.rescheduleForm.invalid)}},dependencies:[S,R,q,W,xe,oe,Q,ne,Pt,ae,ye,me,Se,ke,De,Z,K,X,le,qe,se,de,It,D,N,ce,w,V,ct,lt,dt,st,Bt,we,Pe],styles:["[_nghost-%COMP%]{display:block}.dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:85vh;width:480px;max-width:90vw}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px}.dialog-header-draggable[_ngcontent-%COMP%]{cursor:move}h2.mat-mdc-dialog-title[_ngcontent-%COMP%]{margin:0;font-size:1.3em;font-weight:500}.order-code-chip[_ngcontent-%COMP%]{font-size:.85em;font-weight:500;margin-left:12px;flex-grow:1}.close-button[_ngcontent-%COMP%]{min-width:auto;padding:0;line-height:normal}.dialog-content[_ngcontent-%COMP%]{padding:20px 24px 10px;overflow-y:auto;flex-grow:1}.dialog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:8px;font-size:.95em}.dialog-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:500}.content-divider[_ngcontent-%COMP%]{margin:16px 0 20px}.full-width[_ngcontent-%COMP%]{width:100%}.date-picker-field[_ngcontent-%COMP%]{margin-bottom:20px}.reason-field[_ngcontent-%COMP%]{margin-top:10px}.reason-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:50px}.dialog-actions[_ngcontent-%COMP%]{padding:16px 24px}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}"]})};var Qo=()=>[10,25,50,100],Wo=()=>({"highlight-row":!1});function Xo(o,t){o&1&&(n(0,"div",25),b(1,"mat-progress-spinner",26),r())}function Ko(o,t){o&1&&(n(0,"th",27),a(1,"N\xB0 Pedido"),r())}function Zo(o,t){if(o&1){let e=x();n(0,"td",28)(1,"a",29),_("click",function(){let l=h(e).$implicit,c=f();return v(c.onViewOrderDetails(l))}),a(2),r()()}if(o&2){let e=t.$implicit;d(2),P(e.code)}}function Jo(o,t){o&1&&(n(0,"th",27),a(1,"Tipo"),r())}function Yo(o,t){if(o&1&&(n(0,"td",30),a(1),r()),o&2){let e=t.$implicit;d(),p(" ",e.shipment_type," ")}}function en(o,t){o&1&&(n(0,"th",27),a(1,"Destinatario"),r())}function tn(o,t){if(o&1&&(n(0,"td",31),a(1),r()),o&2){let e=t.$implicit;s("matTooltip",e.recipient_name),d(),p(" ",e.recipient_name," ")}}function rn(o,t){o&1&&(n(0,"th",32),a(1," Estado "),r())}function on(o,t){if(o&1&&(n(0,"td",30)(1,"span",33),a(2),r()()),o&2){let e=t.$implicit,i=f();d(),s("ngClass",i.getStatusClass(e.status)),d(),p(" ",e.status," ")}}function nn(o,t){o&1&&(n(0,"th",27),a(1,"Distrito"),r())}function an(o,t){if(o&1&&(n(0,"td",30),a(1),r()),o&2){let e=t.$implicit;d(),p(" ",e.delivery_district_name," ")}}function ln(o,t){o&1&&(n(0,"th",27),a(1," F. Entrega Prog. "),r())}function dn(o,t){if(o&1&&(n(0,"td",30),a(1),C(2,"date"),r()),o&2){let e=t.$implicit;d(),p(" ",e.delivery_date?E(2,1,e.delivery_date,"dd/MM/yy"):"-"," ")}}function sn(o,t){o&1&&(n(0,"th",34),a(1," Cobrar "),r())}function cn(o,t){if(o&1&&(n(0,"td",35),a(1),C(2,"currency"),r()),o&2){let e=t.$implicit;d(),p(" ",Ge(2,1,e.amount_to_collect_at_delivery,"PEN","S/ ","1.2-2")," ")}}function mn(o,t){o&1&&(n(0,"th",36),a(1," Acciones "),r())}function pn(o,t){if(o&1){let e=x();n(0,"button",40),_("click",function(){h(e);let l=f().$implicit,c=f();return v(c.openChangeStatusModal(l))}),n(1,"mat-icon"),a(2,"swap_horiz"),r(),n(3,"span"),a(4,"Cambiar Estado General"),r()()}}function un(o,t){if(o&1){let e=x();n(0,"button",40),_("click",function(){h(e);let l=f().$implicit,c=f();return v(c.openRescheduleOrderModal(l))}),n(1,"mat-icon"),a(2,"event_repeat"),r(),n(3,"span"),a(4,"Reprogramar"),r()()}}function gn(o,t){if(o&1){let e=x();n(0,"button",40),_("click",function(){h(e);let l=f().$implicit,c=f();return v(c.openAssignDriverModal(l))}),n(1,"mat-icon"),a(2,"person_pin_circle"),r(),n(3,"span"),a(4),r()()}if(o&2){let e=f().$implicit;d(4),p("",e.assigned_driver?"Reasignar":"Asignar"," Motorizado")}}function _n(o,t){if(o&1){let e=x();n(0,"td",37)(1,"button",38)(2,"mat-icon"),a(3,"more_vert"),r()(),n(4,"mat-menu",39,0)(6,"button",40),_("click",function(){let l=h(e).$implicit,c=f();return v(c.onViewOrderDetails(l))}),n(7,"mat-icon"),a(8,"visibility"),r(),n(9,"span"),a(10,"Ver Detalles Completos"),r()(),m(11,pn,5,0,"button",41)(12,un,5,0,"button",41)(13,gn,5,1,"button",41),n(14,"button",40),_("click",function(){let l=h(e).$implicit,c=f();return v(c.onViewPdf(l))}),n(15,"mat-icon"),a(16,"picture_as_pdf"),r(),n(17,"span"),a(18,"Visualizar"),r()(),n(19,"button",40),_("click",function(){let l=h(e).$implicit,c=f();return v(c.onSeguimiento(l))}),n(20,"mat-icon"),a(21,"timeline"),r(),n(22,"span"),a(23,"Seguimiento"),r()()()()}if(o&2){let e=z(5),i=f();d(),s("matMenuTriggerFor",e),d(10),s("ngIf",i.isAdminOrDriver()),d(),s("ngIf",i.isAdminOrReceptionist()),d(),s("ngIf",i.isAdminUser())}}function fn(o,t){o&1&&b(0,"tr",42)}function hn(o,t){o&1&&b(0,"tr",43),o&2&&s("ngClass",tt(1,Wo))}function vn(o,t){if(o&1&&(n(0,"tr",44)(1,"td",45),a(2," No se encontraron pedidos que coincidan con los filtros. "),r()()),o&2){let e=f();d(),ut("colspan",e.displayedColumns.length)}}var si=class o{appStore=g(kr);orders=[];isLoading=!1;totalCount=0;pageSize=10;pageIndex=0;pageChanged=new k;sortChanged=new k;statusChanged=new k;motorizedChanged=new k;rescheduleChanged=new k;viewPdfClicked=new k;viewDetailsClicked=new k;displayedColumns=["code","shipment_type","recipient_name","status","delivery_district_name","delivery_date","amount_to_collect_at_delivery","actions"];dataSource=new Nr;paginator;sort;dialog=g(Nt);snackBar=g(Me);OrderStatus=Je;constructor(){}ngOnChanges(t){t.orders&&this.orders&&(this.dataSource.data=this.orders)}ngAfterViewInit(){}canMarkAs(t,e){let i=t.status;return!1}onViewPdf(t){let e=Re.apiUrl+"/orders/"+t.id+"/pdf";window.open(e,"_blank"),this.viewPdfClicked.emit(t)}onSeguimiento(t){window.open("/tracking?code="+t.tracking_code,"_blank")}changeOrderStatus(t,e){console.log(`Changing status of order ${t.code} to ${e}`),this.statusChanged.emit({orderId:t.id,newStatus:e})}getStatusClass(t){return t?`status-${t.toLowerCase().replace(/[\s_]+/g,"-")}`:"status-desconocido"}openChangeStatusModal(t){let e=this.getAvailableStatuses(t);if(e.length===0){this.snackBar.open("No hay cambios de estado disponibles para este pedido.","OK",{duration:3e3});return}this.dialog.open(ri,{width:"450px",data:{order:t,availableStatuses:e},disableClose:!0}).afterClosed().subscribe(l=>{if(l&&l.newStatus){console.log("Dialog result:",l);let c={newStatus:l.newStatus,reason:l.reason||"",proofOfDeliveryImageUrl:"",shippingCostPaymentMethod:"",collectionPaymentMethod:""};l.newStatus==="ENTREGADO"&&(l.proofOfDeliveryImageUrl&&(c.proofOfDeliveryImageUrl=l.proofOfDeliveryImageUrl),l.shippingCostPaymentMethod&&(c.shippingCostPaymentMethod=l.shippingCostPaymentMethod),l.collectionPaymentMethod&&(c.collectionPaymentMethod=l.collectionPaymentMethod)),console.log("updatePayload",c),this.statusChanged.emit(ve({orderId:t.id},c))}else console.log("Cambio de estado cancelado o sin selecci\xF3n.")})}getAvailableStatuses(t){switch(t.status){case"REGISTRADO":return["RECOGIDO","CANCELADO"];case"RECOGIDO":return["EN ALMACEN","CANCELADO"];case"EN ALMACEN":return["EN TRANSITO","CANCELADO"];case"EN TRANSITO":case"EN TRANSITO":return["ENTREGADO","CANCELADO","RECHAZADO","REPROGRAMADO"];case"REPROGRAMADO":return["EN TRANSITO","CANCELADO"];default:return[]}}openReportIssueModal(t){console.log(`Open modal to report issue for order: ${t.code}`)}onViewOrderDetails(t){this.viewDetailsClicked.emit(t),this.dialog.open(ai,{width:"750px",maxWidth:"90vw",maxHeight:"90vh",data:{order:t},panelClass:"order-detail-dialog-responsive",autoFocus:"dialog"})}onUploadProof(t){console.log("Upload proof for order:",t.code),this.snackBar.open('Funci\xF3n "Subir Prueba" no implementada.',"OK",{duration:2e3})}onReschedule(t){console.log("Reschedule order:",t.code),this.snackBar.open('Funci\xF3n "Reprogramar" no implementada.',"OK",{duration:2e3})}openAssignDriverModal(t){console.log(`Open modal to assign driver for order: ${t.code}`),this.dialog.open(li,{width:"550px",data:{order:t,currentDriverId:t.assigned_driver?.uid},disableClose:!0}).afterClosed().subscribe(i=>{i&&i.selectedDriver?(console.log("Driver selected from dialog:",t.id,i.selectedDriver),this.motorizedChanged.emit({orderId:t.id,motorizedId:i.selectedDriver.id})):console.log("Assign driver cancelled or no driver selected.")})}openRescheduleOrderModal(t){console.log(`Open modal to reschedule order: ${t.code}`);let e=new Date;e.setDate(e.getDate()+1),this.dialog.open(di,{width:"500px",data:{order:t,minDate:e},disableClose:!0}).afterClosed().subscribe(l=>{l&&l.newDeliveryDate?(console.log("Reschedule details from dialog:",l),this.rescheduleChanged.emit({orderId:t.id,newDate:l.newDeliveryDate,reason:l.reason})):console.log("Reschedule cancelled or no new date selected.")})}isAdminOrDriver(){let t=this.appStore.currentUser()?.role;return t==="ADMINISTRADOR"||t==="MOTORIZADO"}isAdminOrReceptionist(){let t=this.appStore.currentUser()?.role;return t==="ADMINISTRADOR"||t==="RECEPCIONISTA"}isAdminUser(){return this.appStore.currentUser()?.role==="ADMINISTRADOR"}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-order-table"]],viewQuery:function(e,i){if(e&1&&(ge(Zt,5),ge(Jt,5)),e&2){let l;ee(l=te())&&(i.paginator=l.first),ee(l=te())&&(i.sort=l.first)}},inputs:{orders:"orders",isLoading:"isLoading",totalCount:"totalCount",pageSize:"pageSize",pageIndex:"pageIndex"},outputs:{pageChanged:"pageChanged",sortChanged:"sortChanged",statusChanged:"statusChanged",motorizedChanged:"motorizedChanged",rescheduleChanged:"rescheduleChanged",viewPdfClicked:"viewPdfClicked",viewDetailsClicked:"viewDetailsClicked"},features:[Gi],decls:31,vars:10,consts:[["orderActionMenu","matMenu"],[1,"table-wrapper","mat-elevation-z4"],["class","spinner-overlay",4,"ngIf"],["mat-table","","matSort","",1,"orders-table",3,"matSortChange","dataSource"],["matColumnDef","code"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","code-cell",4,"matCellDef"],["matColumnDef","shipment_type"],["mat-cell","",4,"matCellDef"],["matColumnDef","recipient_name"],["mat-cell","","class","truncate-texts",3,"matTooltip",4,"matCellDef"],["matColumnDef","status"],["mat-header-cell","","mat-sort-header","","class","status-column-header",4,"matHeaderCellDef"],["matColumnDef","delivery_district_name"],["matColumnDef","delivery_date"],["matColumnDef","amount_to_collect_at_delivery"],["mat-header-cell","","mat-sort-header","","class","align-right",4,"matHeaderCellDef"],["mat-cell","","class","align-right amount-cell",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","actions-column-header",4,"matHeaderCellDef"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","","class","header-row-sticky",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","data-row",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Seleccione p\xE1gina de pedidos",3,"page","length","pageSize","pageIndex","pageSizeOptions"],[1,"spinner-overlay"],["mode","indeterminate","diameter","60"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"code-cell"],["matTooltip","Ver detalles del pedido",3,"click"],["mat-cell",""],["mat-cell","",1,"truncate-texts",3,"matTooltip"],["mat-header-cell","","mat-sort-header","",1,"status-column-header"],[1,"status-badge",3,"ngClass"],["mat-header-cell","","mat-sort-header","",1,"align-right"],["mat-cell","",1,"align-right","amount-cell"],["mat-header-cell","",1,"actions-column-header"],["mat-cell","",1,"actions-cell"],["mat-icon-button","","aria-label","M\xE1s acciones del pedido",1,"action-icon-neutral",3,"matMenuTriggerFor"],["xPosition","before"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-header-row","",1,"header-row-sticky"],["mat-row","",1,"data-row",3,"ngClass"],[1,"mat-row"],[1,"no-data-cell"]],template:function(e,i){e&1&&(n(0,"div",1),m(1,Xo,2,0,"div",2),n(2,"table",3),_("matSortChange",function(c){return i.sortChanged.emit(c)}),I(3,4),m(4,Ko,2,0,"th",5)(5,Zo,3,1,"td",6),T(),I(6,7),m(7,Jo,2,0,"th",5)(8,Yo,2,1,"td",8),T(),I(9,9),m(10,en,2,0,"th",5)(11,tn,2,2,"td",10),T(),I(12,11),m(13,rn,2,0,"th",12)(14,on,3,2,"td",8),T(),I(15,13),m(16,nn,2,0,"th",5)(17,an,2,1,"td",8),T(),I(18,14),m(19,ln,2,0,"th",5)(20,dn,3,4,"td",8),T(),I(21,15),m(22,sn,2,0,"th",16)(23,cn,3,6,"td",17),T(),I(24,18),m(25,mn,2,0,"th",19)(26,_n,24,4,"td",20),T(),m(27,fn,1,0,"tr",21)(28,hn,1,2,"tr",22)(29,vn,3,1,"tr",23),r(),n(30,"mat-paginator",24),_("page",function(c){return i.pageChanged.emit(c)}),r()()),e&2&&(d(),s("ngIf",i.isLoading),d(),s("dataSource",i.dataSource),d(25),s("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),d(),s("matRowDefColumns",i.displayedColumns),d(2),s("length",i.totalCount)("pageSize",i.pageSize)("pageIndex",i.pageIndex)("pageSizeOptions",tt(9,Qo)))},dependencies:[S,Ue,R,nt,q,Kt,zt,Ut,Ht,$t,Gt,Qt,qt,jt,Wt,Xt,Rr,Vr,Zt,Lr,Jt,Br,re,ie,D,ce,w,V,He,je,Rt,Ft,Tt,At,me,at,we],styles:["[_nghost-%COMP%]{display:block}.table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;border-radius:12px;background-color:var(--sys-surface);color:var(--sys-on-surface);margin-top:20px;box-shadow:0 4px 20px #00000014;transition:box-shadow .3s ease-in-out}.table-wrapper[_ngcontent-%COMP%]:hover{box-shadow:0 6px 25px #0000001f}.spinner-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:rgba(var(--sys-surface),.85);display:flex;justify-content:center;align-items:center;z-index:100;border-radius:12px}.orders-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th.mat-header-cell[_ngcontent-%COMP%]{font-weight:600;color:var(--sys-on-surface-variant);background-color:var(--sys-surface-container-low);padding:14px 18px;border-bottom:1px solid var(--sys-outline-variant);text-transform:uppercase;font-size:.8rem;letter-spacing:.5px}td.mat-cell[_ngcontent-%COMP%]{padding:12px 18px;border-bottom:1px solid var(--sys-outline-variant);color:var(--sys-on-surface-variant);font-size:.9rem}.header-row-sticky[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;background-color:var(--sys-surface-container-low)}.data-row[_ngcontent-%COMP%]{transition:background-color .2s ease-in-out}.data-row[_ngcontent-%COMP%]:hover{background-color:var(--sys-surface-container-highest);cursor:pointer}.highlight-row[_ngcontent-%COMP%]{background-color:var(--sys-primary-container)!important;font-weight:500}.align-right[_ngcontent-%COMP%]{text-align:right;justify-content:flex-end}.amount-cell[_ngcontent-%COMP%]{font-weight:500}.actions-column-header[_ngcontent-%COMP%]{text-align:center!important}.actions-cell[_ngcontent-%COMP%]{text-align:center;white-space:nowrap}.actions-cell[_ngcontent-%COMP%]   button.mat-icon-button[_ngcontent-%COMP%]{margin:0 2px;color:var(--sys-on-surface-variant);transition:color .2s ease}.actions-cell[_ngcontent-%COMP%]   button.mat-icon-button[_ngcontent-%COMP%]:hover{color:var(--sys-primary)}.action-icon-delivered[_ngcontent-%COMP%]{color:#4caf50}.action-icon-delivered[_ngcontent-%COMP%]:hover{color:#388e3c}.action-icon-neutral[_ngcontent-%COMP%]{color:var(--sys-on-surface-variant)}.action-icon-neutral[_ngcontent-%COMP%]:hover{color:var(--sys-on-surface)}.no-data-cell[_ngcontent-%COMP%]{text-align:center;padding:50px;font-style:italic;color:var(--sys-on-surface-variant);font-size:1rem}.mat-mdc-paginator[_ngcontent-%COMP%]{background-color:var(--sys-surface-container-low);border-bottom-left-radius:12px;border-bottom-right-radius:12px;color:var(--sys-on-surface-variant);border-top:1px solid var(--sys-outline-variant);padding:8px 0}.truncate-text[_ngcontent-%COMP%]{max-width:180px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:inline-block;vertical-align:middle}.code-cell[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3f51b5;text-decoration:none;font-weight:500}.code-cell[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.status-badge[_ngcontent-%COMP%]{padding:5px 12px;border-radius:16px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;display:inline-flex;align-items:center;line-height:1}.status-registrado[_ngcontent-%COMP%]{background-color:var(--status-registrado-bg);color:var(--status-registrado-color)}.status-recogido[_ngcontent-%COMP%]{background-color:var(--status-recogido-bg);color:var(--status-recogido-color)}.status-en-almacen[_ngcontent-%COMP%]{background-color:var(--status-en-almacen-bg);color:var(--status-en-almacen-color)}.status-en-transito[_ngcontent-%COMP%]{background-color:var(--status-en-transito-bg);color:var(--status-en-transito-color)}.status-entregado[_ngcontent-%COMP%]{background-color:var(--status-entregado-bg);color:var(--status-entregado-color)}.status-no-entregado[_ngcontent-%COMP%]{background-color:var(--status-no-entregado-bg);color:var(--status-no-entregado-color)}.status-cancelado[_ngcontent-%COMP%]{background-color:var(--status-cancelado-bg);color:var(--status-cancelado-color)}.status-rechazado[_ngcontent-%COMP%]{background-color:var(--status-rechazado-bg);color:var(--status-rechazado-color)}.status-reprogramado[_ngcontent-%COMP%]{background-color:var(--status-reprogramado-bg);color:var(--status-reprogramado-color)}@media (max-width: 768px){th.mat-header-cell[_ngcontent-%COMP%], td.mat-cell[_ngcontent-%COMP%]{padding:8px 12px;font-size:.75rem}}"]})};var Cn=(o,t)=>({"success-message":o,"error-message":t});function xn(o,t){if(o&1&&(n(0,"span",17),a(1),r()),o&2){let e=f();d(),P(e.fileName)}}function yn(o,t){if(o&1&&(n(0,"div",18)(1,"p"),a(2),r(),b(3,"mat-progress-bar",19),r()),o&2){let e=f();d(2),p("Importando archivo... ",e.uploadProgress,"%"),d(),s("value",e.uploadProgress)}}function On(o,t){if(o&1&&(n(0,"div",26)(1,"mat-icon",27),a(2,"error_outline"),r(),n(3,"div",28),a(4),r()()),o&2){let e=t.$implicit;d(4),tr(" Fila ",e.row,": ",e.message," ")}}function Mn(o,t){if(o&1&&(n(0,"div",23)(1,"h4"),a(2,"Detalles de Errores:"),r(),n(3,"mat-list",24),m(4,On,5,2,"div",25),r()()),o&2){let e=f(2);d(4),s("ngForOf",e.importResult.errors)}}function En(o,t){if(o&1&&(n(0,"div",20)(1,"h3",21),a(2),r(),m(3,Mn,5,1,"div",22),r()),o&2){let e=f();d(),s("ngClass",rr(3,Cn,e.importResult.success,!e.importResult.success)),d(),p(" ",e.importResult.message," "),d(),s("ngIf",e.importResult.errors&&e.importResult.errors.length>0)}}var Sn={"TIPO DE ENVIO":"type_order_transfer_to_warehouse","NOMBRE DEL DESTINATARIO":"recipient_name","TELEFONO DESTINATARIO 9 DIGITOS":"recipient_phone",DISTRITO:"delivery_district_name","DIRECCION DE ENTREGA":"delivery_address","FECHA DE ENTREGA (DIA/MES/A\xD1O)":"delivery_date","DETALLE DEL PRODUCTO":"item_description","MONTO A COBRAR":"amount_to_collect_at_delivery","FORMA DE PAGO":"payment_method_for_collection",OBSERVACION:"observations"},yc=Object.keys(Sn),ci=class o{importCompleted=new k;selectedFile=null;fileName=null;isUploading=!1;uploadProgress=0;importResult=null;orderService=g(j);snackBar=g(Me);dialogRef=g(Ee);settingsService=g(Pr);destroy$=new U;enlace=null;constructor(){}ngOnInit(){this.settingsService.loadSettings().pipe(L(this.destroy$)).subscribe({next:t=>{t.length&&(this.enlace=t[0].excel_import_template_url)},error:t=>{console.log("err",t)}})}onFileSelected(t){let i=t.currentTarget.files;i&&i.length>0?(this.selectedFile=i[0],this.fileName=this.selectedFile.name,this.importResult=null,console.log("File selected:",this.selectedFile)):(this.selectedFile=null,this.fileName=null)}downloadTemplate(){return this.snackBar.open("Plantilla con validaci\xF3n descargada.","OK",{duration:2e3}),this.enlace||""}processImport(){return Ve(this,null,function*(){if(!this.selectedFile){this.snackBar.open("Por favor, selecciona un archivo Excel.","OK",{duration:3e3,panelClass:["warn-snackbar"]});return}this.isUploading=!0,this.uploadProgress=0,this.importResult=null;let t=setInterval(()=>{this.uploadProgress<90&&(this.uploadProgress+=10)},200);try{let e=yield this.readFileAndParseToJson(this.selectedFile);if(e=e.filter(i=>i.CARGA==="CARGAR"),console.log("Parsed Excel to JSON:",e),e.length===0)throw new Error("El archivo Excel no contiene datos (despu\xE9s de las cabeceras) o el formato es incorrecto.");this.orderService.importOrdersFromParsedJson(e).subscribe({next:i=>{clearInterval(t),this.uploadProgress=100,this.importResult=i,i.success&&i.importedCount&&i.importedCount>0?(this.snackBar.open(i.message,"OK",{duration:4e3,panelClass:["success-snackbar"]}),this.importCompleted.emit(!0)):(this.snackBar.open(i.message||"Algunos pedidos no pudieron ser importados o hubo errores.","OK",{duration:6e3,panelClass:["warn-snackbar"]}),i.errors&&i.errors.length>0&&console.warn("Import errors from backend:",i.errors)),this.isUploading=!1},error:i=>{clearInterval(t),this.isUploading=!1,this.uploadProgress=0,this.importResult={success:!1,message:i.message||"Error en el servidor durante la importaci\xF3n."},this.snackBar.open(this.importResult.message,"OK",{duration:3e3,panelClass:["error-snackbar"]}),console.error("Error importing orders:",i)}})}catch(e){clearInterval(t),this.isUploading=!1,this.uploadProgress=0,this.importResult={success:!1,message:e.message||"Error al procesar el archivo Excel."},this.snackBar.open(this.importResult.message,"OK",{duration:3e3,panelClass:["error-snackbar"]}),console.error("Error processing file:",e)}})}readFileAndParseToJson(t){return new Promise((e,i)=>{if(!t){i(new Error("No se proporcion\xF3 ning\xFAn archivo."));return}let l=new FileReader;l.onload=c=>{try{let u=c.target.result,A=Kr(u,{type:"binary",cellDates:!0}),y=A.SheetNames[0];if(!y){i(new Error("El archivo Excel no contiene hojas."));return}let J=A.Sheets[y],B=Yt.sheet_to_json(J,{raw:!1,defval:null});e(B.filter(he=>Object.values(he).some(Xe=>Xe!==null&&Xe!=="")))}catch(u){console.error("Error al leer el contenido de la hoja de Excel:",u),i(new Error("No se pudo leer el contenido de la hoja de Excel. Formato incorrecto."))}},l.onerror=c=>{console.error("Error en FileReader:",c),i(new Error("Ocurri\xF3 un error al intentar leer el archivo."))},l.readAsBinaryString(t)})}closeDialog(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-order-import-modal"]],outputs:{importCompleted:"importCompleted"},decls:107,vars:8,consts:[["fileInput",""],[1,"import-modal-container"],["mat-dialog-title",""],[1,"mat-typography"],[1,"instructions"],[2,"margin-bottom","10px"],["mat-stroked-button","","color","accent","target","_blank","matTooltip","Descargar la plantilla en formato .xlsx (.xls tambi\xE9n soportado)",1,"template-button",3,"href"],[1,"column-descriptions"],[1,"file-input-container"],["mat-raised-button","","color","primary",3,"click","disabled"],["hidden","","type","file","accept",".xlsx, .xls",3,"change"],["class","file-name-display",4,"ngIf"],["class","upload-progress-container",4,"ngIf"],["class","import-results",4,"ngIf"],["align","end"],["mat-stroked-button","",3,"click","disabled"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"file-name-display"],[1,"upload-progress-container"],["mode","determinate",3,"value"],[1,"import-results"],[3,"ngClass"],["class","error-details",4,"ngIf"],[1,"error-details"],["dense",""],["class","error-item",4,"ngFor","ngForOf"],[1,"error-item"],["matListItemIcon","","color","warn"],[2,"overflow-wrap","break-word !important"]],template:function(e,i){if(e&1){let l=x();n(0,"div",1)(1,"h2",2),a(2,"Importar Pedidos desde Excel"),r(),n(3,"mat-dialog-content",3)(4,"p",4),a(5," Sigue estos pasos para importar tus pedidos de forma masiva: "),r(),n(6,"ol")(7,"li")(8,"div",5),a(9," Descarga la plantilla de Excel para asegurar el formato correcto de los datos. "),r(),n(10,"a",6)(11,"mat-icon"),a(12,"cloud_download"),r(),a(13," Descargar Plantilla "),r()(),n(14,"li"),a(15," Completa la plantilla con la informaci\xF3n de tus pedidos. Aseg\xFArate de que el orden y nombre de las columnas coincidan con la plantilla. "),r(),n(16,"li")(17,"strong"),a(18,"Descripci\xF3n de las Columnas Esperadas en la Plantilla:"),r(),n(19,"ul",7)(20,"li")(21,"strong"),a(22,"TIPO DE ENVIO:"),r(),a(23," Indica la modalidad del env\xEDo. Valores comunes: "),n(24,"code"),a(25,"CONTRAENTREGA"),r(),a(26,", "),n(27,"code"),a(28,"SOLO-ENTREGA-NO-COBRAR"),r(),a(29,". *(Esta columna podr\xEDa tener una lista desplegable en la plantilla).* "),r(),n(30,"li")(31,"strong"),a(32,"NOMBRE DEL DESTINATARIO:"),r(),a(33," Nombre completo de la persona que recibir\xE1 el pedido. "),r(),n(34,"li")(35,"strong"),a(36,"TELEFONO DESTINATARIO 9 DIGITOS:"),r(),a(37," N\xFAmero de celular del destinatario, debe contener exactamente 9 d\xEDgitos. "),r(),n(38,"li")(39,"strong"),a(40,"DISTRITO (SELECCIONE SOLO DEL LISTADO):"),r(),a(41," El distrito de entrega. Es crucial seleccionar uno de los distritos v\xE1lidos que se mostrar\xE1n en la lista desplegable de esta columna en la plantilla. "),r(),n(42,"li")(43,"strong"),a(44,"DIRECCION DE ENTREGA:"),r(),a(45," Direcci\xF3n completa y detallada donde se entregar\xE1 el pedido (calle, n\xFAmero, urbanizaci\xF3n, referencia, etc.). "),r(),n(46,"li")(47,"strong"),a(48,"FECHA DE ENTREGA (DIA/MES/A\xD1O):"),r(),a(49," Fecha programada para la entrega del pedido. Utiliza el formato DD/MM/AAAA (ej. 25/12/2023). "),r(),n(50,"li")(51,"strong"),a(52,"DETALLE DEL PRODUCTO:"),r(),a(53,' Descripci\xF3n breve pero clara de lo que se est\xE1 enviando (ej. "Ropa y Zapatillas", "Documentos Urgentes", "Regalo Sorpresa"). '),r(),n(54,"li")(55,"strong"),a(56,"MONTO A COBRAR:"),r(),a(57," Si el env\xEDo es "),n(58,"code"),a(59,"CONTRAENTREGA"),r(),a(60,", indica aqu\xED el monto exacto que el courier debe cobrar al destinatario. Si es "),n(61,"code"),a(62,"SOLO-ENTREGA-NO-COBRAR"),r(),a(63,", este campo puede dejarse vac\xEDo o con 0. "),r(),n(64,"li")(65,"strong"),a(66,"FORMA DE PAGO:"),r(),a(67,' Indica c\xF3mo se realizar\xE1 el pago del "MONTO A COBRAR" si aplica. Ejemplos: '),n(68,"code"),a(69,"EFECTIVO"),r(),a(70,", "),n(71,"code"),a(72,"YAPE"),r(),a(73,", "),n(74,"code"),a(75,"PLIN"),r(),a(76,", "),n(77,"code"),a(78,"TRANSFERENCIA"),r(),a(79,". Si es no se realizar\xE1 cobro, puedes indicarlo con la opcion "),n(80,"code"),a(81,"NO COBRAR"),r()(),n(82,"li")(83,"strong"),a(84,"OBSERVACION:"),r(),a(85,' Cualquier nota o indicaci\xF3n adicional importante para el courier o para la gesti\xF3n del pedido (ej. "Entregar solo al titular", "Llamar antes de llegar", "Paquete fr\xE1gil"). '),r()()(),n(86,"li"),a(87,"Guarda el archivo en formato .xlsx o .xls."),r(),n(88,"li"),a(89,'Selecciona el archivo completo y haz clic en "Importar Pedidos".'),r()(),n(90,"div",8)(91,"button",9),_("click",function(){h(l);let u=z(96);return v(u.click())}),n(92,"mat-icon"),a(93,"attach_file"),r(),a(94," Seleccionar Archivo Excel "),r(),n(95,"input",10,0),_("change",function(u){return h(l),v(i.onFileSelected(u))}),r(),m(97,xn,2,1,"span",11),r(),m(98,yn,4,2,"div",12)(99,En,4,6,"div",13),r(),n(100,"mat-dialog-actions",14)(101,"button",15),_("click",function(){return h(l),v(i.closeDialog())}),a(102," Cancelar "),r(),n(103,"button",16),_("click",function(){return h(l),v(i.processImport())}),n(104,"mat-icon"),a(105,"upload"),r(),a(106),r()()()}e&2&&(d(10),s("href",i.enlace,yt),d(81),s("disabled",i.isUploading),d(6),s("ngIf",i.fileName),d(),s("ngIf",i.isUploading),d(),s("ngIf",i.importResult),d(2),s("disabled",i.isUploading),d(2),s("disabled",!i.selectedFile||i.isUploading),d(3),p(" ",i.isUploading?"Importando...":"Importar Pedidos"," "))},dependencies:[S,Ue,Ce,R,me,Se,ke,De,D,Or,N,w,V,Ar,Fr,Vt,Tr,Ir,He,je],styles:[".import-modal-container[_ngcontent-%COMP%]{width:100%;max-width:650px}mat-dialog-content[_ngcontent-%COMP%]{padding-top:0;line-height:1.6;font-size:.95em;max-height:70vh;overflow-y:auto}.instructions[_ngcontent-%COMP%]{margin-bottom:16px;font-weight:500}ol[_ngcontent-%COMP%]{padding-left:20px;margin-bottom:24px}ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:12px}.template-button[_ngcontent-%COMP%]{margin-left:8px;vertical-align:middle;transform:translateY(-2px)}.file-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px;padding:16px;border:1px dashed #ccc;border-radius:4px;background-color:#f9f9f9}@media (max-width: 500px){.file-input-container[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.file-input-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}}.file-name-display[_ngcontent-%COMP%]{font-style:italic;color:#555;word-break:break-all}.upload-progress-container[_ngcontent-%COMP%]{margin:20px 0}.upload-progress-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:8px;font-weight:500}.import-results[_ngcontent-%COMP%]{margin-top:24px;padding:16px;border-radius:4px;border:1px solid #ddd}.import-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:12px;font-weight:600}.success-message[_ngcontent-%COMP%]{color:#2e7d32;border-left:4px solid #2e7d32;padding-left:12px}.error-message[_ngcontent-%COMP%]{color:#c62828;border-left:4px solid #c62828;padding-left:12px}.error-details[_ngcontent-%COMP%]{margin-top:16px}.error-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:8px;font-size:1em;font-weight:500}.error-item[_ngcontent-%COMP%]{padding-bottom:8px!important;border-bottom:1px dotted #eee}.error-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.error-item[_ngcontent-%COMP%]   .mat-mdc-list-item-line[_ngcontent-%COMP%]{white-space:normal!important}.error-data-preview[_ngcontent-%COMP%]{font-size:.8em;color:#757575;display:block;margin-top:4px}mat-dialog-actions[_ngcontent-%COMP%]{padding:8px 24px 16px!important}@media (max-height: 600px){mat-dialog-content[_ngcontent-%COMP%]{max-height:55vh}}ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.column-descriptions[_ngcontent-%COMP%]{list-style-type:disc;margin-top:8px;margin-bottom:16px;font-size:.9em;background-color:#f9f9f9;padding:10px 15px 10px 30px;border-radius:4px}.column-descriptions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;line-height:1.5}.column-descriptions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#3f51b5}.column-descriptions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#e0e0e0;padding:1px 4px;border-radius:3px;font-family:monospace}"]})};var Dn="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-TFG-8",kn=".xlsx",mi=class o{constructor(){}exportAsExcelFile(t,e,i="Sheet1"){if(!t||t.length===0){console.warn("No data provided for Excel export.");return}let l=Yt.json_to_sheet(t),c={Sheets:{[i]:l},SheetNames:[i]},u=Zr(c,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(u,e)}saveAsExcelFile(t,e){let i=new Blob([t],{type:Dn}),l=window.URL.createObjectURL(i),c=document.createElement("a");c.href=l,c.download=`${e}${kn}`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=et({token:o,factory:o.\u0275fac,providedIn:"root"})};var pi=class o{orderService=g(j);router=g(Mt);snackBar=g(Me);dialog=g(Nt);excelExportService=g(mi);datePipe=g(q);orders=[];isLoading=!1;totalOrderCount=0;currentPageIndex=0;currentPageSize=10;currentSortField="registration_date";currentSortDirection="desc";filterCriteriaSubject=new Ri({});destroy$=new U;constructor(){}ngOnInit(){this.filterCriteriaSubject.pipe(L(this.destroy$),be(()=>this.currentPageIndex=0)).subscribe(t=>{this.fetchOrders()})}getAllFilteredOrdersForExport(){return Ve(this,null,function*(){try{let t=this.filterCriteriaSubject.value;return(yield Ni(this.orderService.getOrders2(t,this.currentSortField,this.currentSortDirection).pipe(L(this.destroy$))))||[]}catch(t){return console.error("Error fetching all filtered orders for export:",t),this.snackBar.open("Failed to fetch data for export.","Close",{duration:3e3,panelClass:["error-snackbar"]}),[]}})}exportDataToExcel(){return Ve(this,null,function*(){this.isLoading=!0,this.snackBar.open("Preparing Excel export, this may take a moment...","",{duration:0});try{let t=yield this.getAllFilteredOrdersForExport();if(t&&t.length>0){let e=t.map(i=>({"TIPO DE ENVIO":i.shipment_type,"NOMBRE DEL DESTINATARIO":i.recipient_name,"TELEFONO DESTINATARIO 9 DIGITOS":i.recipient_phone,DISTRITO:i.delivery_district_name,"DIRECCION DE ENTREGA":i.delivery_address,"FECHA DE REGISTRO":i.createdAt?this.datePipe.transform(i.createdAt,"dd/MM/yyyy"):"N/A","FECHA DE ENTREGA":i.delivery_date,"DETALLE DEL PRODUCTO":i.item_description,"COSTO DE ENVIO":i.shipping_cost,"MONTO A COBRAR":i.amount_to_collect_at_delivery,"FORMA DE PAGO":i.payment_method_for_collection,OBSERVACION:i.observations||""}));this.excelExportService.exportAsExcelFile(e,"Listado_Pedidos_Filtrados","Pedidos"),this.snackBar.dismiss(),this.snackBar.open("Excel file exported successfully!","OK",{duration:3500,panelClass:["success-snackbar"]})}else this.snackBar.dismiss(),this.snackBar.open("No data available to export with current filters.","OK",{duration:3e3})}catch(t){console.error("Error during Excel export process:",t),this.snackBar.dismiss(),this.snackBar.open("An error occurred during Excel export.","Close",{duration:3e3,panelClass:["error-snackbar"]})}finally{this.isLoading=!1}})}fetchOrders(){this.isLoading=!0;let t=this.filterCriteriaSubject.value;this.orderService.getOrders(t,this.currentPageIndex+1,this.currentPageSize,this.currentSortField,this.currentSortDirection).pipe(L(this.destroy$),G(e=>(this.snackBar.open(e.message||"Failed to load orders.","Close",{duration:5e3,panelClass:["error-snackbar"]}),this.isLoading=!1,[]))).subscribe(e=>{this.orders=e.items,this.totalOrderCount=e.total_count||0,this.isLoading=!1,console.log("Orders fetched:",e)})}openImportModal(){let t=this.dialog.open(ci,{width:"90%",maxWidth:"700px",autoFocus:!1});t.componentInstance.importCompleted.subscribe(e=>{e&&(console.log("Import completed, reloading orders..."),this.fetchOrders())}),t.afterClosed().subscribe(e=>{console.log("The import dialog was closed",e)})}handleStatusChanged(t){this.isLoading=!0,console.log("OrderListPage: Status change requested",t),this.orderService.updateOrderStatus(t.orderId,t.newStatus,t.reason||"",t.proofOfDeliveryImageUrl,t.shippingCostPaymentMethod,t.collectionPaymentMethod).subscribe({next:e=>{this.snackBar.open(`Estado del pedido ${e.code} actualizado a ${t.newStatus}.`,"OK",{duration:3e3,panelClass:["success-snackbar"]}),this.fetchOrders()},error:e=>{this.snackBar.open(`Error al actualizar estado: ${e.message||"Intente de nuevo"}`,"Cerrar",{duration:5e3,panelClass:["error-snackbar"]}),this.isLoading=!1},complete:()=>{this.isLoading=!1}})}handleMotorizedChanged(t){console.log("orderId",t.orderId),console.log("motorizedId",t.motorizedId),this.orderService.assignDriverToOrder(t.orderId,t.motorizedId).subscribe({next:e=>{this.snackBar.open(`Motorizado ${e.assigned_driver?.username} asignado al pedido ${e.code}.`,"OK",{duration:3e3,panelClass:["success-snackbar"]}),this.fetchOrders()},error:e=>{this.snackBar.open(`Error al asignar motorizado: ${e.message||"Intente de nuevo"}`,"Cerrar",{duration:5e3,panelClass:["error-snackbar"]})}})}handleRescheduleChanged(t){let e=new Date(t.newDate).toISOString();this.orderService.rescheduleOrder(t.orderId,e||"",t.reason).subscribe({next:i=>{this.snackBar.open(`Pedido ${i.code} reprogramado para ${this.datePipe.transform(i.delivery_date,"dd/MM/yyyy")}.`,"OK",{duration:3500,panelClass:["success-snackbar"]}),this.fetchOrders()},error:i=>{this.snackBar.open(`Error al reprogramar pedido: ${i.message||"Intente de nuevo"}`,"Cerrar",{duration:5e3,panelClass:["error-snackbar"]})}})}onFiltersChanged(t){console.log("OrderListPage: Filters changed",t),this.filterCriteriaSubject.next(t)}onPageChanged(t){console.log("OrderListPage: Page changed",t),this.currentPageIndex=t.pageIndex,this.currentPageSize=t.pageSize,this.fetchOrders()}onSortChanged(t){console.log("OrderListPage: Sort changed",t),this.currentSortField=t.active,this.currentSortDirection=t.direction,this.currentPageIndex=0,this.fetchOrders()}handleMassiveActions(t){console.log("Massive action selected:",t),this.snackBar.open(`Action: ${t} not implemented yet.`,"OK",{duration:3e3})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-order-list-page"]],decls:25,vars:6,consts:[["massiveActionsMenu","matMenu"],[1,"page-content-wrapper"],[1,"page-title-bar"],[1,"page-title"],[1,"breadcrumbs"],["routerLink","/"],[3,"filtersChanged"],[1,"table-controls-bar"],[1,"records-info"],[1,"actions-group"],["mat-stroked-button","","color","primary",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[3,"pageChanged","sortChanged","statusChanged","motorizedChanged","rescheduleChanged","orders","isLoading","totalCount","pageSize","pageIndex"]],template:function(e,i){if(e&1){let l=x();n(0,"div",1)(1,"div",2)(2,"h1",3),a(3,"Listado de pedidos Lima"),r(),n(4,"div",4)(5,"a",5),a(6,"Inicio"),r(),a(7," / "),n(8,"span"),a(9,"Listado de pedidos Lima"),r()()(),n(10,"app-order-filters",6),_("filtersChanged",function(u){return h(l),v(i.onFiltersChanged(u))}),r(),n(11,"div",7),b(12,"div",8),n(13,"div",9)(14,"button",10),a(15," Acciones Masivas "),n(16,"mat-icon"),a(17,"arrow_drop_down"),r()(),n(18,"mat-menu",null,0)(20,"button",11),_("click",function(){return h(l),v(i.exportDataToExcel())}),a(21," Exportar a Excel "),r(),n(22,"button",11),_("click",function(){return h(l),v(i.openImportModal())}),a(23," Importar desde Excel "),r()()()(),n(24,"app-order-table",12),_("pageChanged",function(u){return h(l),v(i.onPageChanged(u))})("sortChanged",function(u){return h(l),v(i.onSortChanged(u))})("statusChanged",function(u){return h(l),v(i.handleStatusChanged(u))})("motorizedChanged",function(u){return h(l),v(i.handleMotorizedChanged(u))})("rescheduleChanged",function(u){return h(l),v(i.handleRescheduleChanged(u))}),r()()}if(e&2){let l=z(19);d(14),s("matMenuTriggerFor",l),d(10),s("orders",i.orders)("isLoading",i.isLoading)("totalCount",i.totalOrderCount)("pageSize",i.currentPageSize)("pageIndex",i.currentPageIndex)}},dependencies:[S,Et,nr,ei,si,at,D,N,w,V,Rt,Ft,Tt,At],styles:[".page-content-wrapper[_ngcontent-%COMP%]{padding:20px 24px;background-color:var(--sys-surface-container-lowest);color:var(--sys-on-surface);min-height:calc(100vh - 64px)}.page-title-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.page-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:var(--sys-on-surface);margin:0}.breadcrumbs[_ngcontent-%COMP%]{font-size:14px;color:var(--sys-on-surface-variant)}.breadcrumbs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--sys-primary);text-decoration:none}.breadcrumbs[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumbs[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px}.table-controls-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;background-color:var(--sys-surface-container-low);border-radius:8px;padding:8px 16px}.records-info[_ngcontent-%COMP%]{font-size:.9em;color:#555}.actions-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.orders-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:20px}@media (min-width: 768px){.orders-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}"]})};var Pn=["input"],wn=["formField"],In=["*"],ui=class{source;value;constructor(t,e){this.source=t,this.value=e}},Tn={provide:ur,useExisting:Li(()=>wi),multi:!0},eo=new bi("MatRadioGroup"),Fn=new bi("mat-radio-default-options",{providedIn:"root",factory:An});function An(){return{color:"accent",disabledInteractive:!1}}var wi=(()=>{class o{_changeDetector=g(Ze);_value=null;_name=g(Di).getId("mat-radio-group-");_selected=null;_isInitialized=!1;_labelPosition="after";_disabled=!1;_required=!1;_buttonChanges;_controlValueAccessorChangeFn=()=>{};onTouched=()=>{};change=new k;_radios;color;get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition=e==="before"?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=e,this._markRadiosForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markRadiosForCheck()}_disabledInteractive=!1;constructor(){}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(e=>e===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){let e=this._selected!==null&&this._selected.value===this._value;this._radios&&!e&&(this._selected=null,this._radios.forEach(i=>{i.checked=this.value===i.value,i.checked&&(this._selected=i)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new ui(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}static \u0275fac=function(i){return new(i||o)};static \u0275dir=Xi({type:o,selectors:[["mat-radio-group"]],contentQueries:function(i,l,c){if(i&1&&er(c,gi,5),i&2){let u;ee(u=te())&&(l._radios=u)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",Ae],required:[2,"required","required",Ae],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ae]},outputs:{change:"change"},exportAs:["matRadioGroup"],features:[ze([Tn,{provide:eo,useExisting:o}])]})}return o})(),gi=(()=>{class o{_elementRef=g(Ci);_changeDetector=g(Ze);_focusMonitor=g(ar);_radioDispatcher=g(wr);_defaultOptions=g(Fn,{optional:!0});_ngZone=g(qi);_renderer=g(Qi);_uniqueId=g(Di).getId("mat-radio-");_cleanupClick;id=this._uniqueId;name;ariaLabel;ariaLabelledby;ariaDescribedby;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked!==e&&(this._checked=e,e&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!e&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),e&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.radioGroup!==null&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}_labelPosition;get disabled(){return this._disabled||this.radioGroup!==null&&this.radioGroup.disabled}set disabled(e){this._setDisabled(e)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=e}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._defaultOptions&&this._defaultOptions.color||"accent"}set color(e){this._color=e}_color;get disabledInteractive(){return this._disabledInteractive||this.radioGroup!==null&&this.radioGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new k;radioGroup;get inputId(){return`${this.id||this._uniqueId}-input`}_checked=!1;_disabled;_required;_value=null;_removeUniqueSelectionListener=()=>{};_previousTabIndex;_inputElement;_rippleTrigger;_noopAnimations;_injector=g(Ui);constructor(){g(lr).load(xr);let e=g(eo,{optional:!0}),i=g(ji,{optional:!0}),l=g(new $i("tabindex"),{optional:!0});this.radioGroup=e,this._noopAnimations=i==="NoopAnimations",this._disabledInteractive=this._defaultOptions?.disabledInteractive??!1,l&&(this.tabIndex=Ei(l,0))}focus(e,i){i?this._focusMonitor.focusVia(this._inputElement,i,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((e,i)=>{e!==this.id&&i===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()}),this._ngZone.runOutsideAngular(()=>{this._cleanupClick=this._renderer.listen(this._inputElement.nativeElement,"click",this._onInputClick)})}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new ui(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){let i=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),i&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(e){this._onInputInteraction(e),(!this.disabled||this.disabledInteractive)&&this._inputElement?.nativeElement.focus()}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}_onInputClick=e=>{this.disabled&&this.disabledInteractive&&e.preventDefault()};_updateTabIndex(){let e=this.radioGroup,i;if(!e||!e.selected||this.disabled?i=this.tabIndex:i=e.selected===this?this.tabIndex:-1,i!==this._previousTabIndex){let l=this._inputElement?.nativeElement;l&&(l.setAttribute("tabindex",i+""),this._previousTabIndex=i,Hi(()=>{queueMicrotask(()=>{e&&e.selected&&e.selected!==this&&document.activeElement===l&&(e.selected?._inputElement.nativeElement.focus(),document.activeElement===l&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=M({type:o,selectors:[["mat-radio-button"]],viewQuery:function(i,l){if(i&1&&(ge(Pn,5),ge(wn,7,Ci)),i&2){let c;ee(c=te())&&(l._inputElement=c.first),ee(c=te())&&(l._rippleTrigger=c.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:19,hostBindings:function(i,l){i&1&&_("focus",function(){return l._inputElement.nativeElement.focus()}),i&2&&(ut("id",l.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),xi("mat-primary",l.color==="primary")("mat-accent",l.color==="accent")("mat-warn",l.color==="warn")("mat-mdc-radio-checked",l.checked)("mat-mdc-radio-disabled",l.disabled)("mat-mdc-radio-disabled-interactive",l.disabledInteractive)("_mat-animation-noopable",l._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",Ae],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Ei(e)],checked:[2,"checked","checked",Ae],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",Ae],required:[2,"required","required",Ae],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ae]},outputs:{change:"change"},exportAs:["matRadioButton"],ngContentSelectors:In,decls:13,vars:17,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(i,l){if(i&1){let c=x();Ji(),n(0,"div",2,0)(2,"div",3)(3,"div",4),_("click",function(A){return h(c),v(l._onTouchTargetClick(A))}),r(),n(4,"input",5,1),_("change",function(A){return h(c),v(l._onInputInteraction(A))}),r(),n(6,"div",6),b(7,"div",7)(8,"div",8),r(),n(9,"div",9),b(10,"div",10),r()(),n(11,"label",11),Yi(12),r()()}i&2&&(s("labelPosition",l.labelPosition),d(2),xi("mdc-radio--disabled",l.disabled),d(2),s("id",l.inputId)("checked",l.checked)("disabled",l.disabled&&!l.disabledInteractive)("required",l.required),ut("name",l.name)("value",l.value)("aria-label",l.ariaLabel)("aria-labelledby",l.ariaLabelledby)("aria-describedby",l.ariaDescribedby)("aria-disabled",l.disabled&&l.disabledInteractive?"true":null),d(5),s("matRippleTrigger",l._rippleTrigger.nativeElement)("matRippleDisabled",l._isRippleDisabled())("matRippleCentered",!0),d(2),s("for",l.inputId))},dependencies:[Cr,Er],styles:[`.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled])~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px);top:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled{pointer-events:auto}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color, var(--mat-sys-primary))}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-radio-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-radio-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-radio-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-radio-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-radio-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple>.mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio>.mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.cdk-focused .mat-focus-indicator::before{content:""}.mat-mdc-radio-disabled{cursor:default;pointer-events:none}.mat-mdc-radio-disabled.mat-mdc-radio-disabled-interactive{pointer-events:auto}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display, block)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}
`],encapsulation:2,changeDetection:0})}return o})(),to=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275mod=Wi({type:o});static \u0275inj=zi({imports:[ki,yr,gi,ki]})}return o})();function Nn(o,t){o&1&&(n(0,"mat-error"),a(1,"Largo es requerido"),r())}function Vn(o,t){o&1&&(n(0,"mat-error"),a(1,"Valor debe ser positivo"),r())}function Bn(o,t){o&1&&(n(0,"mat-error"),a(1,"Ancho es requerido"),r())}function Ln(o,t){o&1&&(n(0,"mat-error"),a(1,"Valor debe ser positivo"),r())}function zn(o,t){o&1&&(n(0,"mat-error"),a(1,"Alto es requerido"),r())}function Gn(o,t){o&1&&(n(0,"mat-error"),a(1,"Valor debe ser positivo"),r())}function Un(o,t){o&1&&(n(0,"mat-error"),a(1,"Peso es requerido"),r())}function $n(o,t){o&1&&(n(0,"mat-error"),a(1,"Valor debe ser positivo"),r())}function qn(o,t){o&1&&b(0,"mat-progress-spinner",18)}function jn(o,t){if(o&1){let e=x();n(0,"div",8)(1,"mat-form-field",9)(2,"mat-label"),a(3,"Largo (cm)"),r(),b(4,"input",10),m(5,Nn,2,0,"mat-error",11)(6,Vn,2,0,"mat-error",11),r(),n(7,"mat-form-field",9)(8,"mat-label"),a(9,"Ancho (cm)"),r(),b(10,"input",12),m(11,Bn,2,0,"mat-error",11)(12,Ln,2,0,"mat-error",11),r(),n(13,"mat-form-field",9)(14,"mat-label"),a(15,"Alto (cm)"),r(),b(16,"input",13),m(17,zn,2,0,"mat-error",11)(18,Gn,2,0,"mat-error",11),r(),n(19,"mat-form-field",9)(20,"mat-label"),a(21,"Peso (kg)"),r(),b(22,"input",14),m(23,Un,2,0,"mat-error",11)(24,$n,2,0,"mat-error",11),r(),n(25,"div",15)(26,"button",16),_("click",function(){h(e);let l=f();return v(l.onCalculateCustomCost())}),m(27,qn,1,0,"mat-progress-spinner",17),a(28),r()()()}if(o&2){let e,i,l,c,u,A,y,J,B=f();d(5),s("ngIf",(e=B.packageFormGroup.get("package_length_cm"))==null?null:e.hasError("required")),d(),s("ngIf",(i=B.packageFormGroup.get("package_length_cm"))==null?null:i.hasError("min")),d(5),s("ngIf",(l=B.packageFormGroup.get("package_width_cm"))==null?null:l.hasError("required")),d(),s("ngIf",(c=B.packageFormGroup.get("package_width_cm"))==null?null:c.hasError("min")),d(5),s("ngIf",(u=B.packageFormGroup.get("package_height_cm"))==null?null:u.hasError("required")),d(),s("ngIf",(A=B.packageFormGroup.get("package_height_cm"))==null?null:A.hasError("min")),d(5),s("ngIf",(y=B.packageFormGroup.get("package_weight_kg"))==null?null:y.hasError("required")),d(),s("ngIf",(J=B.packageFormGroup.get("package_weight_kg"))==null?null:J.hasError("min")),d(2),s("disabled",B.isCalculating()),d(),s("ngIf",B.isCalculating()),d(),p(" ",B.isCalculating()?"Calculando...":"CALCULAR"," ")}}function Hn(o,t){o&1&&(n(0,"div",19)(1,"p"),a(2," Si su paquete excede las medidas y pesos est\xE1ndar y no utiliza la calculadora de env\xEDo, se le cobrar\xE1 en funci\xF3n de esas medidas sin previo aviso. "),r()())}function Qn(o,t){if(o&1&&(n(0,"div",20)(1,"p"),a(2),r()()),o&2){let e=t.ngIf;d(2),P(e.info_text)}}var _i=class o{packageFormGroup;deliveryDistrictId=null;listaDeDistritos=[];shippingCostCalculated=new k;calculationLoading=new k;maxDimensions$;standardPackageLabel=pe("Est\xE1ndar");volumetric_factor=pe(0);isCalculating=pe(!1);orderService=g(j);destroy$=new U;constructor(){this.maxDimensions$=this.orderService.getMaxPackageDimensions().pipe(be(t=>{t.standard_package_info&&t.volumetric_factor&&(this.standardPackageLabel.set(t.standard_package_info),this.volumetric_factor.set(t.volumetric_factor))}))}ngOnInit(){if(!this.packageFormGroup){console.error("PackageCalculatorComponent: packageFormGroup input is required.");return}this.packageFormGroup.get("package_size_type")?.valueChanges.pipe(L(this.destroy$),xt(this.packageFormGroup.get("package_size_type")?.value)).subscribe(t=>{this.toggleCustomDimensionControls(t==="custom")})}toggleCustomDimensionControls(t){["package_width_cm","package_length_cm","package_height_cm","package_weight_kg"].forEach(i=>{let l=this.packageFormGroup.get(i);l&&(t?(l.enable(),l.setValidators([O.required,O.min(.1),O.max(999)])):(l.disable(),l.clearValidators(),l.updateValueAndValidity({emitEvent:!1})),l.updateValueAndValidity())})}calculateStandardShippingCost(){if(!this.deliveryDistrictId){console.warn("Cannot calculate standard shipping cost: deliveryDistrictId is missing."),this.shippingCostCalculated.emit(0);return}this.isCalculating.set(!0),this.calculationLoading.emit(!0),this.orderService.calculateShippingCost({delivery_district_id:this.deliveryDistrictId,package_size_type:"standard"}).pipe(L(this.destroy$)).subscribe({next:t=>{this.shippingCostCalculated.emit(t.shipping_cost),this.isCalculating.set(!1),this.calculationLoading.emit(!1)},error:t=>{console.error("Error calculating standard shipping cost:",t),this.shippingCostCalculated.emit(0),this.isCalculating.set(!1),this.calculationLoading.emit(!1)}})}onCalculateCustomCost(){if(this.packageFormGroup.get("package_size_type")?.value!=="custom")return;if(!this.deliveryDistrictId){alert("Por favor, seleccione un distrito de entrega primero.");return}let t=!0;if(["package_width_cm","package_length_cm","package_height_cm","package_weight_kg"].forEach(c=>{let u=this.packageFormGroup.get(c);u?.markAsTouched(),u?.invalid&&(t=!1)}),!t){console.log("Custom dimensions form is invalid");return}this.isCalculating.set(!0),this.calculationLoading.emit(!0);let i={delivery_district_id:this.deliveryDistrictId,package_size_type:"custom",package_width_cm:this.packageFormGroup.get("package_width_cm")?.value,package_length_cm:this.packageFormGroup.get("package_length_cm")?.value,package_height_cm:this.packageFormGroup.get("package_height_cm")?.value,package_weight_kg:this.packageFormGroup.get("package_weight_kg")?.value};if(this.maxDimensions$,i.package_width_cm&&i.package_length_cm&&i.package_height_cm&&i.package_weight_kg&&this.volumetric_factor()){let c=i.package_length_cm*i.package_width_cm*i.package_height_cm/this.volumetric_factor(),u=0,A=i.package_weight_kg;if(c>i.package_weight_kg&&(A=c),i.delivery_district_id){console.log("customData.delivery_district_id",i.delivery_district_id);let y=this.listaDeDistritos?.find(J=>J.id===i.delivery_district_id);if(y){let B=function(he,Xe=[]){for(let Ke of Xe)if(he>=Ke.weight_from&&he<=Ke.weight_to)return console.log("tarifa",Ke),Ke;return 0};var l=B;let J=this.listaDeDistritos?.filter(he=>he.name===y?.name);console.log("districtFound",y),J&&(console.log("filtrados",J),u=B(A,J).price||0)}}console.log("peso_cobrado",A),console.log("precio",u),this.shippingCostCalculated.emit(u),this.isCalculating.set(!1),this.calculationLoading.emit(!1)}else alert("las entradas no son validas")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-package-calculator"]],inputs:{packageFormGroup:"packageFormGroup",deliveryDistrictId:"deliveryDistrictId",listaDeDistritos:"listaDeDistritos"},outputs:{shippingCostCalculated:"shippingCostCalculated",calculationLoading:"calculationLoading"},decls:12,vars:7,consts:[[1,"package-calculator-container",3,"formGroup"],[1,"section-subtitle"],["formControlName","package_size_type","aria-label","Seleccione el tipo de tama\xF1o del paquete"],["value","standard",1,"package-option"],["value","custom",1,"package-option"],["class","custom-dimensions-grid",4,"ngIf"],["class","warning-paquete-size",4,"ngIf"],["class","max-dimensions-info",4,"ngIf"],[1,"custom-dimensions-grid"],["appearance","outline"],["matInput","","type","number","formControlName","package_length_cm","placeholder","Ingrese el largo"],[4,"ngIf"],["matInput","","type","number","formControlName","package_width_cm","placeholder","Ingrese el ancho"],["matInput","","type","number","formControlName","package_height_cm","placeholder","Ingrese el alto"],["matInput","","type","number","formControlName","package_weight_kg","placeholder","Ingrese el peso"],[1,"calculate-button-container"],["mat-flat-button","","color","accent","type","button",3,"click","disabled"],["mode","indeterminate","diameter","20","class","button-spinner",4,"ngIf"],["mode","indeterminate","diameter","20",1,"button-spinner"],[1,"warning-paquete-size"],[1,"max-dimensions-info"]],template:function(e,i){if(e&1&&(n(0,"div",0)(1,"h3",1),a(2,"Tama\xF1o del paquete"),r(),n(3,"mat-radio-group",2)(4,"mat-radio-button",3),a(5),r(),n(6,"mat-radio-button",4),a(7,"Otros tama\xF1os : Calcular"),r()(),m(8,jn,29,11,"div",5)(9,Hn,3,0,"div",6)(10,Qn,3,1,"div",7),C(11,"async"),r()),e&2){let l,c;s("formGroup",i.packageFormGroup),d(5),P(i.standardPackageLabel()),d(3),s("ngIf",((l=i.packageFormGroup.get("package_size_type"))==null?null:l.value)==="custom"),d(),s("ngIf",((c=i.packageFormGroup.get("package_size_type"))==null?null:c.value)==="standard"),d(),s("ngIf",F(11,5,i.maxDimensions$))}},dependencies:[S,R,$e,W,oe,Dt,Q,ne,ae,ye,Z,K,X,le,se,de,to,wi,gi,D,N,re,ie],styles:[".package-calculator-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px;padding:16px;border:1px solid #e0e0e0;border-radius:4px;background-color:#f9f9f9}.section-subtitle[_ngcontent-%COMP%]{font-size:1.1em;font-weight:500;margin-top:0;margin-bottom:16px}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-bottom:20px}.package-option[_ngcontent-%COMP%]{font-weight:400}.custom-dimensions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px;margin-top:16px;align-items:start}.calculate-button-container[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;justify-content:flex-start;margin-top:10px}.calculate-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}.button-spinner[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin-right:8px}.max-dimensions-info[_ngcontent-%COMP%]{margin-top:16px;font-size:.85em;color:#757575;text-align:center;padding:8px;background-color:#efefef;border-radius:4px}.warning-paquete-size[_ngcontent-%COMP%]{font-size:14px;font-weight:700;margin:16px 0;text-align:left;color:#d32f2f;display:flex;align-items:center;justify-content:flex-end}"]})};function Wn(o,t){if(o&1&&(n(0,"mat-option",31),a(1),r()),o&2){let e=t.$implicit;s("value",e),d(),P(e)}}function Xn(o,t){o&1&&(n(0,"mat-error"),a(1,"Requerido"),r())}function Kn(o,t){o&1&&(n(0,"mat-error"),a(1,"Requerido"),r())}function Zn(o,t){o&1&&(n(0,"mat-error"),a(1,"Tel\xE9fono inv\xE1lido"),r())}function Jn(o,t){if(o&1&&(n(0,"mat-option",32)(1,"div",33)(2,"span"),a(3),r(),a(4," \xA0 "),n(5,"span",34),a(6),C(7,"number"),r()()()),o&2){let e=t.$implicit;s("value",e.id),d(3),p("",e.name," "),d(3),p(" - S/ ",E(7,3,e.price,"1.2-2"),"")}}function Yn(o,t){o&1&&(n(0,"mat-error"),a(1,"Requerido"),r())}function ea(o,t){o&1&&(n(0,"mat-error"),a(1,"Requerido"),r())}function ta(o,t){o&1&&(n(0,"mat-error"),a(1,"M\xEDnimo 6 caracteres"),r())}function ia(o,t){o&1&&(n(0,"mat-error"),a(1,"Requerido"),r())}function ra(o,t){o&1&&b(0,"mat-progress-spinner",35)}function oa(o,t){o&1&&(n(0,"mat-error"),a(1,"Requerido"),r())}function na(o,t){o&1&&(n(0,"mat-error"),a(1,"Requerido"),r())}function aa(o,t){o&1&&(n(0,"mat-error"),a(1,"Monto no puede ser negativo"),r())}function la(o,t){if(o&1&&(n(0,"mat-option",31),a(1),r()),o&2){let e=t.$implicit;s("value",e),d(),P(e)}}var vt=class o{orderSubmit=new k;formValidityChanged=new k;orderForm;deliveryDistricts$;minDeliveryDate;shipmentTypes=["CONTRAENTREGA","SOLO ENTREGAR","CAMBIO","RECOJO"];paymentMethodsForCollection=["NO COBRAR","EFECTIVO","YAPE","PLIN","TRANSFERENCIA"];calculatedShippingCost=pe(0);isCalculatingShipping=pe(!1);selectedDistrictName=or(()=>{let t=this.orderForm?.get("delivery_district_id")?.value;return!t||!this._districtsCache?"":this._districtsCache.find(e=>e.id===t)?.name||""});orderService=g(j);fb=g(Oe);datePipe=g(q);destroy$=new U;_districtsCache=[];constructor(){this.minDeliveryDate=new Date,this.deliveryDistricts$=this.orderService.getDeliveryDistricts().pipe(Ye(t=>(this._districtsCache=t,t.filter(e=>e.isStandard)))),this.buildForm()}ngOnInit(){this.orderForm.statusChanges.pipe(L(this.destroy$),Le()).subscribe(t=>{this.formValidityChanged.emit(t==="VALID")}),this.orderForm.get("delivery_district_id")?.valueChanges.pipe(L(this.destroy$),Le()).subscribe(t=>{if(console.log("District changed to:",t),t)if(this.packageDetailsFormGroup.get("package_size_type")?.value==="standard"){let e=this._districtsCache.find(i=>i.id===t);e&&this.calculatedShippingCost.set(parseFloat(e.price))}else this.calculatedShippingCost.set(0)}),this.packageDetailsFormGroup.get("package_size_type")?.valueChanges.pipe(L(this.destroy$),Le()).subscribe(t=>{console.log("type",t);let e=this.orderForm.get("delivery_district_id")?.value;if(e&&t==="standard"){let i=this._districtsCache.find(l=>l.id===e);i&&this.calculatedShippingCost.set(parseFloat(i.price))}else this.calculatedShippingCost.set(0)})}resetPackageTypeSelection(){let t=this.packageDetailsFormGroup.get("package_size_type");this.calculatedShippingCost.set(0),this.isCalculatingShipping.set(!1)}get packageDetailsFormGroup(){return this.orderForm.get("package_details")}buildForm(){let t=this.datePipe.transform(new Date,"yyyy-MM-dd");this.orderForm=this.fb.group({shipment_type:[this.shipmentTypes[0],O.required],recipient_name:["",O.required],recipient_phone:["",[O.required,O.pattern("^[0-9]{9}$")]],delivery_district_id:[null,O.required],delivery_address:["",[O.required,O.minLength(6)]],delivery_coordinates:[""],delivery_date:[t,O.required],package_details:this.fb.group({package_size_type:["standard",O.required],package_width_cm:[{value:0,disabled:!0}],package_length_cm:[{value:0,disabled:!0}],package_height_cm:[{value:0,disabled:!0}],package_weight_kg:[{value:0,disabled:!0}]}),item_description:["",O.required],amount_to_collect_at_delivery:[0,[O.required,O.min(0)]],payment_method_for_collection:[this.paymentMethodsForCollection[0],O.required],observations:[""]})}onShippingCostCalculated(t){this.calculatedShippingCost.set(t),console.log("Shipping cost updated in OrderCreationForm:",t)}onPackageCalculationLoading(t){this.isCalculatingShipping.set(t)}onSubmit(){if(this.orderForm.invalid){this.orderForm.markAllAsTouched(),console.log("Order form is invalid:",this.getFormErrors(this.orderForm)),alert("Por favor complete todos los campos requeridos.");return}let t=this.orderForm.getRawValue(),e=bt(ve(ve({},t),t.package_details),{shipping_cost:this.calculatedShippingCost(),delivery_district_name:this.selectedDistrictName(),temp_id:`temp-${Date.now()}-${Math.random().toString(36).substring(2,7)}`});console.log("newOrderData",e),console.log("Submitting New Order Data:",e),this.orderSubmit.emit(e)}resetFormForNextOrder(){let t=this.orderForm.get("shipment_type")?.value||this.shipmentTypes[0],e=this.orderForm.get("payment_method_for_collection")?.value||this.paymentMethodsForCollection[0],i=this.datePipe.transform(new Date,"yyyy-MM-dd");this.orderForm.reset({shipment_type:t,delivery_date:i,package_details:{package_size_type:"standard"},amount_to_collect_at_delivery:0,payment_method_for_collection:e}),this.calculatedShippingCost.set(0),this.packageDetailsFormGroup.get("package_size_type")?.setValue("standard",{emitEvent:!0}),this.formValidityChanged.emit(this.orderForm.valid)}getDistrictCoverageInfo(t){return!t||!this._districtsCache||this._districtsCache.length===0?"":this._districtsCache.find(i=>i.id===t)?.name||""}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getFormErrors(t){let e={};return Object.keys(t.controls).forEach(i=>{let l=t.get(i)?.errors;if(l&&(e[i]=l),t.get(i)instanceof gr){let c=this.getFormErrors(t.get(i));Object.keys(c).length>0&&(e[i]=c)}}),e}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-order-creation-form"]],outputs:{orderSubmit:"orderSubmit",formValidityChanged:"formValidityChanged"},features:[ze([Lt(),q])],decls:98,vars:28,consts:[["deliveryDatePicker",""],[1,"order-creation-form",3,"ngSubmit","formGroup"],[1,"form-section-title"],[1,"form-grid"],["appearance","outline"],["formControlName","shipment_type"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","recipient_name","placeholder","Nombre completo"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","recipient_phone","type","tel","placeholder",""],["align","end"],["formControlName","delivery_district_id"],["class","district-option-content",3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"full-span-column"],["matInput","","formControlName","delivery_address","placeholder","Ingresar lugar de entrega (M\xEDnimo 6 caracteres)"],["matInput","","formControlName","delivery_coordinates","placeholder","-12.070,-77.012"],["matInput","","formControlName","delivery_date",3,"matDatepicker","min"],["matSuffix","",3,"for"],[1,"section-divider"],[3,"shippingCostCalculated","calculationLoading","packageFormGroup","listaDeDistritos","deliveryDistrictId"],[1,"shipping-cost-display"],[1,"cost-value"],["mode","indeterminate","diameter","20","class","cost-spinner",4,"ngIf"],["matInput","","formControlName","item_description","placeholder","Detalle del pedido"],["matInput","","formControlName","amount_to_collect_at_delivery","type","number","min","0","placeholder","S/"],["matPrefix",""],["formControlName","payment_method_for_collection"],["matInput","","formControlName","observations","placeholder","\xBFQu\xE9 env\xEDas?...","rows","3"],[1,"add-order-button-container"],["mat-flat-button","","color","accent","type","submit",3,"disabled"],[3,"value"],[1,"district-option-content",3,"value"],[2,"display","flex","justify-content","space-between","width","100%","align-items","center"],[2,"font-weight","500","color","#555"],["mode","indeterminate","diameter","20",1,"cost-spinner"]],template:function(e,i){if(e&1){let l=x();n(0,"form",1),_("ngSubmit",function(){return h(l),v(i.onSubmit())}),n(1,"h2",2),a(2,"Registrar pedido"),r(),n(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),a(6,"Tipo de env\xEDo"),r(),n(7,"mat-select",5),m(8,Wn,2,2,"mat-option",6),r()(),n(9,"mat-form-field",4)(10,"mat-label"),a(11,"Nombre del destinatario"),r(),b(12,"input",7),n(13,"mat-icon",8),a(14,"person_outline"),r(),m(15,Xn,2,0,"mat-error",9),r(),n(16,"mat-form-field",4)(17,"mat-label"),a(18,"Tel\xE9fono del destinatario"),r(),b(19,"input",10),n(20,"mat-icon",8),a(21,"phone_outline"),r(),n(22,"mat-hint",11),a(23,"No se debe agregar el +51"),r(),m(24,Kn,2,0,"mat-error",9)(25,Zn,2,0,"mat-error",9),r(),n(26,"mat-form-field",4)(27,"mat-label"),a(28,"Distrito de entrega"),r(),n(29,"mat-select",12),m(30,Jn,8,6,"mat-option",13),C(31,"async"),r(),m(32,Yn,2,0,"mat-error",9),r(),n(33,"mat-form-field",14)(34,"mat-label"),a(35,"Direcci\xF3n de entrega"),r(),b(36,"input",15),n(37,"mat-hint",11),a(38,"No acepta caracteres especiales se borran autom\xE1ticos"),r(),m(39,ea,2,0,"mat-error",9)(40,ta,2,0,"mat-error",9),r(),n(41,"mat-form-field",4)(42,"mat-label"),a(43,"Coordenadas (Opcional)"),r(),b(44,"input",16),n(45,"mat-icon",8),a(46,"location_on_outline"),r()(),n(47,"mat-form-field",4)(48,"mat-label"),a(49,"Fecha Entrega"),r(),b(50,"input",17)(51,"mat-datepicker-toggle",18)(52,"mat-datepicker",null,0),m(54,ia,2,0,"mat-error",9),r()(),b(55,"mat-divider",19),n(56,"app-package-calculator",20),_("shippingCostCalculated",function(u){return h(l),v(i.onShippingCostCalculated(u))})("calculationLoading",function(u){return h(l),v(i.onPackageCalculationLoading(u))}),r(),n(57,"div",21),a(58," Costo de env\xEDo = "),n(59,"span",22),a(60),C(61,"number"),r(),m(62,ra,1,0,"mat-progress-spinner",23),r(),b(63,"mat-divider",19),n(64,"div",3)(65,"mat-form-field",14)(66,"mat-label"),a(67,"\xBFQu\xE9 env\xEDa?"),r(),b(68,"input",24),n(69,"mat-icon",8),a(70,"inventory_2_outline"),r(),m(71,oa,2,0,"mat-error",9),r(),n(72,"mat-form-field",4)(73,"mat-label"),a(74,"Monto total a cobrar"),r(),b(75,"input",25),n(76,"span",26),a(77,"S/\xA0"),r(),n(78,"mat-hint"),a(79,"Si solo hay que entregar colocar 0"),r(),m(80,na,2,0,"mat-error",9)(81,aa,2,0,"mat-error",9),r(),n(82,"mat-form-field",4)(83,"mat-label"),a(84,"M\xE9todo de Pago (para cobro en entrega)"),r(),n(85,"mat-select",27),m(86,la,2,2,"mat-option",6),r()(),n(87,"mat-form-field",14)(88,"mat-label"),a(89,"Observaciones (Opcional)"),r(),b(90,"textarea",28),r()(),n(91,"div",29)(92,"button",30)(93,"mat-icon"),a(94,"add_shopping_cart"),r(),a(95," AGREGAR PEDIDO AL LISTADO "),n(96,"mat-icon"),a(97,"arrow_downward"),r()()()()}if(e&2){let l,c,u,A,y,J,B,he,Xe,Ke,Ii,Ti=z(53);s("formGroup",i.orderForm),d(8),s("ngForOf",i.shipmentTypes),d(7),s("ngIf",(l=i.orderForm.get("recipient_name"))==null?null:l.hasError("required")),d(9),s("ngIf",(c=i.orderForm.get("recipient_phone"))==null?null:c.hasError("required")),d(),s("ngIf",(u=i.orderForm.get("recipient_phone"))==null?null:u.hasError("pattern")),d(5),s("ngForOf",F(31,23,i.deliveryDistricts$)),d(2),s("ngIf",(A=i.orderForm.get("delivery_district_id"))==null?null:A.hasError("required")),d(7),s("ngIf",(y=i.orderForm.get("delivery_address"))==null?null:y.hasError("required")),d(),s("ngIf",(J=i.orderForm.get("delivery_address"))==null?null:J.hasError("minlength")),d(10),s("matDatepicker",Ti)("min",i.minDeliveryDate),d(),s("for",Ti),d(3),s("ngIf",(B=i.orderForm.get("delivery_date"))==null?null:B.hasError("required")),d(2),s("packageFormGroup",i.packageDetailsFormGroup)("listaDeDistritos",i._districtsCache)("deliveryDistrictId",(he=i.orderForm.get("delivery_district_id"))==null?null:he.value),d(4),p("S/ ",E(61,25,i.calculatedShippingCost(),"1.2-2"),""),d(2),s("ngIf",i.isCalculatingShipping()),d(9),s("ngIf",(Xe=i.orderForm.get("item_description"))==null?null:Xe.hasError("required")),d(9),s("ngIf",(Ke=i.orderForm.get("amount_to_collect_at_delivery"))==null?null:Ke.hasError("required")),d(),s("ngIf",(Ii=i.orderForm.get("amount_to_collect_at_delivery"))==null?null:Ii.hasError("min")),d(5),s("ngForOf",i.paymentMethodsForCollection),d(6),s("disabled",i.orderForm.invalid||i.isCalculatingShipping())}},dependencies:[S,Ce,R,$e,ot,W,xe,oe,Dt,Q,ne,fr,ae,ye,Z,K,X,wt,le,vr,qe,se,de,Te,We,Ie,ct,lt,dt,st,D,N,w,V,we,Pe,_i,re,ie],styles:[".order-creation-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-section-title[_ngcontent-%COMP%]{font-size:1.5em;font-weight:500;color:#333;margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid #eee}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px 24px}.full-span-column[_ngcontent-%COMP%]{grid-column:1/-1}mat-form-field[_ngcontent-%COMP%]{width:100%}.section-divider[_ngcontent-%COMP%]{margin:24px 0}.shipping-cost-display[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;margin:16px 0;text-align:right;color:#d32f2f;display:flex;align-items:center;justify-content:flex-end;gap:8px}.add-order-button-container[_ngcontent-%COMP%]{margin-top:24px;text-align:center}.add-order-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:1.1em;letter-spacing:.5px}mat-hint[align=end][_ngcontent-%COMP%]{font-size:.75em;opacity:.7}"]})};function da(o,t){o&1&&(n(0,"div",4),a(1," A\xFAn no has agregado pedidos. "),r())}function sa(o,t){o&1&&(n(0,"th",23),a(1,"Nombre"),r())}function ca(o,t){if(o&1&&(n(0,"td",24)(1,"span",25),a(2),r()()),o&2){let e=t.$implicit;d(),s("matTooltip",e.recipient_name)("matTooltipDisabled",e.recipient_name.length<=20),d(),p(" ",e.recipient_name," ")}}function ma(o,t){o&1&&(n(0,"th",23),a(1,"Tel\xE9fono"),r())}function pa(o,t){if(o&1&&(n(0,"td",24),a(1),r()),o&2){let e=t.$implicit;d(),P(e.recipient_phone)}}function ua(o,t){o&1&&(n(0,"th",23),a(1,"F. Entrega"),r())}function ga(o,t){if(o&1&&(n(0,"td",24),a(1),C(2,"date"),r()),o&2){let e=t.$implicit;d(),p(" ",E(2,1,e.delivery_date,"dd/MM/yy")," ")}}function _a(o,t){o&1&&(n(0,"th",23),a(1,"Distrito"),r())}function fa(o,t){if(o&1&&(n(0,"td",24),a(1),r()),o&2){let e=t.$implicit;d(),p(" ",e.delivery_district_name," ")}}function ha(o,t){o&1&&(n(0,"th",23),a(1,"Direcci\xF3n"),r())}function va(o,t){if(o&1&&(n(0,"td",24)(1,"span",25),a(2),r()()),o&2){let e=t.$implicit;d(),s("matTooltip",e.delivery_address)("matTooltipDisabled",e.delivery_address.length<=25),d(),p(" ",e.delivery_address," ")}}function ba(o,t){o&1&&(n(0,"th",23),a(1,"Producto"),r())}function Ca(o,t){if(o&1&&(n(0,"td",24)(1,"span",25),a(2),r()()),o&2){let e=t.$implicit;d(),s("matTooltip",e.item_description)("matTooltipDisabled",e.item_description.length<=20),d(),p(" ",e.item_description," ")}}function xa(o,t){o&1&&(n(0,"th",23),a(1,"Cobrar"),r())}function ya(o,t){if(o&1&&(n(0,"td",26),a(1),C(2,"currency"),r()),o&2){let e=t.$implicit;d(),p(" ",Ge(2,1,e.amount_to_collect_at_delivery,"PEN","S/ ","1.2-2")," ")}}function Oa(o,t){o&1&&(n(0,"th",23),a(1,"Costo env\xEDo"),r())}function Ma(o,t){if(o&1&&(n(0,"td",26),a(1),C(2,"currency"),r()),o&2){let e=t.$implicit;d(),p(" ",Ge(2,1,e.shipping_cost,"PEN","S/ ","1.2-2")," ")}}function Ea(o,t){o&1&&(n(0,"th",23),a(1,"M\xE9todo de Pago"),r())}function Sa(o,t){if(o&1&&(n(0,"td",24),a(1),r()),o&2){let e=t.$implicit;d(),p(" ",e.payment_method_for_collection," ")}}function Da(o,t){o&1&&(n(0,"th",23),a(1,"Observaci\xF3n"),r())}function ka(o,t){if(o&1&&(n(0,"td",24)(1,"span",25),a(2),r()()),o&2){let e=t.$implicit;d(),s("matTooltip",e.observations)("matTooltipDisabled",!e.observations||e.observations.length<=20),d(),p(" ",e.observations||"-"," ")}}function Pa(o,t){o&1&&(n(0,"th",23),a(1,"Quitar"),r())}function wa(o,t){if(o&1){let e=x();n(0,"td",24)(1,"button",27),_("click",function(){let l=h(e).$implicit,c=f(2);return v(c.onRemoveOrder(l.temp_id))}),n(2,"mat-icon"),a(3,"remove_circle_outline"),r()()()}}function Ia(o,t){o&1&&b(0,"tr",28)}function Ta(o,t){o&1&&b(0,"tr",29)}function Fa(o,t){if(o&1&&(n(0,"div",5)(1,"table",6),I(2,7),m(3,sa,2,0,"th",8)(4,ca,3,3,"td",9),T(),I(5,10),m(6,ma,2,0,"th",8)(7,pa,2,1,"td",9),T(),I(8,11),m(9,ua,2,0,"th",8)(10,ga,3,4,"td",9),T(),I(11,12),m(12,_a,2,0,"th",8)(13,fa,2,1,"td",9),T(),I(14,13),m(15,ha,2,0,"th",8)(16,va,3,3,"td",9),T(),I(17,14),m(18,ba,2,0,"th",8)(19,Ca,3,3,"td",9),T(),I(20,15),m(21,xa,2,0,"th",8)(22,ya,3,6,"td",16),T(),I(23,17),m(24,Oa,2,0,"th",8)(25,Ma,3,6,"td",16),T(),I(26,18),m(27,Ea,2,0,"th",8)(28,Sa,2,1,"td",9),T(),I(29,19),m(30,Da,2,0,"th",8)(31,ka,3,3,"td",9),T(),I(32,20),m(33,Pa,2,0,"th",8)(34,wa,4,0,"td",9),T(),m(35,Ia,1,0,"tr",21)(36,Ta,1,0,"tr",22),r()()),o&2){let e=f();d(),s("dataSource",e.pendingOrders),d(34),s("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),d(),s("matRowDefColumns",e.displayedColumns)}}var fi=class o{pendingOrders=[];removeOrder=new k;displayedColumns=["recipient_name","recipient_phone","delivery_date","delivery_district_name","delivery_address","item_description","amount_to_collect_at_delivery","shipping_cost","payment_method_for_collection","observations","actions"];constructor(){}onRemoveOrder(t){t&&this.removeOrder.emit(t)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-temporary-orders-table"]],inputs:{pendingOrders:"pendingOrders"},outputs:{removeOrder:"removeOrder"},decls:6,vars:2,consts:[["ordersTable",""],[1,"temporary-orders-container","mat-elevation-z1"],[1,"list-title"],["class","no-orders-message",4,"ngIf","ngIfElse"],[1,"no-orders-message"],[1,"table-responsive-wrapper"],["mat-table","",1,"temporary-orders-table",3,"dataSource"],["matColumnDef","recipient_name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","recipient_phone"],["matColumnDef","delivery_date"],["matColumnDef","delivery_district_name"],["matColumnDef","delivery_address"],["matColumnDef","item_description"],["matColumnDef","amount_to_collect_at_delivery"],["mat-cell","","class","align-right",4,"matCellDef"],["matColumnDef","shipping_cost"],["matColumnDef","payment_method_for_collection"],["matColumnDef","observations"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"truncate-text",3,"matTooltip","matTooltipDisabled"],["mat-cell","",1,"align-right"],["mat-icon-button","","color","warn","matTooltip","Quitar pedido",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,i){if(e&1&&(n(0,"div",1)(1,"h3",2),a(2,"Listado de pedidos del Negocio: Nikeli Fashion"),r(),m(3,da,2,0,"div",3)(4,Fa,37,4,"ng-template",null,0,it),r()),e&2){let l=z(5);d(3),s("ngIf",i.pendingOrders.length===0)("ngIfElse",l)}},dependencies:[S,R,nt,q,Kt,zt,Ut,Ht,$t,Gt,Qt,qt,jt,Wt,Xt,D,ce,w,V,He,je],styles:[".table-responsive-wrapper[_ngcontent-%COMP%]{background-color:#6c757d!important;overflow:auto}.temporary-orders-container[_ngcontent-%COMP%]{margin-top:30px;padding:0;background-color:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d}.list-title[_ngcontent-%COMP%]{font-size:1.2em;font-weight:500;color:#fff;background-color:#d32f2f;padding:12px 16px;margin:0;border-top-left-radius:8px;border-top-right-radius:8px}.temporary-orders-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th.mat-header-cell[_ngcontent-%COMP%], td.mat-cell[_ngcontent-%COMP%]{padding:10px 12px;border-bottom:1px solid #e0e0e0;vertical-align:middle;text-align:left}th.mat-header-cell[_ngcontent-%COMP%]{font-weight:500;color:#000000bf;background-color:#f5f5f5;white-space:nowrap}td.mat-cell[_ngcontent-%COMP%]{color:#000000de;font-size:.9em}[matColumnDef=amount_to_collect_at_delivery].mat-header-cell[_ngcontent-%COMP%], [matColumnDef=amount_to_collect_at_delivery].mat-cell[_ngcontent-%COMP%], [matColumnDef=shipping_cost].mat-header-cell[_ngcontent-%COMP%], [matColumnDef=shipping_cost].mat-cell[_ngcontent-%COMP%]{text-align:right;justify-content:flex-end}[matColumnDef=actions][_ngcontent-%COMP%]{width:80px}[matColumnDef=actions].mat-header-cell[_ngcontent-%COMP%], [matColumnDef=actions].mat-cell[_ngcontent-%COMP%]{text-align:center;justify-content:center}.truncate-text[_ngcontent-%COMP%]{display:block;max-width:120px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.no-orders-message[_ngcontent-%COMP%]{text-align:center;padding:30px;font-style:italic;color:#6c757d;background-color:#f8f9fa;border-bottom-left-radius:8px;border-bottom-right-radius:8px}"]})};function Aa(o,t){if(o&1&&(n(0,"mat-option",17),a(1),C(2,"titlecase"),r()),o&2){let e=t.$implicit;s("value",e),d(),p(" ",F(2,2,e.replace("_"," "))," ")}}function Ra(o,t){o&1&&(n(0,"mat-error"),a(1," Debe seleccionar una opci\xF3n de traslado. "),r())}function Na(o,t){o&1&&(n(0,"mat-error",18),a(1," Debe aceptar los t\xE9rminos y condiciones. "),r())}function Va(o,t){o&1&&b(0,"mat-progress-spinner",19)}function Ba(o,t){if(o&1){let e=x();n(0,"div",4)(1,"div",5)(2,"mat-form-field",6)(3,"mat-label"),a(4,"\xBFC\xF3mo se har\xE1 el traslado de los pedidos al almac\xE9n?"),r(),n(5,"mat-select",7),m(6,Aa,3,4,"mat-option",8),r(),m(7,Ra,2,0,"mat-error",9),r()(),n(8,"div",10)(9,"mat-checkbox",11),a(10," acepto los "),n(11,"a",12),a(12,"t\xE9rminos y condiciones"),r(),a(13," de Dinsides Courier "),r(),m(14,Na,2,0,"mat-error",13),r(),n(15,"div",14)(16,"button",15),_("click",function(){h(e);let l=f();return v(l.submitAllOrders())}),m(17,Va,1,0,"mat-progress-spinner",16),a(18),r()()()}if(o&2){let e=f();d(5),s("formControl",e.pickupOptionControl),d(),s("ngForOf",e.pickupOptions),d(),s("ngIf",e.pickupOptionControl.hasError("required")&&e.pickupOptionControl.touched),d(2),s("formControl",e.termsAcceptedControl),d(5),s("ngIf",e.termsAcceptedControl.hasError("required")&&e.termsAcceptedControl.touched),d(2),s("disabled",e.pendingOrders().length===0||!e.termsAcceptedControl.value||!e.pickupOptionControl.valid||e.isSubmittingBatch()),d(),s("ngIf",e.isSubmittingBatch()),d(),p(" ",e.isSubmittingBatch()?"Generando Pedidos...":"Haz click aqu\xED para guardar los pedidos"," ")}}var hi=class o{orderCreationFormComponent;pendingOrders=pe([]);isSubmittingBatch=pe(!1);isOrderFormValid=pe(!1);pickupOptionControl=new _t("RECOGER_DOMICILIO",O.required);termsAcceptedControl=new _t(!1,O.requiredTrue);pickupOptions=["RECOGER_DOMICILIO","ENTREGAR_EN_ALMACEN"];orderService=g(j);router=g(Mt);snackBar=g(Me);cdr=g(Ze);destroy$=new U;constructor(){}ngOnInit(){}handleOrderAdded(t){this.pendingOrders.update(e=>[...e,t]),this.snackBar.open("Pedido agregado al listado.","OK",{duration:2e3,verticalPosition:"top"}),this.orderCreationFormComponent&&this.orderCreationFormComponent.resetFormForNextOrder(),this.cdr.detectChanges()}handleRemoveOrder(t){this.pendingOrders.update(e=>e.filter(i=>i.temp_id!==t)),this.snackBar.open("Pedido quitado del listado.","OK",{duration:2e3,verticalPosition:"top"})}onOrderFormValidityChanged(t){this.isOrderFormValid.set(t)}submitAllOrders(){if(this.pendingOrders().length===0){this.snackBar.open("No hay pedidos en el listado para enviar.","Cerrar",{duration:3e3,verticalPosition:"top"});return}if(!this.pickupOptionControl.valid){this.snackBar.open("Por favor, seleccione c\xF3mo se har\xE1 el traslado.","Cerrar",{duration:3e3,verticalPosition:"top"}),this.pickupOptionControl.markAsTouched();return}if(!this.termsAcceptedControl.value){this.snackBar.open("Debe aceptar los t\xE9rminos y condiciones.","Cerrar",{duration:3e3,verticalPosition:"top"}),this.termsAcceptedControl.markAsTouched();return}this.isSubmittingBatch.set(!0);let e={orders:this.pendingOrders().map(i=>{let u=i,{temp_id:l}=u;return Fi(u,["temp_id"])}).map(i=>bt(ve({},i),{type_order_transfer_to_warehouse:this.pickupOptionControl.value})),pickup_option:this.pickupOptionControl.value||"RECOGER_DOMICILIO",terms_accepted:!0};this.orderService.createBatchOrders(e).pipe(L(this.destroy$),Vi(()=>this.isSubmittingBatch.set(!1))).subscribe({next:i=>{this.snackBar.open(i.message||"Pedidos generados exitosamente!","OK",{duration:4e3,verticalPosition:"top",panelClass:["success-snackbar"]}),this.pendingOrders.set([]),this.pickupOptionControl.reset("RECOGER_DOMICILIO"),this.termsAcceptedControl.reset(!1),this.router.navigate(["/orders"])},error:i=>{this.snackBar.open(i.message||"Error al generar los pedidos. Intente nuevamente.","Cerrar",{duration:5e3,verticalPosition:"top",panelClass:["error-snackbar"]}),console.error("Error submitting batch orders:",i)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=M({type:o,selectors:[["app-order-create-page"]],viewQuery:function(e,i){if(e&1&&ge(vt,5),e&2){let l;ee(l=te())&&(i.orderCreationFormComponent=l.first)}},decls:4,vars:2,consts:[[1,"page-content-wrapper","order-create-page"],[3,"orderSubmit","formValidityChanged"],[3,"removeOrder","pendingOrders"],["class","final-submission-section mat-elevation-z1",4,"ngIf"],[1,"final-submission-section","mat-elevation-z1"],[1,"pickup-option-section"],["appearance","outline",1,"full-width"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"terms-section"],["color","primary",3,"formControl"],["href","/terminos-y-condiciones","target","_blank"],["class","terms-error",4,"ngIf"],[1,"submit-batch-button-container"],["mat-flat-button","","color","primary",1,"submit-all-button",3,"click","disabled"],["mode","indeterminate","diameter","24","class","button-spinner",4,"ngIf"],[3,"value"],[1,"terms-error"],["mode","indeterminate","diameter","24",1,"button-spinner"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"app-order-creation-form",1),_("orderSubmit",function(c){return i.handleOrderAdded(c)})("formValidityChanged",function(c){return i.onOrderFormValidityChanged(c)}),r(),n(2,"app-temporary-orders-table",2),_("removeOrder",function(c){return i.handleRemoveOrder(c)}),r(),m(3,Ba,19,8,"div",3),r()),e&2&&(d(2),s("pendingOrders",i.pendingOrders()),d(),s("ngIf",i.pendingOrders().length>0))},dependencies:[S,Ce,R,rt,Et,W,Q,kt,vt,fi,at,D,N,w,Dr,Sr,Te,K,X,le,We,Ie,Z,re,ie],styles:[".order-create-page[_ngcontent-%COMP%]{padding:0;background-color:#f4f6f8}.final-submission-section[_ngcontent-%COMP%]{margin-top:30px;padding:24px;background-color:#fff;border-radius:8px;display:flex;flex-direction:column;gap:20px}.pickup-option-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.terms-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.terms-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-weight:500}.terms-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.terms-section[_ngcontent-%COMP%]   .terms-error[_ngcontent-%COMP%]{font-size:.75em;margin-top:4px}.submit-batch-button-container[_ngcontent-%COMP%]{margin-top:16px;text-align:center}.submit-batch-button-container[_ngcontent-%COMP%]   .submit-all-button[_ngcontent-%COMP%]{padding:12px 28px;font-size:1.1em;font-weight:500;letter-spacing:.5px;min-width:250px}.button-spinner[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin-right:10px}"]})};var Yp=[{path:"",component:pi,title:"Listado de Pedidos"},{path:"create",component:hi,title:"Registrar Nuevo Pedido"}];export{Yp as ORDERS_ROUTES};
