import{d as K,e as Y}from"./chunk-VDNF5TAH.js";import{b as X,c as Z}from"./chunk-TQ7VEWE7.js";import"./chunk-SGYCFQGT.js";import{C as z,F as A,G as V,b as I,d as l,f as R,g as N,l as q,o as L,r as T,t as B,v as D,x as G,y as U,z as j}from"./chunk-BP5QNQX2.js";import"./chunk-RNIK75VC.js";import"./chunk-H2LMHOSF.js";import{a as S,b as E,d as F,f as w,g as O,i as k}from"./chunk-5WTBZVHG.js";import{b as H,e as J}from"./chunk-NWNTSVQB.js";import"./chunk-6A3NYOL4.js";import{Ac as x,Bd as Q,Cd as W,Mb as i,Nc as P,Ob as b,Oc as v,Ra as n,Sc as y,Tc as g,_a as h,eb as d,f,ib as m,jb as C,ka as p,rb as r,sb as t,sc as _,tb as c,zb as M}from"./chunk-KWE5B57V.js";function te(o,a){o&1&&(r(0,"mat-error"),i(1,"El nombre es obligatorio"),t())}function re(o,a){o&1&&(r(0,"mat-error"),i(1,"Se requiere correo"),t())}function ie(o,a){o&1&&(r(0,"mat-error"),i(1,"Formato de correo electr\xF3nico no v\xE1lido"),t())}function oe(o,a){o&1&&(r(0,"mat-error"),i(1,"Se requiere contrase\xF1a"),t())}function ne(o,a){o&1&&(r(0,"mat-error"),i(1,"La contrase\xF1a debe tener al menos 6 caracteres"),t())}var $=class o{imageUrl=g.apiUrl+"/settings/company/background-image";fb=p(D);router=p(P);snackBar=p(X);registerForm;isLoading=!1;logoImageUrl=g.apiUrl+"/settings/company/logo-image";constructor(){this.registerForm=this.fb.group({username:["",l.required],userEmail:["",[l.required,l.email]],userPass:["",[l.required,l.minLength(6)]]})}get name(){return this.registerForm.get("username")}get email(){return this.registerForm.get("userEmail")}get password(){return this.registerForm.get("userPass")}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.isLoading=!0;let{username:a,userEmail:s,userPass:e}=this.registerForm.value;fetch(g.apiUrl+"/users/register-company",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,email:s,password:e})}).then(u=>f(this,null,function*(){let ee=yield u.json();this.isLoading=!1,ee.message?this.snackBar.open("Ya existe un usuario con ese correo","OK",{duration:3e3,verticalPosition:"top",panelClass:["success-snackbar"]}):(this.snackBar.open("\xA1Registro exitoso! Por favor, inicia sesi\xF3n.","OK",{duration:3e3,verticalPosition:"top",panelClass:["success-snackbar"]}),this.router.navigate(["/login"]))})).catch(u=>{this.isLoading=!1,this.snackBar.open("No se pudo registrar su informacion.","OK",{duration:3e3,verticalPosition:"top",panelClass:["error-snackbar"]})})}static \u0275fac=function(s){return new(s||o)};static \u0275cmp=h({type:o,selectors:[["app-register-page"]],decls:36,vars:10,consts:[[1,"login-page-wrapper"],[1,"login-card"],[1,"login-card-header"],[1,"logo-wrapper"],[2,"margin-top","10px","color","#012147","font-family","Montserrat, sans-serif !important"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","required",""],[4,"ngIf"],["matInput","","formControlName","userEmail","type","email","required","","autocomplete","off"],["matSuffix",""],["matInput","","formControlName","userPass","type","password","required",""],["mat-flat-button","","type","submit",1,"full-width","btn-corp-primary",3,"disabled"],[1,"auth-card-actions"],["routerLink","/login",2,"color","#012147"]],template:function(s,e){s&1&&(r(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"div",3)(4,"mat-card-title",4),i(5,"Reg\xEDstrate gratis"),t()()(),r(6,"mat-card-content")(7,"form",5),M("ngSubmit",function(){return e.onSubmit()}),r(8,"mat-form-field",6)(9,"mat-label"),i(10,"Nombre"),t(),c(11,"input",7),d(12,te,2,0,"mat-error",8),t(),r(13,"mat-form-field",6)(14,"mat-label"),i(15,"Correo"),t(),c(16,"input",9),r(17,"mat-icon",10),i(18,"email"),t(),d(19,re,2,0,"mat-error",8)(20,ie,2,0,"mat-error",8),t(),r(21,"mat-form-field",6)(22,"mat-label"),i(23,"Password"),t(),c(24,"input",11),r(25,"mat-icon",10),i(26,"lock"),t(),d(27,oe,2,0,"mat-error",8)(28,ne,2,0,"mat-error",8),t(),r(29,"button",12),i(30),t()()(),r(31,"mat-card-actions",13)(32,"p"),i(33," \xBFYa tienes una cuenta?"),r(34,"a",14),i(35," Iniciar sesi\xF3n"),t()()()()()),s&2&&(C("background-image","url("+e.imageUrl+")"),n(7),m("formGroup",e.registerForm),n(5),m("ngIf",e.name==null?null:e.name.hasError("required")),n(7),m("ngIf",e.email==null?null:e.email.hasError("required")),n(),m("ngIf",e.email==null?null:e.email.hasError("email")),n(7),m("ngIf",e.password==null?null:e.password.hasError("required")),n(),m("ngIf",e.password==null?null:e.password.hasError("minlength")),n(),m("disabled",e.isLoading||e.registerForm.invalid),n(),b(" ",e.isLoading?"Registrarse...":"Registrarse"," "))},dependencies:[x,_,y,v,G,q,I,R,N,B,L,T,k,S,w,F,O,E,V,A,U,j,z,Y,K,J,H,W,Q,Z],styles:[".login-page-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-size:cover;background-position:center;background-repeat:no-repeat}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:24px;border-radius:8px;box-shadow:0 4px 12px #00000026;background-color:#ffffffe6}.login-card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.login-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:2em;font-weight:500;color:#3f51b5;margin-bottom:8px;text-shadow:1px 1px 2px rgba(0,0,0,.2)}.login-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:1em;color:#757575}.card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2}.spinner-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#fffc;display:flex;justify-content:center;align-items:center;z-index:10;border-radius:8px}.login-card-actions[_ngcontent-%COMP%]{text-align:center;margin-top:20px;padding-top:16px;border-top:1px solid #e0e0e0;font-size:.9em}.login-card-actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#555}.login-card-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;text-decoration:none}.login-card-actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.logo-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}"]})};export{$ as RegisterPageComponent};
