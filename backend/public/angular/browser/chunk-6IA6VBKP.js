import{a as Y,b as Z,c as tt}from"./chunk-H3NKDVGQ.js";import"./chunk-P54CFNUJ.js";import{a as F,b as U,e as B,g as G,h as W,i as x}from"./chunk-4UISFGQU.js";import{a as q,b as J}from"./chunk-6QWK72ZE.js";import{a as M,b as P}from"./chunk-V3XFB2MU.js";import{b as Q,e as X}from"./chunk-EHVJKBXY.js";import"./chunk-ZDC23HDZ.js";import{$c as k,Eb as c,Ga as D,Ha as w,Jb as C,L as m,Nb as i,Ob as o,Pb as h,Rc as $,Tb as S,Tc as H,Vb as _,Vc as R,Wb as p,fc as r,gb as a,gc as b,gd as V,hc as j,ia as z,ka as g,l as E,ld as A,pa as L,rb as f,sc as K,t as I,tc as N,u as T,wa as u,xb as l}from"./chunk-XL3VFI5A.js";function at(e,n){if(e&1&&(i(0,"span",6),r(1),o()),e&2){let t=p();a(),b(t.unit)}}var O=class e{title="KPI Title";value=0;icon="info";colorClass="default-kpi";unit="";static \u0275fac=function(t){return new(t||e)};static \u0275cmp=f({type:e,selectors:[["app-kpi-card"]],inputs:{title:"title",value:"value",icon:"icon",colorClass:"colorClass",unit:"unit"},decls:10,vars:5,consts:[[1,"kpi-card",3,"ngClass"],["mat-card-avatar","",1,"kpi-icon-container"],[1,"kpi-icon"],[1,"kpi-value"],["class","kpi-unit",4,"ngIf"],[1,"kpi-title"],[1,"kpi-unit"]],template:function(t,d){t&1&&(i(0,"mat-card",0)(1,"mat-card-header")(2,"div",1)(3,"mat-icon",2),r(4),o()(),i(5,"mat-card-title",3),r(6),l(7,at,2,1,"span",4),o(),i(8,"mat-card-subtitle",5),r(9),o()()()),t&2&&(c("ngClass",d.colorClass),a(4),b(d.icon),a(2),j("",d.value," "),a(),c("ngIf",d.unit),a(2),b(d.title))},dependencies:[k,$,H,x,F,W,G,B,U,P,M],styles:[".kpi-card[_ngcontent-%COMP%]{text-align:left;border-radius:8px}.kpi-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:16px}.kpi-icon-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:50%;width:48px;height:48px;margin-right:16px}.kpi-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px;color:#fff}.kpi-title[_ngcontent-%COMP%]{font-size:.9em;color:#757575;margin-bottom:4px!important;text-transform:uppercase;letter-spacing:.5px;font-weight:500}.kpi-value[_ngcontent-%COMP%]{font-size:2em;font-weight:700;line-height:1.1}.kpi-unit[_ngcontent-%COMP%]{font-size:.6em;font-weight:400;margin-left:4px;text-transform:lowercase}.kpi-card.default-kpi[_ngcontent-%COMP%]{border-left:5px solid #78909c}.kpi-card.default-kpi[_ngcontent-%COMP%]   .kpi-icon-container[_ngcontent-%COMP%]{background-color:#78909c}.kpi-card.default-kpi[_ngcontent-%COMP%]   .kpi-value[_ngcontent-%COMP%]{color:#37474f}.kpi-card.default-kpi[_ngcontent-%COMP%]   .kpi-title[_ngcontent-%COMP%]{color:#546e7a}.kpi-card.primary-kpi[_ngcontent-%COMP%]{border-left:5px solid #3f51b5}.kpi-card.primary-kpi[_ngcontent-%COMP%]   .kpi-icon-container[_ngcontent-%COMP%]{background-color:#3f51b5}.kpi-card.primary-kpi[_ngcontent-%COMP%]   .kpi-value[_ngcontent-%COMP%]{color:#303f9f}.kpi-card.primary-kpi[_ngcontent-%COMP%]   .kpi-title[_ngcontent-%COMP%]{color:#3949ab}.kpi-card.accent-kpi[_ngcontent-%COMP%]{border-left:5px solid #e91e63}.kpi-card.accent-kpi[_ngcontent-%COMP%]   .kpi-icon-container[_ngcontent-%COMP%]{background-color:#e91e63}.kpi-card.accent-kpi[_ngcontent-%COMP%]   .kpi-value[_ngcontent-%COMP%]{color:#c2185b}.kpi-card.accent-kpi[_ngcontent-%COMP%]   .kpi-title[_ngcontent-%COMP%]{color:#d81b60}.kpi-card.success-kpi[_ngcontent-%COMP%]{border-left:5px solid #4caf50}.kpi-card.success-kpi[_ngcontent-%COMP%]   .kpi-icon-container[_ngcontent-%COMP%]{background-color:#4caf50}.kpi-card.success-kpi[_ngcontent-%COMP%]   .kpi-value[_ngcontent-%COMP%]{color:#388e3c}.kpi-card.success-kpi[_ngcontent-%COMP%]   .kpi-title[_ngcontent-%COMP%]{color:#43a047}.kpi-card.warn-kpi[_ngcontent-%COMP%]{border-left:5px solid #f44336}.kpi-card.warn-kpi[_ngcontent-%COMP%]   .kpi-icon-container[_ngcontent-%COMP%]{background-color:#f44336}.kpi-card.warn-kpi[_ngcontent-%COMP%]   .kpi-value[_ngcontent-%COMP%]{color:#d32f2f}.kpi-card.warn-kpi[_ngcontent-%COMP%]   .kpi-title[_ngcontent-%COMP%]{color:#e53935}"]})};var v=class e{http=u(V);apiUrl=A.apiUrl+"/orders/dashboard/data";getDashboardSummary(){return console.log("DashboardDataService: Fetching dashboard summary (simulated)"),this.http.get(this.apiUrl).pipe(g(n=>console.log("Dashboard summary fetched:",n)),m(this.handleError))}handleError(n){return console.error("Error fetching dashboard data:",n),T(()=>new Error("Could not load dashboard data. Please try again later."))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"})};function rt(e,n){e&1&&(i(0,"div",3),h(1,"mat-progress-spinner",5),i(2,"p"),r(3,"Cargando datos del dashboard..."),o()())}function dt(e,n){if(e&1&&(i(0,"div",6),h(1,"app-kpi-card",7)(2,"app-kpi-card",8)(3,"app-kpi-card",9)(4,"app-kpi-card",10),o(),i(5,"mat-grid-list",11),h(6,"mat-grid-tile",12),o()),e&2){let t=p();a(),c("value",t.kpis.totalOrdersToday),a(),c("value",t.kpis.ordersInTransit),a(),c("value",t.kpis.ordersDeliveredToday),a(),c("value",t.kpis.ordersWithIssuesToday),a(2),c("colspan",2)}}function ct(e,n){if(e&1){let t=S();i(0,"div",4)(1,"mat-icon",13),r(2,"error_outline"),o(),i(3,"p"),r(4," No se pudieron cargar los datos del dashboard. Intente de nuevo m\xE1s tarde. "),o(),i(5,"button",14),_("click",function(){D(t);let s=p(2);return w(s.loadDashboardData())}),r(6," Reintentar "),o()()}if(e&2){let t=p(2);a(5),c("disabled",t.isLoading)}}function pt(e,n){if(e&1&&l(0,dt,7,5)(1,ct,7,1,"div",4),e&2){let t=p();C(n?0:t.loadError?1:-1)}}function st(e,n){if(e&1){let t=S();i(0,"div",4)(1,"mat-icon",13),r(2,"error_outline"),o(),i(3,"p"),r(4,"Fallo al cargar datos. Por favor, reintente."),o(),i(5,"button",14),_("click",function(){D(t);let s=p();return w(s.loadDashboardData())}),r(6," Reintentar "),o()()}if(e&2){let t=p();a(5),c("disabled",t.isLoading)}}var y=class e{dashboardDataService=u(v);destroy$=new E;dashboardSummary$;isLoading=!0;loadError=!1;ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.isLoading=!0,this.loadError=!1,this.dashboardSummary$=this.dashboardDataService.getDashboardSummary().pipe(z(this.destroy$),g(n=>{this.isLoading=!1,n||(this.loadError=!0)}),m(n=>(this.isLoading=!1,this.loadError=!0,console.error("Dashboard Page: Error loading summary",n),I(null))))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=f({type:e,selectors:[["app-dashboard-page"]],decls:12,vars:5,consts:[[1,"dashboard-container"],[1,"page-header"],["mat-stroked-button","",1,"btn-corp-secondary",3,"click","disabled"],[1,"full-page-spinner"],[1,"error-message-container"],["mode","indeterminate","diameter","60"],[1,"kpi-row"],["title","Total Pedidos Hoy","icon","inventory_2","colorClass","primary-kpi","unit","pedidos",1,"kpi-item",3,"value"],["title","En Tr\xE1nsito","icon","local_shipping","colorClass","accent-kpi","unit","pedidos",1,"kpi-item",3,"value"],["title","Entregados Hoy","icon","check_circle_outline","colorClass","success-kpi","unit","pedidos",1,"kpi-item",3,"value"],["title","rechazados en punto hoy","icon","report_problem","colorClass","warn-kpi","unit","pedidos",1,"kpi-item",3,"value"],["cols","3","rowHeight","400px","gutterSize","20px",1,"charts-grid"],[3,"colspan"],["color","warn"],["mat-flat-button","",1,"btn-corp-primary",3,"click","disabled"]],template:function(t,d){if(t&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Dashboard de Pedidos"),o(),i(4,"button",2),_("click",function(){return d.loadDashboardData()}),i(5,"mat-icon"),r(6,"refresh"),o(),r(7," Actualizar Datos "),o()(),l(8,rt,4,0,"div",3)(9,pt,2,1),K(10,"async"),l(11,st,7,1,"div",4),o()),t&2){let s;a(4),c("disabled",d.isLoading),a(4),C(d.isLoading?8:-1),a(),C((s=N(10,3,d.dashboardSummary$))?9:d.loadError&&!d.isLoading?11:-1,s)}},dependencies:[k,R,O,tt,Z,Y,J,q,X,Q,P,M,x],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:24px;background-color:#f4f6f8}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;margin-bottom:24px;padding-bottom:16px;border-bottom:1px solid #e0e0e0}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8em;font-weight:500;color:#263238}.full-page-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:60vh}.full-page-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;font-size:1.1em;color:#616161}.kpi-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;margin-bottom:24px}@media (max-width: 600px){.kpi-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.charts-grid[_ngcontent-%COMP%]{margin-bottom:24px}@media (max-width: 600px){.charts-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column}.charts-grid[_ngcontent-%COMP%]   mat-grid-tile[_ngcontent-%COMP%]{width:100%;height:auto!important;margin-bottom:20px}}.info-placeholder-card[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;border-radius:8px}.info-placeholder-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.2em;font-weight:500;padding:16px 16px 8px}.info-placeholder-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex-grow:1;display:flex;align-items:center;justify-content:center;text-align:center;color:#757575;padding:16px}.error-message-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;text-align:center;background-color:#fff;border-radius:8px;box-shadow:0 2px 5px #00000014;margin-top:30px}.error-message-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px}.error-message-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1em;margin-bottom:20px;color:#616161}"]})};var qt=[{path:"",component:y,title:"Dashboard Principal"}];export{qt as DASHBOARD_ROUTES};
