import{a as ue,b as fe,c as tn,d as nn,e as an,f as rn}from"./chunk-3HIYO65S.js";import"./chunk-ZKEJYAJT.js";import{a as Zt,c as en}from"./chunk-INNR5TUR.js";import{a as Wt,b as Jt,c as Kt,d as Yt}from"./chunk-OTTC2AJX.js";import{a as on}from"./chunk-6HHLTRXZ.js";import{a as St,b as yt,d as ae,e as oe,f as It,g as Ot,i as re}from"./chunk-JBWENUMD.js";import{d as ne}from"./chunk-ZKSEBIMY.js";import{c as wt,d as kt}from"./chunk-PKHWH5C3.js";import{a as le,b as se}from"./chunk-GDDGCRCE.js";import"./chunk-3PSRRXT4.js";import"./chunk-F5X5MWHG.js";import{a as Rt,b as Tt,c as Ft,d as Lt,e as Nt,f as At,g as Vt,h as Bt,i as Ht,j as $t,k as zt,l as jt,m as Ut,n as de,o as qt,p as ge}from"./chunk-V54F6JIJ.js";import"./chunk-MS4AQ6UA.js";import{b as pe,d as ce,e as me}from"./chunk-4CRKJGVD.js";import{a as Gt,b as Xt}from"./chunk-SNHOSZ4S.js";import{a as ht,c as Ct,e as Et,f as Pt,g as xt,h as ie}from"./chunk-GXNIZWNA.js";import{d as Dt}from"./chunk-JJSTB54W.js";import"./chunk-YRCWJJOQ.js";import{b as Qt}from"./chunk-N24MSZBW.js";import{b as Mt}from"./chunk-UKBDVULT.js";import{b as bt}from"./chunk-5PZ25QHJ.js";import"./chunk-2JNWSY3M.js";import{d as ft,e as vt}from"./chunk-44LGRUYF.js";import{a as ee,b as te}from"./chunk-3IGH7FBX.js";import"./chunk-7RWCIHFI.js";import{D as dt,G as gt,H as ut,b as it,f as at,g as ot,l as rt,o as lt,r as st,v as pt,x as ct,z as mt}from"./chunk-ICWTIKD4.js";import"./chunk-BWBG2IHT.js";import"./chunk-U3COC3EF.js";import{a as We,b as Je,d as Ke,e as Ye,f as Ze,g as et,h as tt,i as nt}from"./chunk-K4QNRRQ5.js";import{a as Y,b as Z}from"./chunk-ASKMK2H5.js";import{a as Qe}from"./chunk-XRPHOQB2.js";import{b as w,c as _t,e as b}from"./chunk-2H2YZZAU.js";import"./chunk-NUMYIFQH.js";import{Ac as y,Bb as O,Db as h,Ea as I,Eb as u,Ec as x,Gd as H,Hd as M,I as L,J as ke,Jc as Se,Kb as j,Kc as ze,Lb as U,Lc as je,Mb as G,Pb as D,Q as Re,Qb as r,Qc as Ue,Rb as N,Sb as m,Sc as Ge,Ta as Ae,Tb as X,Tc as Xe,Va as l,Xc as K,Yc as qe,Zb as He,a as be,aa as Te,ac as $e,ba as z,bc as W,cb as P,da as Fe,dc as J,gc as Me,h as Oe,ia as Le,ib as d,l as F,lb as Ve,m as De,mb as s,na as g,ob as Be,t as we,u as $,uc as A,va as Ne,vb as o,vc as V,wa as C,wb as n,wc as B,xa as E,xb as v,yb as R,zb as T}from"./chunk-YUSEJVZ2.js";var k=class i{http=g(je);apiUrl=`${qe.apiUrl}/planning-events`;authService=g(Qe);constructor(){}getAuthHeaders(){let t=this.authService.getAccessToken();return t?new Se({"Content-Type":"application/json",codrr_token:t}):new Se({"Content-Type":"application/json"})}getPlanningEvents(t,e,a,p,c){let f=new ze().set("page_number",e.toString()).set("page_size",a.toString()).set("sort_field",p).set("sort_direction",c);return t.startDate&&(f=f.set("start_date",t.startDate)),t.endDate&&(f=f.set("end_date",t.endDate)),t.status&&(f=f.set("status",t.status)),this.http.get(this.apiUrl,{params:f}).pipe(L(this.handleError))}getPlanningEventDetails(t){let e=this.getAuthHeaders();return this.authService.getAccessToken()?this.http.get(`${this.apiUrl}/${t}`,{headers:e}).pipe(L(this.handleError)):$(()=>new Error("Not authenticated to fetch planning event details."))}importPlanningEventsFromParsedJson(t){let e=this.getAuthHeaders();return this.authService.getAccessToken()?this.http.post(`${this.apiUrl}/import-batch-json`,t,{headers:e}).pipe(L(this.handleImportError)):$(()=>new Error("Not authenticated to fetch users."))}handleImportError(t){console.error("API Import Error:",t);let e={success:!1,message:"Error de comunicaci\xF3n con el servidor durante la importaci\xF3n.",errors:[{row:0,message:`Error: ${t.status} - ${t.statusText||"Error desconocido"}`}]};return t.error&&typeof t.error=="object"&&"message"in t.error&&(e=be(be({},e),t.error)),$(()=>e)}handleError(t){let e="An unknown error occurred!";return t.error instanceof ErrorEvent?e=`Error: ${t.error.message}`:(e=`Error Code: ${t.status}
Message: ${t.message||t.error?.message||"Server error"}`,t.status===0&&(e="Could not connect to the server. Please check your network or if the server is running.")),console.error("API Error in PlanningEventsService:",t),$(()=>new Error(e))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=Le({token:i,factory:i.\u0275fac,providedIn:"root"})};function mn(i,t){i&1&&(o(0,"div",16),v(1,"mat-progress-spinner",17),n())}function dn(i,t){i&1&&(o(0,"th",18),r(1,"N\xB0"),n())}function gn(i,t){if(i&1&&(o(0,"td",19),r(1),n()),i&2){let e=t.$implicit;l(),m(" ",e.planningEventIdExternal," ")}}function un(i,t){i&1&&(o(0,"th",18),r(1,"Fecha"),n())}function fn(i,t){if(i&1&&(o(0,"td",19),r(1),W(2,"date"),n()),i&2){let e=t.$implicit;l(),m(" ",J(2,1,e.planningDate,"dd/MM/yyyy")," ")}}function vn(i,t){i&1&&(o(0,"th",18),r(1,"N\xB0 Rutas"),n())}function _n(i,t){if(i&1&&(o(0,"td",19),r(1),n()),i&2){let e=t.$implicit;l(),m(" ",(e.routes==null?null:e.routes.length)||0," ")}}function hn(i,t){i&1&&(o(0,"th",18),r(1,"N\xB0 Paradas"),n())}function Cn(i,t){if(i&1&&(o(0,"td",19),r(1),n()),i&2){let e=t.$implicit,a=u();l(),m(" ",a.getTotalStops(e)," ")}}function En(i,t){i&1&&(o(0,"th",18),r(1,"Estado"),n())}function Pn(i,t){if(i&1&&(o(0,"td",19)(1,"span",20),r(2),n()()),i&2){let e=t.$implicit,a=u();l(),s("ngClass",a.getStatusClass(e)),l(),m(" ",a.getStatus(e)," ")}}function xn(i,t){i&1&&(o(0,"th",21),r(1,"Acciones"),n())}function bn(i,t){if(i&1){let e=O();o(0,"td",19)(1,"button",22),h("click",function(){let p=C(e).$implicit,c=u();return E(c.onViewDetails(p))}),r(2," Ver Detalle "),n()()}}function Mn(i,t){i&1&&v(0,"tr",23)}function Sn(i,t){i&1&&v(0,"tr",24)}function yn(i,t){if(i&1&&(o(0,"tr",25)(1,"td",26),r(2," No se encontraron planes de ruta que coincidan con los filtros. "),n()()),i&2){let e=u();l(),Ve("colspan",e.displayedColumns.length)}}var ve=class i{planningEvents=[];isLoading=!1;totalCount=0;pageSize=10;pageIndex=0;pageChanged=new I;sortChanged=new I;viewDetailsClicked=new I;displayedColumns=["planningEventIdExternal","planningDate","total_routes","total_stops","status","actions"];dataSource=new Ut;paginator;sort;PlanningEventStatus=ue;constructor(){}ngOnChanges(t){t.planningEvents&&this.planningEvents&&(this.dataSource.data=this.planningEvents)}ngAfterViewInit(){}getStatusClass(t){return`status-${(t.routes.every(c=>c.stops.every(f=>f.order.status==="ENTREGADO"||f.order.status==="RECHAZADO EN PUNTO"))?"completed":"pending").toLowerCase().replace(/[\s_]+/g,"-")}`}getStatus(t){return t.routes.every(p=>p.stops.every(c=>c.order.status==="ENTREGADO"||c.order.status==="RECHAZADO EN PUNTO"))?"COMPLETADO":"PENDIENTE"}getTotalStops(t){return t.routes.reduce((e,a)=>a.stops?.length+e,0)}onViewDetails(t){this.viewDetailsClicked.emit(t.id)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=P({type:i,selectors:[["app-planning-events-table"]],viewQuery:function(e,a){if(e&1&&(j(ce,5),j(de,5)),e&2){let p;U(p=G())&&(a.paginator=p.first),U(p=G())&&(a.sort=p.first)}},inputs:{planningEvents:"planningEvents",isLoading:"isLoading",totalCount:"totalCount",pageSize:"pageSize",pageIndex:"pageIndex"},outputs:{pageChanged:"pageChanged",sortChanged:"sortChanged",viewDetailsClicked:"viewDetailsClicked"},features:[Ne],decls:25,vars:8,consts:[[1,"table-wrapper","mat-elevation-z4"],["class","spinner-overlay",4,"ngIf"],["mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","planningEventIdExternal"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","planningDate"],["matColumnDef","total_routes"],["matColumnDef","total_stops"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Seleccione p\xE1gina de planes de ruta",3,"page","length","pageSize","pageIndex"],[1,"spinner-overlay"],["mode","indeterminate","diameter","60"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"status-badge",3,"ngClass"],["mat-header-cell",""],["mat-flat-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"no-data-cell"]],template:function(e,a){e&1&&(o(0,"div",0),d(1,mn,2,0,"div",1),o(2,"table",2),h("matSortChange",function(c){return a.sortChanged.emit(c)}),R(3,3),d(4,dn,2,0,"th",4)(5,gn,2,1,"td",5),T(),R(6,6),d(7,un,2,0,"th",4)(8,fn,3,4,"td",5),T(),R(9,7),d(10,vn,2,0,"th",4)(11,_n,2,1,"td",5),T(),R(12,8),d(13,hn,2,0,"th",4)(14,Cn,2,1,"td",5),T(),R(15,9),d(16,En,2,0,"th",4)(17,Pn,3,2,"td",5),T(),R(18,10),d(19,xn,2,0,"th",11)(20,bn,3,0,"td",5),T(),d(21,Mn,1,0,"tr",12)(22,Sn,1,0,"tr",13)(23,yn,3,1,"tr",14),n(),o(24,"mat-paginator",15),h("page",function(c){return a.pageChanged.emit(c)}),n()()),e&2&&(l(),s("ngIf",a.isLoading),l(),s("dataSource",a.dataSource),l(19),s("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),l(),s("matRowDefColumns",a.displayedColumns),l(2),s("length",a.totalCount)("pageSize",a.pageSize)("pageIndex",a.pageIndex))},dependencies:[x,A,B,y,jt,Rt,Ft,Vt,Lt,Tt,Bt,Nt,At,Ht,$t,zt,me,ce,ge,de,qt,Z,Y,b,w,M,pe,ne,ie,te,bt],styles:[".table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;background-color:var(--sys-surface);color:var(--sys-on-surface);margin-top:20px;box-shadow:0 4px 20px #00000014;transition:box-shadow .3s ease-in-out}.spinner-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;justify-content:center;align-items:center;background:#fffc;z-index:10}.planning-events-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.planning-events-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .planning-events-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #e0e0e0;text-align:left}.planning-events-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600;color:#555}.planning-events-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.planning-events-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:4px;font-size:.85em;font-weight:500;color:#fff;text-transform:uppercase}.status-pending[_ngcontent-%COMP%]{background-color:#ffc107}.status-completed[_ngcontent-%COMP%]{background-color:#28a745}.status-cancelled[_ngcontent-%COMP%]{background-color:#dc3545}.status-desconocido[_ngcontent-%COMP%]{background-color:#6c757d}.actions-column-header[_ngcontent-%COMP%]{text-align:center}.actions-cell[_ngcontent-%COMP%]{text-align:center;white-space:nowrap}.no-data-cell[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#777;font-style:italic}.mat-paginator[_ngcontent-%COMP%]{background:#fff;border-top:1px solid #e0e0e0;color:#555}"]})};function In(i,t){if(i&1&&(o(0,"mat-option",8),r(1),n()),i&2){let e=t.$implicit;s("value",e),l(),m(" ",e," ")}}var Ce=class i{filtersChanged=new I;filterForm;planningEventStatuses=Object.values(ue);fb=g(pt);datePipe=g(y);destroy$=new F;constructor(){let t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,0);this.filterForm=this.fb.group({startDate:[e],endDate:[a],status:[null]})}ngOnInit(){this.filterForm.valueChanges.pipe(z(this.destroy$),ke(400),Re((t,e)=>JSON.stringify(t)===JSON.stringify(e))).subscribe(()=>{this.applyFilters()})}applyFilters(){let t=this.filterForm.value,e={startDate:t.startDate?this.datePipe.transform(t.startDate,"yyyy-MM-dd"):null,endDate:t.endDate?this.datePipe.transform(t.endDate,"yyyy-MM-dd"):null,status:t.status||null};console.log("PlanningEventsFiltersComponent: Emitting filters",e),this.filtersChanged.emit(e)}clearFilters(){this.filterForm.reset({startDate:null,endDate:null,status:null})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=P({type:i,selectors:[["app-planning-events-filters"]],outputs:{filtersChanged:"filtersChanged"},features:[He([kt(),y])],decls:31,vars:7,consts:[["startDatePicker",""],["endDatePicker",""],[1,"filters-container",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","startDate","placeholder","mm/dd/yyyy",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","endDate","placeholder","mm/dd/yyyy",3,"matDatepicker"],["formControlName","status","placeholder","Seleccione estado..."],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"filter-actions"],["mat-flat-button","","type","button",1,"btn-corp-primary",3,"click"],["mat-stroked-button","","type","button",1,"btn-corp-secondary",3,"click"]],template:function(e,a){if(e&1){let p=O();o(0,"form",2)(1,"mat-form-field",3)(2,"mat-label"),r(3,"Fecha de planificaci\xF3n inicio"),n(),v(4,"input",4)(5,"mat-datepicker-toggle",5)(6,"mat-datepicker",null,0),n(),o(8,"mat-form-field",3)(9,"mat-label"),r(10,"Fecha de planificaci\xF3n fin"),n(),v(11,"input",6)(12,"mat-datepicker-toggle",5)(13,"mat-datepicker",null,1),n(),o(15,"mat-form-field",3)(16,"mat-label"),r(17,"Estado"),n(),o(18,"mat-select",7)(19,"mat-option",8),r(20,"Todos"),n(),d(21,In,2,2,"mat-option",9),n()(),o(22,"div",10)(23,"button",11),h("click",function(){return C(p),E(a.applyFilters())}),o(24,"mat-icon"),r(25,"search"),n(),r(26," Buscar "),n(),o(27,"button",12),h("click",function(){return C(p),E(a.clearFilters())}),o(28,"mat-icon"),r(29,"clear_all"),n(),r(30," Limpiar "),n()()()}if(e&2){let p=D(7),c=D(14);s("formGroup",a.filterForm),l(4),s("matDatepicker",p),l(),s("for",p),l(6),s("matDatepicker",c),l(),s("for",c),l(7),s("value",null),l(2),s("ngForOf",a.planningEventStatuses)}},dependencies:[x,V,ct,rt,it,at,ot,lt,st,ut,gt,mt,dt,vt,ft,Yt,Wt,Jt,Kt,wt,Xt,Gt,Dt,b,w,M,H],styles:[".filters-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;padding:20px;background-color:#f8f9fa;border-radius:8px;margin-bottom:20px;box-shadow:0 2px 4px #0000000d}.mat-form-field[_ngcontent-%COMP%]{flex:1 1 auto;min-width:200px}.filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;margin-left:auto}.btn-corp-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-corp-secondary[_ngcontent-%COMP%]{border-color:#007bff;color:#007bff}"]})};var wn=(i,t)=>({"success-message":i,"error-message":t});function kn(i,t){if(i&1&&(o(0,"span",16),r(1),n()),i&2){let e=u();l(),N(e.fileName)}}function Rn(i,t){if(i&1&&(o(0,"div",17)(1,"p"),r(2),n(),v(3,"mat-progress-bar",18),n()),i&2){let e=u();l(2),m("Importando archivo... ",e.uploadProgress,"%"),l(),s("value",e.uploadProgress)}}function Tn(i,t){if(i&1&&(o(0,"div",25)(1,"mat-icon",26),r(2,"error_outline"),n(),o(3,"div",27),r(4),n()()),i&2){let e=t.$implicit;l(4),X(" Fila ",e.row,": ",e.message," ")}}function Fn(i,t){if(i&1&&(o(0,"div",22)(1,"h4"),r(2,"Detalles de Errores:"),n(),o(3,"mat-list",23),d(4,Tn,5,2,"div",24),n()()),i&2){let e=u(2);l(4),s("ngForOf",e.importResult.errors)}}function Ln(i,t){if(i&1&&(o(0,"div",19)(1,"h3",20),r(2),n(),d(3,Fn,5,1,"div",21),n()),i&2){let e=u();l(),s("ngClass",$e(3,wn,e.importResult.success,!e.importResult.success)),l(),m(" ",e.importResult.message," "),l(),s("ngIf",e.importResult.errors&&e.importResult.errors.length>0)}}var Nn={ID_PLANIFICACION:"id_planificacion",FECHA_PLANIFICACION:"fecha_planificacion",ID_RUTA_PLANIFICADOR:"id_ruta_planificador",ID_CONDUCTOR:"id_conductor",ORDEN_PARADA:"orden_parada",ID_PEDIDO:"id_pedido",DIRECCION_ENTREGA:"direccion_entrega",HORA_ESTIMADA_LLEGADA:"hora_estimada_llegada"},Da=Object.keys(Nn),Ee=class i{importCompleted=new I;selectedFile=null;fileName=null;isUploading=!1;uploadProgress=0;importResult=null;planningEventService=g(k);snackBar=g(ee);dialogRef=g(ht);settingsService=g(Mt);destroy$=new F;enlace=null;constructor(){}ngOnInit(){}onFileSelected(t){let a=t.currentTarget.files;a&&a.length>0?(this.selectedFile=a[0],this.fileName=this.selectedFile.name,this.importResult=null,console.log("File selected:",this.selectedFile)):(this.selectedFile=null,this.fileName=null)}processImport(){return Oe(this,null,function*(){if(!this.selectedFile){this.snackBar.open("Por favor, selecciona un archivo Excel.","OK",{duration:3e3,panelClass:["warn-snackbar"]});return}this.isUploading=!0,this.uploadProgress=0,this.importResult=null;let t=setInterval(()=>{this.uploadProgress<90&&(this.uploadProgress+=10)},200);try{let e=yield this.readFileAndParseToJson(this.selectedFile);if(console.log("Parsed Excel to JSON:",e),e.length===0)throw new Error("El archivo Excel no contiene datos (despu\xE9s de las cabeceras) o el formato es incorrecto.");this.planningEventService.importPlanningEventsFromParsedJson(e).subscribe({next:a=>{clearInterval(t),this.uploadProgress=100,this.importResult=a,a.success&&a.importedCount&&a.importedCount>0?(this.snackBar.open(a.message,"OK",{duration:4e3,panelClass:["success-snackbar"]}),this.importCompleted.emit(!0)):(this.snackBar.open(a.message||"Algunos eventos de planificaci\xF3n no pudieron ser importados o hubo errores.","OK",{duration:6e3,panelClass:["warn-snackbar"]}),a.errors&&a.errors.length>0&&console.warn("Import errors from backend:",a.errors)),this.isUploading=!1},error:a=>{clearInterval(t),this.isUploading=!1,this.uploadProgress=0,this.importResult={success:!1,message:a.message||"Error en el servidor durante la importaci\xF3n."},this.snackBar.open(this.importResult.message,"OK",{duration:3e3,panelClass:["error-snackbar"]}),console.error("Error importing planning events:",a)}})}catch(e){clearInterval(t),this.isUploading=!1,this.uploadProgress=0,this.importResult={success:!1,message:e.message||"Error al procesar el archivo Excel."},this.snackBar.open(this.importResult.message,"OK",{duration:3e3,panelClass:["error-snackbar"]}),console.error("Error processing file:",e)}})}readFileAndParseToJson(t){return new Promise((e,a)=>{if(!t){a(new Error("No se proporcion\xF3 ning\xFAn archivo."));return}let p=new FileReader;p.onload=c=>{try{let f=c.target.result,_=Zt(f,{type:"binary",cellDates:!0}),S=_.SheetNames[0];if(!S){a(new Error("El archivo Excel no contiene hojas."));return}let Q=_.Sheets[S],sn=en.sheet_to_json(Q,{raw:!1,defval:null});e(sn.filter(pn=>Object.values(pn).some(Ie=>Ie!==null&&Ie!=="")))}catch(f){console.error("Error al leer el contenido de la hoja de Excel:",f),a(new Error("No se pudo leer el contenido de la hoja de Excel. Formato incorrecto."))}},p.onerror=c=>{console.error("Error en FileReader:",c),a(new Error("Ocurri\xF3 un error al intentar leer el archivo."))},p.readAsBinaryString(t)})}closeDialog(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=P({type:i,selectors:[["app-planning-event-import-modal"]],outputs:{importCompleted:"importCompleted"},decls:69,vars:7,consts:[["fileInput",""],[1,"import-modal-container"],["mat-dialog-title",""],[1,"mat-typography"],[1,"instructions"],[2,"margin-bottom","10px"],[1,"column-descriptions"],[1,"file-input-container"],["mat-raised-button","",1,"btn-corp-primary",2,"height","60px",3,"click","disabled"],["hidden","","type","file","accept",".xlsx, .xls",3,"change"],["class","file-name-display",4,"ngIf"],["class","upload-progress-container",4,"ngIf"],["class","import-results",4,"ngIf"],["align","end"],["mat-stroked-button","",1,"btn-corp-secondary",3,"click","disabled"],["mat-flat-button","",1,"btn-corp-primary",3,"click","disabled"],[1,"file-name-display"],[1,"upload-progress-container"],["mode","determinate",3,"value"],[1,"import-results"],[3,"ngClass"],["class","error-details",4,"ngIf"],[1,"error-details"],["dense",""],["class","error-item",4,"ngFor","ngForOf"],[1,"error-item"],["matListItemIcon","","color","warn"],[2,"overflow-wrap","break-word !important"]],template:function(e,a){if(e&1){let p=O();o(0,"div",1)(1,"h2",2),r(2,"Importar Eventos de Planificaci\xF3n desde Excel"),n(),o(3,"mat-dialog-content",3)(4,"p",4),r(5," Sigue estos pasos para importar tus eventos de planificaci\xF3n de forma masiva: "),n(),o(6,"ol")(7,"li")(8,"div",5),r(9," Descarga la plantilla de Excel para asegurar el formato correcto de los datos. "),n()(),o(10,"li"),r(11," Completa la plantilla con la informaci\xF3n de tus eventos. Aseg\xFArate de que el orden y nombre de las columnas coincidan con la plantilla. "),n(),o(12,"li")(13,"strong"),r(14,"Descripci\xF3n de las Columnas Esperadas en la Plantilla:"),n(),o(15,"ul",6)(16,"li")(17,"strong"),r(18,"ID_PLANIFICACION:"),n(),r(19," Identificador \xFAnico de la planificaci\xF3n. "),n(),o(20,"li")(21,"strong"),r(22,"FECHA_PLANIFICACION:"),n(),r(23," Fecha de la planificaci\xF3n. Formato DD/MM/AAAA. "),n(),o(24,"li")(25,"strong"),r(26,"ID_RUTA_PLANIFICADOR:"),n(),r(27," Identificador de la ruta del planificador. "),n(),o(28,"li")(29,"strong"),r(30,"ID_CONDUCTOR:"),n(),r(31," Identificador del conductor asignado. "),n(),o(32,"li")(33,"strong"),r(34,"ORDEN_PARADA:"),n(),r(35," Orden de la parada en la ruta."),n(),o(36,"li")(37,"strong"),r(38,"ID_PEDIDO:"),n(),r(39," Identificador del pedido asociado. "),n(),o(40,"li")(41,"strong"),r(42,"DIRECCION_ENTREGA:"),n(),r(43," Direcci\xF3n de entrega del pedido. "),n(),o(44,"li")(45,"strong"),r(46,"HORA_ESTIMADA_LLEGADA:"),n(),r(47," Hora estimada de llegada. Formato HH:MM. "),n()()(),o(48,"li"),r(49,"Guarda el archivo en formato .xlsx o .xls."),n(),o(50,"li"),r(51,'Selecciona el archivo completo y haz clic en "Importar Eventos".'),n()(),o(52,"div",7)(53,"button",8),h("click",function(){C(p);let f=D(58);return E(f.click())}),o(54,"mat-icon"),r(55,"attach_file"),n(),r(56," Seleccionar Archivo Excel "),n(),o(57,"input",9,0),h("change",function(f){return C(p),E(a.onFileSelected(f))}),n(),d(59,kn,2,1,"span",10),n(),d(60,Rn,4,2,"div",11)(61,Ln,4,6,"div",12),n(),o(62,"mat-dialog-actions",13)(63,"button",14),h("click",function(){return C(p),E(a.closeDialog())}),r(64," Cerrar "),n(),o(65,"button",15),h("click",function(){return C(p),E(a.processImport())}),o(66,"mat-icon"),r(67,"upload"),n(),r(68),n()()()}e&2&&(l(53),s("disabled",a.isUploading),l(6),s("ngIf",a.fileName),l(),s("ngIf",a.isUploading),l(),s("ngIf",a.importResult),l(2),s("disabled",a.isUploading),l(2),s("disabled",!a.selectedFile||a.isUploading),l(3),m(" ",a.isUploading?"Importando...":"Importar Eventos"," "))},dependencies:[x,A,V,B,ie,Et,xt,Pt,b,w,M,H,se,le,re,oe,ae,pe],styles:[".import-modal-container[_ngcontent-%COMP%]{padding:20px;min-width:400px}.instructions[_ngcontent-%COMP%]{margin-bottom:15px;line-height:1.5}ol[_ngcontent-%COMP%]{margin-bottom:20px;padding-left:20px}li[_ngcontent-%COMP%]{margin-bottom:10px}.template-button[_ngcontent-%COMP%]{margin-top:10px}.column-descriptions[_ngcontent-%COMP%]{list-style-type:disc;margin-left:20px;margin-top:10px}.column-descriptions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px}.file-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin-top:20px;margin-bottom:20px}.file-name-display[_ngcontent-%COMP%]{font-style:italic;color:#555}.upload-progress-container[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.import-results[_ngcontent-%COMP%]{margin-top:20px;padding:15px;border-radius:8px;background-color:#f0f0f0}.success-message[_ngcontent-%COMP%]{color:#4caf50;font-weight:700}.error-message[_ngcontent-%COMP%]{color:#f44336;font-weight:700}.error-details[_ngcontent-%COMP%]{margin-top:10px;border-top:1px solid #ccc;padding-top:10px}.error-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin-bottom:5px;word-break:break-word}.error-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px;line-height:1}.error-data-preview[_ngcontent-%COMP%]{font-family:monospace;background-color:#e0e0e0;padding:2px 5px;border-radius:3px;word-break:break-all}.btn-corp-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-corp-secondary[_ngcontent-%COMP%]{border-color:#007bff;color:#007bff}.warn-snackbar[_ngcontent-%COMP%]{background-color:#ffc107;color:#333}.success-snackbar[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.error-snackbar[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}"]})};var Pe=class i{planningEventsService=g(k);router=g(Ge);snackBar=g(ee);dialog=g(Ct);planningEvents=[];isLoading=!1;totalPlanningEventCount=0;currentPageIndex=0;currentPageSize=10;currentSortField="planningDate";currentSortDirection="desc";datePipe=g(y);now=new Date;firstDay=new Date(this.now.getFullYear(),this.now.getMonth(),1);lastDay=new Date(this.now.getFullYear(),this.now.getMonth()+1,0);filterCriteriaSubject=new De({startDate:this.datePipe.transform(this.firstDay,"yyyy-MM-dd"),endDate:this.datePipe.transform(this.lastDay,"yyyy-MM-dd"),status:null});destroy$=new F;constructor(){}ngOnInit(){this.filterCriteriaSubject.pipe(z(this.destroy$),Fe(()=>this.currentPageIndex=0)).subscribe(()=>{this.fetchPlanningEvents()})}fetchPlanningEvents(){this.isLoading=!0;let t=this.filterCriteriaSubject.value??1;this.planningEventsService.getPlanningEvents(t,this.currentPageIndex+1,this.currentPageSize,this.currentSortField,this.currentSortDirection).pipe(z(this.destroy$),L(e=>(this.snackBar.open(e.message||"Failed to load planning events.","Close",{duration:5e3,panelClass:["error-snackbar"]}),this.isLoading=!1,[]))).subscribe(e=>{this.planningEvents=e.items,this.totalPlanningEventCount=e.total_count||0,this.isLoading=!1,console.log("Planning Events fetched:",e)})}openImportModal(){let t=this.dialog.open(Ee,{width:"90%",maxWidth:"700px",autoFocus:!1});t.componentInstance.importCompleted.subscribe(e=>{e&&(console.log("Import completed, reloading orders..."),this.fetchPlanningEvents())}),t.afterClosed().subscribe(e=>{console.log("The import dialog was closed",e)})}onFiltersChanged(t){console.log("PlanningEventsListPage: Filters changed",t),this.filterCriteriaSubject.next(t)}onPageChanged(t){console.log("PlanningEventsListPage: Page changed",t),this.currentPageIndex=t.pageIndex,this.currentPageSize=t.pageSize,this.fetchPlanningEvents()}onSortChanged(t){console.log("PlanningEventsListPage: Sort changed",t),this.currentSortField=t.active,this.currentSortDirection=t.direction,this.currentPageIndex=0,this.fetchPlanningEvents()}onViewDetails(t){this.router.navigate(["/planning-events",t])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=P({type:i,selectors:[["app-planning-events-list-page"]],decls:12,vars:5,consts:[[1,"page-content-wrapper"],[1,"page-title-bar"],[1,"page-title"],[1,"breadcrumbs"],[3,"filtersChanged"],[1,"table-controls-bar"],[1,"records-info"],[1,"actions-group"],["mat-flat-button","",1,"btn-corp-primary",3,"click"],[3,"pageChanged","sortChanged","viewDetailsClicked","planningEvents","isLoading","totalCount","pageSize","pageIndex"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Listado de Planes de Ruta"),n(),v(4,"div",3),n(),o(5,"app-planning-events-filters",4),h("filtersChanged",function(c){return a.onFiltersChanged(c)}),n(),o(6,"div",5),v(7,"div",6),o(8,"div",7)(9,"button",8),h("click",function(){return a.openImportModal()}),r(10," Importar Nuevo Plan de Ruta "),n()()(),o(11,"app-planning-events-table",9),h("pageChanged",function(c){return a.onPageChanged(c)})("sortChanged",function(c){return a.onSortChanged(c)})("viewDetailsClicked",function(c){return a.onViewDetails(c)}),n()()),e&2&&(l(11),s("planningEvents",a.planningEvents)("isLoading",a.isLoading)("totalCount",a.totalPlanningEventCount)("pageSize",a.currentPageSize)("pageIndex",a.currentPageIndex))},dependencies:[x,K,te,b,w,M,ne,Qt,me,ge,ve,Ce],styles:[".page-content-wrapper[_ngcontent-%COMP%]{padding:20px}.page-title-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#333}.table-controls-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.actions-group[_ngcontent-%COMP%]{display:flex;gap:10px}"]})};function An(i,t){if(i&1){let e=O();o(0,"mat-list-item",14),h("click",function(){let p=C(e).$implicit,c=u(2);return E(c.selectRoute(p))}),o(1,"mat-icon",15),r(2,"person_pin"),n(),o(3,"div",16),r(4),n(),o(5,"div",17)(6,"span"),r(7),n(),o(8,"div",18)(9,"span"),r(10),n(),v(11,"mat-progress-bar",19),n()()()}if(i&2){let e=t.$implicit,a=u(2);Be("selected-route",e.id===(a.selectedRoute==null?null:a.selectedRoute.id)),l(4),m(" ",e.driverCode||"Sin Conductor"," "),l(3),N(e.vehicle||"Sin Veh\xEDculo"),l(3),X("",a.getCompletedStops(e)," / ",e.stops.length," Paradas"),l(),s("value",a.getRouteProgress(e))}}function Vn(i,t){if(i&1&&v(0,"map-marker",30),i&2){let e=t.$implicit;s("options",e)}}function Bn(i,t){if(i&1&&v(0,"map-polyline",30),i&2){let e=u(3);s("options",e.plannedRoutePolyline)}}function Hn(i,t){if(i&1&&v(0,"map-marker",30),i&2){let e=u(3);s("options",e.liveVehicleMarker)}}function $n(i,t){if(i&1&&(o(0,"div",25),v(1,"div",31),o(2,"div",32)(3,"span"),r(4),n()(),o(5,"div",27)(6,"div",33)(7,"span")(8,"strong"),r(9,"Empresa:"),n(),r(10),n(),o(11,"span")(12,"strong"),r(13,"Cliente:"),n(),r(14),n(),o(15,"span")(16,"strong"),r(17,"Direcci\xF3n:"),n(),r(18),n(),o(19,"span")(20,"strong"),r(21,"Telefono:"),n(),o(22,"a",34),r(23),n()()(),o(24,"p",35)(25,"span"),r(26),n(),r(27," | "),o(28,"span"),r(29),n(),r(30," - "),o(31,"span"),r(32),n(),r(33," | "),o(34,"span",36),r(35),n()()()()),i&2){let e=t.$implicit,a=u(3);l(2),s("ngClass",a.getStatusClass(e.order.status)),l(2),N(e.sequenceOrder),l(6),m(" ",e.order.company.username,""),l(4),m(" ",e.order.recipient_name,""),l(4),m(" ",e.address,""),l(4),s("href",a.getWhatsAppLink(e.order.recipient_phone),Ae),l(),m(" ",e.order.recipient_phone," "),l(3),m("Pedido #",e.orderCode,""),l(3),m("Llegada: ",e.plannedStartTime,""),l(3),m("Salida: ",e.plannedEndTime,""),l(2),s("ngClass",a.getStatusClass(e.order.status)),l(),N(e.order.status)}}function zn(i,t){if(i&1&&(o(0,"p"),r(1),n()),i&2){let e=u(4);l(),m(" Hora de Llegada Estimada: ",e.selectedRoute.vehicleEndTime," ")}}function jn(i,t){if(i&1&&(o(0,"div",25),v(1,"div",31),o(2,"div",37)(3,"mat-icon"),r(4,"flag"),n()(),o(5,"div",27)(6,"strong"),r(7),n(),d(8,zn,2,1,"p",38),n()()),i&2){let e=u(3);l(7),m("Destino: ",e.selectedRoute.completionPoint||"No definido",""),l(),s("ngIf",e.selectedRoute.vehicleEndTime)}}function Un(i,t){if(i&1&&(o(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),r(3),n(),o(4,"mat-card-subtitle"),r(5),n()(),o(6,"mat-card-content")(7,"div",20)(8,"google-map",21),d(9,Vn,1,1,"map-marker",22)(10,Bn,1,1,"map-polyline",23)(11,Hn,1,1,"map-marker",23),n()(),o(12,"div",24)(13,"div",25)(14,"div",26)(15,"mat-icon"),r(16,"warehouse"),n()(),o(17,"div",27)(18,"strong"),r(19),n(),o(20,"p"),r(21),n()()(),d(22,$n,36,12,"div",28)(23,jn,9,2,"div",29),n()()()),i&2){let e=u(2);l(3),m("Detalle de Ruta: ",e.selectedRoute.driverCode,""),l(2),m("Veh\xEDculo: ",e.selectedRoute.vehicle,""),l(3),s("options",e.mapOptions),l(),s("ngForOf",e.plannedRouteMarkers),l(),s("ngIf",e.plannedRoutePolyline),l(),s("ngIf",e.liveVehicleMarker),l(8),m("Partida: ",e.selectedRoute.startingPoint||"No definido",""),l(2),m(" Hora de Salida Estimada: ",e.selectedRoute.vehicleStartTime," "),l(),s("ngForOf",e.selectedRoute.stops),l(),s("ngIf",e.selectedRoute.completionPoint)}}function Gn(i,t){i&1&&(o(0,"div",39)(1,"mat-icon"),r(2,"touch_app"),n(),o(3,"p"),r(4,"Selecciona una ruta de la lista para ver su detalle."),n()())}function Xn(i,t){if(i&1&&(o(0,"div",3)(1,"mat-card",4)(2,"mat-card-header")(3,"div",5)(4,"mat-icon"),r(5,"event_note"),n()(),o(6,"mat-card-title"),r(7),n(),o(8,"mat-card-subtitle"),r(9),W(10,"date"),n()(),o(11,"mat-card-actions",6)(12,"a",7)(13,"mat-icon"),r(14,"arrow_back"),n(),r(15," Volver a la Lista "),n()()(),o(16,"div",8)(17,"div",9)(18,"mat-card")(19,"mat-card-content")(20,"mat-list")(21,"h3",10),r(22,"Rutas de la Jornada"),n(),d(23,An,12,7,"mat-list-item",11),n()()()(),o(24,"div",12),d(25,Un,24,10,"mat-card",13)(26,Gn,5,0,"ng-template",null,1,Me),n()()()),i&2){let e=D(27),a=u();l(7),X(" ","N\xB0: ","",a.planningEvent.planningEventIdExternal,""),l(2),m(" Planificaci\xF3n para el ",J(10,6,a.planningEvent.planningDate,"fullDate")," "),l(14),s("ngForOf",a.planningEvent.routes),l(2),s("ngIf",a.selectedRoute)("ngIfElse",e)}}function qn(i,t){i&1&&v(0,"mat-spinner")}function Qn(i,t){i&1&&(o(0,"p"),r(1,"Cargando detalles de la planificaci\xF3n..."),n())}function Wn(i,t){if(i&1&&(o(0,"div",39),d(1,qn,1,0,"mat-spinner",38)(2,Qn,2,0,"p",38),n()),i&2){let e=u();l(),s("ngIf",!e.planningEvent),l(),s("ngIf",!e.planningEvent)}}var xe=class i{route=g(Ue);planningEventService=g(k);routeService=g(rn);directionsService=g(on);routeSubscription;map;planningEvent=null;selectedRoute=null;pollingInterval;mapOptions={center:{lat:-12.046374,lng:-77.042793},zoom:12,mapTypeControl:!1};plannedRouteMarkers=[];plannedRoutePolyline=null;liveVehicleMarker=null;ngOnInit(){this.routeSubscription=this.route.paramMap.pipe(Te(t=>{let e=t.get("id");return e?this.planningEventService.getPlanningEventDetails(e):we(null)})).subscribe({next:t=>{t&&(this.planningEvent=t,this.planningEvent.routes&&this.planningEvent.routes.length>0?(this.selectedRoute=this.planningEvent.routes[0],this.drawPlannedRoute(),this.startLiveLocationPolling()):this.selectedRoute=null,this.startPolling())},error:t=>{console.error("Error loading planning event details",t)}})}selectRoute(t){this.selectedRoute=t,this.drawPlannedRoute(),this.startLiveLocationPolling()}getCompletedStops(t){return t.stops?t.stops.filter(e=>e.status==="COMPLETED").length:0}getRouteProgress(t){return!t.stops||t.stops.length===0?0:this.getCompletedStops(t)/t.stops.length*100}getStatusClass(t){return t?`status-${t.toLowerCase().replace(/[\s_]+/g,"-")}`:"status-desconocido"}startPolling(){this.pollingInterval&&clearInterval(this.pollingInterval),this.pollingInterval=setInterval(()=>{this.refreshData()},3e4)}refreshData(){this.planningEvent?.id&&this.planningEventService.getPlanningEventDetails(this.planningEvent.id.toString()).subscribe({next:t=>{if(t){let e=this.selectedRoute?.id;this.planningEvent=t,this.selectedRoute=this.planningEvent.routes.find(a=>a.id===e)||(this.planningEvent.routes.length>0?this.planningEvent.routes[0]:null)}},error:t=>{console.error("Error refreshing planning event data",t)}})}getWhatsAppLink(t){let e=t.replace(/\D/g,""),a=e;return!e.startsWith("51")&&!e.startsWith("+51")?a="51"+e:e.startsWith("+")&&(a=e.substring(1)),`https://wa.me/${a}`}drawPlannedRoute(){if(this.plannedRouteMarkers=[],this.plannedRoutePolyline=null,this.liveVehicleMarker=null,!this.selectedRoute||!this.selectedRoute.stops||this.selectedRoute.stops.length===0)return;let t=this.selectedRoute,e=t.stops.slice().sort((_,S)=>_.sequenceOrder-S.sequenceOrder),a=new google.maps.LatLngBounds;e.forEach(_=>{let S={lat:Number(_.latitude),lng:Number(_.longitude)};this.plannedRouteMarkers.push({position:S,label:_.sequenceOrder.toString(),title:`#${_.sequenceOrder}: ${_.address}`}),a.extend(S)});let p={lat:Number(t.latitudeStartPoint),lng:Number(t.longitudeStartPoint)},c={lat:Number(e[e.length-1].latitude),lng:Number(e[e.length-1].longitude)},f=e.slice(0,-1).map(_=>({location:{lat:Number(_.latitude),lng:Number(_.longitude)},stopover:!0}));this.directionsService.getDirections(p,c,f).then(_=>{if(this.selectedRoute?.id===t.id&&_.routes.length>0){let S=_.routes[0].overview_path.map(Q=>({lat:Q.lat(),lng:Q.lng()}));this.plannedRoutePolyline={path:S,strokeColor:"#3f51b5",strokeWeight:5,strokeOpacity:.8}}}).catch(_=>{console.error("Error al obtener la polil\xEDnea de la ruta:",_)})}startLiveLocationPolling(){if(this.pollingInterval&&clearInterval(this.pollingInterval),!this.planningEvent?.id)return;let t=this.planningEvent.id;this.fetchLiveLocations(t),this.pollingInterval=setInterval(()=>{this.fetchLiveLocations(t)},15e3)}fetchLiveLocations(t){this.routeService.getLiveRouteLocations(t).subscribe({next:e=>{if(this.selectedRoute){let a=e.find(p=>p.routeId===this.selectedRoute.id);a&&a.latitude&&a.longitude?this.liveVehicleMarker={position:{lat:Number(a.latitude),lng:Number(a.longitude)},title:`Ubicaci\xF3n actual: ${this.selectedRoute.driverCode}`,icon:{url:"assets/icons/truck-icon.png",scaledSize:new google.maps.Size(40,40)},zIndex:999}:this.liveVehicleMarker=null}},error:e=>console.error("Error fetching live locations:",e)})}ngOnDestroy(){this.routeSubscription&&this.routeSubscription.unsubscribe(),this.pollingInterval&&clearInterval(this.pollingInterval)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=P({type:i,selectors:[["app-planning-event-detail-page"]],viewQuery:function(e,a){if(e&1&&j(fe,5),e&2){let p;U(p=G())&&(a.map=p.first)}},decls:3,vars:2,consts:[["loadingOrError",""],["noRouteSelected",""],["class","page-container",4,"ngIf","ngIfElse"],[1,"page-container"],[1,"page-header-card"],["mat-card-avatar","",1,"header-icon"],["align","end"],["mat-stroked-button","","routerLink","/planning-events",1,"btn-corp-primary"],[1,"detail-layout"],[1,"route-list-panel"],["mat-subheader",""],[3,"selected-route","click",4,"ngFor","ngForOf"],[1,"route-detail-panel"],[4,"ngIf","ngIfElse"],[3,"click"],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""],[1,"progress-summary"],["mode","determinate",3,"value"],[1,"map-container"],["height","400px","width","100%",3,"options"],[3,"options",4,"ngFor","ngForOf"],[3,"options",4,"ngIf"],[1,"timeline"],[1,"timeline-item"],[1,"timeline-icon","start"],[1,"timeline-content"],["class","timeline-item",4,"ngFor","ngForOf"],["class","timeline-item",4,"ngIf"],[3,"options"],[1,"timeline-connector"],[1,"timeline-icon",3,"ngClass"],[1,"stop-head"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"stop-details"],[1,"status-badge",3,"ngClass"],[1,"timeline-icon","end"],[4,"ngIf"],[1,"placeholder"]],template:function(e,a){if(e&1&&d(0,Xn,28,9,"div",2)(1,Wn,3,2,"ng-template",null,0,Me),e&2){let p=D(2);s("ngIf",a.planningEvent)("ngIfElse",p)}},dependencies:[x,A,V,B,y,K,Xe,nt,We,Ze,tt,Ke,et,Ye,Je,M,H,re,oe,It,ae,Ot,yt,St,se,le,Z,Y,b,_t,an,fe,tn,nn],styles:["[_nghost-%COMP%]{display:block;padding:24px}.page-header-card[_ngcontent-%COMP%]{margin-bottom:24px}.header-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background-color:#f0f0f0;margin-right:16px}.header-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;color:#3f51b5}.detail-layout[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px}.route-list-panel[_ngcontent-%COMP%]{flex:1 1 350px;min-width:300px}.route-detail-panel[_ngcontent-%COMP%]{flex:2 1 500px}.mat-list-item[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .3s ease;border-left:4px solid transparent;margin-bottom:8px;height:auto!important;padding-top:8px;padding-bottom:8px}.mat-list-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.selected-route[_ngcontent-%COMP%]{background-color:#e8eaf6;border-left-color:#3f51b5}.progress-summary[_ngcontent-%COMP%]{margin-top:8px;font-size:.8em;color:#666}.progress-summary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-bottom:4px}.placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;color:#999}.placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px}.timeline[_ngcontent-%COMP%]{position:relative;padding-left:30px}.timeline-item[_ngcontent-%COMP%]{position:relative;padding-bottom:20px}.timeline-connector[_ngcontent-%COMP%]{position:absolute;left:-16px;top:12px;width:2px;height:100%;background-color:#e0e0e0}.timeline-icon[_ngcontent-%COMP%]{position:absolute;left:-25px;top:0;width:24px;height:24px;border-radius:50%;background-color:#ccc;color:#fff;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;border:2px solid white;z-index:1}.timeline-icon.start[_ngcontent-%COMP%], .timeline-icon.end[_ngcontent-%COMP%]{width:32px;height:32px;left:-29px}.timeline-icon.start[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .timeline-icon.end[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.timeline-icon.start[_ngcontent-%COMP%]{background-color:#4caf50}.timeline-icon.end[_ngcontent-%COMP%]{background-color:#f44336}.timeline-content[_ngcontent-%COMP%]{padding-left:10px}.timeline-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;font-size:.9em;color:#666}.timeline-content[_ngcontent-%COMP%]   .stop-head[_ngcontent-%COMP%]{padding-left:10px;display:flex;flex-direction:column;gap:5px;font-size:.9em;color:#555;margin-bottom:8px}.timeline-content[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]{padding-left:10px;display:flex;flex-wrap:wrap;gap:8px;align-items:center}.timeline-content[_ngcontent-%COMP%]   .stop-details[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-weight:500}.status-registrado[_ngcontent-%COMP%]{background-color:#6610f2;color:#fff}.status-recogido[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff}.status-en-almacen[_ngcontent-%COMP%]{background-color:#0d6efd;color:#fff;white-space:nowrap}.status-en-transito[_ngcontent-%COMP%]{background-color:#0c1a77;color:#d0c8c8;white-space:nowrap}.status-entregado[_ngcontent-%COMP%]{background-color:#198754;color:#fff}.status-anulado[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;white-space:nowrap}.status-cancelado[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.status-rechazado-en-punto[_ngcontent-%COMP%]{background-color:#ff6b6b;color:#fff;white-space:nowrap}.status-reprogramado[_ngcontent-%COMP%]{background-color:#adb5bd;color:#212529}.status-badge[_ngcontent-%COMP%]{padding:5px 12px;border-radius:16px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;display:inline-flex;align-items:center;line-height:1}.map-container[_ngcontent-%COMP%]{height:400px;width:100%;margin-bottom:24px;border-radius:8px;overflow:hidden}"]})};var To=[{path:"",component:Pe},{path:":id",component:xe}];export{To as PLANNING_EVENTS_ROUTES};
