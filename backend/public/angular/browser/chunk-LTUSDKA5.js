import{b as R}from"./chunk-IGHOVLUL.js";import{a as T,b as k}from"./chunk-DZVI4T7F.js";import{a as W,b as N,c as z,h as F}from"./chunk-XDGTDGR7.js";import{i as E}from"./chunk-364TLEKQ.js";import{a as j,b as L}from"./chunk-2GO6OJT2.js";import"./chunk-UDFWBAUS.js";import"./chunk-G4NHAPTN.js";import{o as w,r as U}from"./chunk-VGKJ3OFK.js";import{$ as C,Ac as d,Bb as g,Cb as O,Ia as l,Mb as r,Ra as I,Ta as s,Xa as h,ab as m,gb as M,j as _,kb as D,la as u,lb as x,mb as S,pb as p,tb as o,ua as y,ub as a,va as v,vb as c,zb as P}from"./chunk-4AEMZGPD.js";var f=class n{constructor(t,i){this.dialogRef=t;this.data=i}onNoClick(){this.dialogRef.close()}static \u0275fac=function(i){return new(i||n)(h(W),h(N))};static \u0275cmp=m({type:n,selectors:[["app-image-dialog"]],decls:4,vars:2,consts:[[2,"width","100%","height","auto",3,"src","alt"],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(i,e){i&1&&(c(0,"img",0),o(1,"div",1)(2,"button",2),g("click",function(){return e.onNoClick()}),r(3,"Close"),a()()),i&2&&D("src",e.data.imageUrl,I)("alt",e.data.altText)},dependencies:[d,U,w],styles:["[_nghost-%COMP%]{display:block;max-width:80vw;max-height:80vh}"]})};function B(n,t){n&1&&(o(0,"div",1),c(1,"mat-progress-spinner",4),a())}function $(n,t){n&1&&(o(0,"div",2)(1,"mat-icon",5),r(2,"broken_image"),a(),o(3,"span",6),r(4,"No se pudo cargar la imagen"),a()())}function G(n,t){if(n&1){let i=P();o(0,"div",3)(1,"button",7),g("click",function(){y(i);let b=O();return v(b.openImageDialog())}),r(2," Ver Imagen "),a()()}}var A=class n{imageUrl;altText="Displayed image";containerHeight="100px";containerWidth="100%";objectFit="contain";enableSpinner=!0;enableErrorIcon=!0;isLoading=l(!1);hasError=l(!1);isLoaded=l(!1);processedImageUrl=l(null);settingsService=u(R);destroy$=new _;dialog=u(z);ngOnInit(){this.settingsService.loadSettings().pipe(C(this.destroy$)).subscribe({next:t=>{if(t.length){if(this.isLoaded.set(!1),this.hasError.set(!1),!t[0].rates_image_url){this.isLoading.set(!1),this.hasError.set(!0),this.processedImageUrl.set(null),console.warn("ImageDisplayComponent: imageUrl is null or undefined.");return}console.log("loadedSettings[0].rates_image_url",t[0].rates_image_url),this.processedImageUrl.set(t[0].rates_image_url),this.enableSpinner&&this.isLoading.set(!0),this.openImageDialog()}},error:t=>{console.log("err",t)}})}openImageDialog(){this.dialog.open(f,{data:{imageUrl:this.processedImageUrl(),altText:this.altText},panelClass:"image-dialog"})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=m({type:n,selectors:[["app-image-display"]],inputs:{imageUrl:"imageUrl",altText:"altText",containerHeight:"containerHeight",containerWidth:"containerWidth",objectFit:"objectFit",enableSpinner:"enableSpinner",enableErrorIcon:"enableErrorIcon"},decls:4,vars:13,consts:[[1,"image-container"],[1,"overlay","spinner-overlay"],[1,"overlay","error-overlay"],[1,"button-container"],["mode","indeterminate","diameter","40"],[1,"error-icon"],[1,"error-text"],["mat-stroked-button","","color","primary",1,"image-button",3,"click"]],template:function(i,e){i&1&&(o(0,"div",0),M(1,B,2,0,"div",1)(2,$,5,0,"div",2)(3,G,3,0,"div",3),a()),i&2&&(x("height",e.containerHeight)("width",e.containerWidth),S("loading",e.isLoading())("error",e.hasError())("loaded",e.isLoaded()),s(),p(e.isLoading()&&e.enableSpinner?1:-1),s(),p(e.hasError()&&e.enableErrorIcon&&!e.isLoading()?2:-1),s(),p(e.processedImageUrl()&&!e.hasError()?3:-1))},dependencies:[d,k,T,L,j,E,F],styles:[".image-button[_ngcontent-%COMP%]{font-size:1.2em;padding:.5em 1em;border-radius:5px;text-transform:uppercase;letter-spacing:1px}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.image-button[_ngcontent-%COMP%]{font-size:1.2em;padding:.5em 1em;border-radius:5px;text-transform:uppercase;letter-spacing:1px;background-color:#5f9ea0}[_nghost-%COMP%]{display:block}.image-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;overflow:hidden;border-radius:4px}.image-container.loaded[_ngcontent-%COMP%]{border-color:transparent;background-color:transparent}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.error-overlay[_ngcontent-%COMP%], .placeholder-overlay[_ngcontent-%COMP%]{text-align:center;padding:10px}.error-icon[_ngcontent-%COMP%], .placeholder-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:8px}.error-text[_ngcontent-%COMP%], .placeholder-text[_ngcontent-%COMP%]{font-size:.9em}"]})};export{A as ImageDisplayComponent};
