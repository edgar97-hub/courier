import{a as q,b as pt}from"./chunk-ECCLCXLB.js";import{a as dt,b as mt}from"./chunk-EYCX7D4K.js";import{a as rt}from"./chunk-CSWUMH3X.js";import{d as Ze,e as We}from"./chunk-A2GZCIHE.js";import{a as ct,b as st}from"./chunk-YSXPYM2V.js";import"./chunk-7RWCIHFI.js";import{C as Je,F as Ke,G as Ye,a as Le,b as Oe,c as De,d as E,f as Re,g as Ve,l as Ae,o as Ne,p as Ge,q as ze,r as Be,t as je,u as qe,v as $e,x as He,y as Xe,z as Qe}from"./chunk-I57H2NTY.js";import"./chunk-7SNYFGVH.js";import"./chunk-NTJKNPMM.js";import{a as Ce,b as Ie,d as Fe,f as Pe,g as Ee,i as Me}from"./chunk-ABVOVIA5.js";import{a as Te,b as Ue}from"./chunk-42JOKCMC.js";import"./chunk-QOYZNJPJ.js";import{a as it,b as at,e as nt}from"./chunk-JRHRK62N.js";import{l as et,m as tt}from"./chunk-J25GVFCX.js";import{Ab as de,Ba as ae,Bb as g,Cb as h,Cc as xe,Cd as j,Da as V,Db as me,Dd as ot,Eb as pe,Ed as lt,Gb as ue,Ha as ne,Ib as ge,Jb as he,Kb as _e,Ma as re,Nb as x,Ob as c,Pb as z,Qb as w,Ra as C,S as R,T as S,Ta as s,Xb as fe,a as T,aa as k,ab as U,b as J,bb as oe,ec as B,fd as ye,ga as Z,gb as f,h as K,hc as be,hd as ke,ia as W,ja as ee,jb as L,jc as F,kb as d,kc as ve,l as Y,ma as v,mb as A,nb as le,pb as I,rb as ce,sb as se,tb as r,td as Se,ua as te,ub as n,uc as we,va as p,vb as m,wa as u,wb as N,xa as ie,xb as G,zb as M}from"./chunk-NTZTTLCP.js";var bt=["switch"],vt=["*"];function wt(o,i){o&1&&(r(0,"span",10),ie(),r(1,"svg",12),m(2,"path",13),n(),r(3,"svg",14),m(4,"path",15),n()())}var xt=new ee("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),yt={provide:Le,useExisting:Z(()=>D),multi:!0},O=class{source;checked;constructor(i,e){this.source=i,this.checked=e}},D=(()=>{class o{_elementRef=v(ne);_focusMonitor=v(ye);_changeDetectorRef=v(be);defaults=v(xt);_onChange=e=>{};_onTouched=()=>{};_validatorOnChange=()=>{};_uniqueId;_checked=!1;_createChangeEvent(e){return new O(this,e)}_labelId;get buttonId(){return`${this.id||this._uniqueId}-button`}_switchElement;focus(){this._switchElement.nativeElement.focus()}_noopAnimations;_focused;name=null;id;labelPosition="after";ariaLabel=null;ariaLabelledby=null;ariaDescribedby;required;color;disabled=!1;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}hideIcon;disabledInteractive;change=new V;toggleChange=new V;get inputId(){return`${this.id||this._uniqueId}-input`}constructor(){v(ke).load(tt);let e=v(new ae("tabindex"),{optional:!0}),t=this.defaults,a=v(re,{optional:!0});this.tabIndex=e==null?0:parseInt(e)||0,this.color=t.color||"accent",this._noopAnimations=a==="NoopAnimations",this.id=this._uniqueId=v(Se).getId("mat-mdc-slide-toggle-"),this.hideIcon=t.hideIcon??!1,this.disabledInteractive=t.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new O(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=U({type:o,selectors:[["mat-slide-toggle"]],viewQuery:function(t,a){if(t&1&&ge(bt,5),t&2){let l;he(l=_e())&&(a._switchElement=l.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(t,a){t&2&&(de("id",a.id),L("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),le(a.color?"mat-"+a.color:""),A("mat-mdc-slide-toggle-focused",a._focused)("mat-mdc-slide-toggle-checked",a.checked)("_mat-animation-noopable",a._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",F],color:"color",disabled:[2,"disabled","disabled",F],disableRipple:[2,"disableRipple","disableRipple",F],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:ve(e)],checked:[2,"checked","checked",F],hideIcon:[2,"hideIcon","hideIcon",F],disabledInteractive:[2,"disabledInteractive","disabledInteractive",F]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[fe([yt,{provide:De,useExisting:o,multi:!0}]),te],ngContentSelectors:vt,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(t,a){if(t&1){let l=M();me(),r(0,"div",1)(1,"button",2,0),g("click",function(){return p(l),u(a._handleClick())}),m(3,"span",3),r(4,"span",4)(5,"span",5)(6,"span",6),m(7,"span",7),n(),r(8,"span",8),m(9,"span",9),n(),f(10,wt,5,0,"span",10),n()()(),r(11,"label",11),g("click",function(y){return p(l),u(y.stopPropagation())}),pe(12),n()()}if(t&2){let l=x(2);d("labelPosition",a.labelPosition),s(),A("mdc-switch--selected",a.checked)("mdc-switch--unselected",!a.checked)("mdc-switch--checked",a.checked)("mdc-switch--disabled",a.disabled)("mat-mdc-slide-toggle-disabled-interactive",a.disabledInteractive),d("tabIndex",a.disabled&&!a.disabledInteractive?-1:a.tabIndex)("disabled",a.disabled&&!a.disabledInteractive),L("id",a.buttonId)("name",a.name)("aria-label",a.ariaLabel)("aria-labelledby",a._getAriaLabelledBy())("aria-describedby",a.ariaDescribedby)("aria-required",a.required||null)("aria-checked",a.checked)("aria-disabled",a.disabled&&a.disabledInteractive?"true":null),s(8),d("matRippleTrigger",l)("matRippleDisabled",a.disableRipple||a.disabled)("matRippleCentered",!0),s(),I(a.hideIcon?-1:10),s(),d("for",a.buttonId),L("id",a._labelId)}},dependencies:[et,rt],styles:[`.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width, 52px)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height, 32px);border-radius:var(--mdc-switch-track-shape, var(--mat-sys-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width, 2px);border-color:var(--mat-switch-track-outline-color, var(--mat-sys-outline))}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width, 2px);border-color:var(--mat-switch-selected-track-outline-color, transparent)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width, 2px);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-sys-on-surface))}@media(forced-colors: active){.mdc-switch__track{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-sys-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-sys-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-sys-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-sys-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-sys-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size, 16px);height:var(--mat-switch-unselected-handle-size, 16px);margin:var(--mat-switch-unselected-handle-horizontal-margin, 0 8px)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin, 0 4px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size, 24px);height:var(--mat-switch-selected-handle-size, 24px);margin:var(--mat-switch-selected-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size, 24px);height:var(--mat-switch-with-icon-handle-size, 24px)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size, 28px);height:var(--mat-switch-pressed-handle-size, 28px)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin, 0 22px)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin, 0 2px)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity, 1)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity, 0.38)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media(forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-sys-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-sys-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-sys-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-sys-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-sys-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size, 40px);height:var(--mdc-switch-state-layer-size, 40px)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-sys-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1;transform:translateZ(0)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 16px);height:var(--mdc-switch-unselected-icon-size, 16px);fill:var(--mdc-switch-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 16px);height:var(--mdc-switch-selected-icon-size, 16px);fill:var(--mdc-switch-selected-icon-color, var(--mat-sys-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-sys-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}
`],encapsulation:2,changeDetection:0})}return o})();var ut=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=oe({type:o});static \u0275inj=W({imports:[D,j,j]})}return o})();var _=[];for(let o=0;o<256;++o)_.push((o+256).toString(16).slice(1));function gt(o,i=0){return(_[o[i+0]]+_[o[i+1]]+_[o[i+2]]+_[o[i+3]]+"-"+_[o[i+4]]+_[o[i+5]]+"-"+_[o[i+6]]+_[o[i+7]]+"-"+_[o[i+8]]+_[o[i+9]]+"-"+_[o[i+10]]+_[o[i+11]]+_[o[i+12]]+_[o[i+13]]+_[o[i+14]]+_[o[i+15]]).toLowerCase()}var $,St=new Uint8Array(16);function H(){if(!$){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");$=crypto.getRandomValues.bind(crypto)}return $(St)}var Ct=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),X={randomUUID:Ct};function It(o,i,e){if(X.randomUUID&&!i&&!o)return X.randomUUID();o=o||{};let t=o.random??o.rng?.()??H();if(t.length<16)throw new Error("Random bytes length must be >= 16");if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,i){if(e=e||0,e<0||e+16>i.length)throw new RangeError(`UUID byte range ${e}:${e+15} is out of buffer bounds`);for(let a=0;a<16;++a)i[e+a]=t[a];return i}return gt(t)}var Q=It;function Ft(o,i){let e;return(e=i.get("id"))==null?null:e.value}function Pt(o,i){o&1&&(r(0,"div",12),m(1,"mat-progress-spinner",13),n())}function Et(o,i){o&1&&(r(0,"mat-error"),c(1," Se requiere el nombre de la empresa. "),n())}function Mt(o,i){o&1&&(r(0,"mat-error"),c(1," Se requiere el ruc. "),n())}function Tt(o,i){if(o&1&&(N(0),c(1," Archivo actual: "),r(2,"a",49),c(3),n(),G()),o&2){let e=h(2);s(2),d("href",e.currentExcelImportTemplateUrl,C),s(),z(e.currentExcelImportTemplateUrl.split("/").pop()||"View Terms")}}function Ut(o,i){o&1&&(r(0,"span",50),c(1,"A\xFAn no se ha cargado ning\xFAn archivo."),n())}function Lt(o,i){o&1&&(r(0,"p",32),c(1," Sube un archivo "),n())}function Ot(o,i){if(o&1&&(r(0,"p",32),c(1),n()),o&2){let e=h(2);s(),w(" Selected: ",e.selectedExcelImportTemplateFile.name," ")}}function Dt(o,i){if(o&1&&(N(0),c(1," Archivo actual: "),r(2,"a",49),c(3),n(),G()),o&2){let e=h(2);s(2),d("href",e.currentTermsUrl,C),s(),z(e.currentTermsUrl.split("/").pop()||"View Terms")}}function Rt(o,i){o&1&&(r(0,"span",50),c(1,"A\xFAn no se ha cargado ning\xFAn PDF de T\xE9rminos y Condiciones."),n())}function Vt(o,i){o&1&&(r(0,"p",32),c(1," Sube un archivo PDF con tus t\xE9rminos y condiciones. "),n())}function At(o,i){if(o&1&&(r(0,"p",32),c(1),n()),o&2){let e=h(2);s(),w(" Selected: ",e.selectedTermsFile.name," ")}}function Nt(o,i){o&1&&(r(0,"p",59),c(1),n()),o&2&&(s(),w(" Seleccionado: ",i.name," "))}function Gt(o,i){o&1&&(r(0,"mat-error"),c(1,"Ingrese una URL v\xE1lida (ej. http:// o https://)."),n())}function zt(o,i){o&1&&(r(0,"mat-error"),c(1,"M\xE1ximo 30 caracteres."),n())}function Bt(o,i){o&1&&m(0,"mat-divider",63)}function jt(o,i){if(o&1){let e=M();r(0,"mat-card",51)(1,"mat-card-header",52)(2,"mat-card-title"),c(3),n(),r(4,"button",53),g("click",function(){let a=p(e).$index,l=h(2);return u(l.removePromotionalSet(a))}),r(5,"mat-icon"),c(6,"delete_outline"),n()()(),r(7,"mat-card-content"),m(8,"input",54),r(9,"div",55)(10,"p",56),c(11,"Imagen del Conjunto"),n(),r(12,"div",57),m(13,"img",58),n(),r(14,"input",30,7),g("change",function(a){let l=p(e).$index,b=h(2);return u(b.onPromotionalSetFileSelected(a,l))}),n(),r(16,"button",31),g("click",function(){p(e);let a=x(15);return u(a.click())}),r(17,"mat-icon"),c(18,"cloud_upload"),n(),c(19),n(),f(20,Nt,2,1,"p",59),n(),r(21,"mat-form-field",16)(22,"mat-label"),c(23,"Enlace (URL)"),n(),m(24,"input",60),r(25,"mat-icon",18),c(26,"link"),n(),f(27,Gt,2,0,"mat-error"),n(),r(28,"mat-form-field",16)(29,"mat-label"),c(30,"Texto del Bot\xF3n"),n(),m(31,"input",61),f(32,zt,2,0,"mat-error"),n(),r(33,"mat-slide-toggle",62),c(34," Activo "),n()()(),f(35,Bt,1,0,"mat-divider",63)}if(o&2){let e,t,a,l,b,y=i.$implicit,P=i.$index,_t=i.$count;d("formGroupName",P),s(3),w("Conjunto ",P+1,""),s(10),ue("alt","Vista previa de imagen del conjunto ",P+1,""),d("src",((e=y.get("imagePreviewUrl"))==null?null:e.value)||"assets/images/placeholder-image.png",C),s(6),w(" ",(t=y.get("imageFile"))!=null&&t.value?"Cambiar Imagen":"Subir Imagen"," "),s(),I((a=(a=y.get("imageFile"))==null?null:a.value)?20:-1,a),s(7),I((l=y.get("linkUrl"))!=null&&l.hasError("pattern")?27:-1),s(5),I((b=y.get("buttonText"))!=null&&b.hasError("maxlength")?32:-1),s(3),I(P!==_t-1?35:-1)}}function qt(o,i){if(o&1){let e=M();r(0,"mat-card",14)(1,"mat-card-content")(2,"form",15),g("ngSubmit",function(){p(e);let a=h();return u(a.onSaveSettings())}),r(3,"h2"),c(4,"Nombre del negocio"),n(),r(5,"mat-form-field",16)(6,"mat-label"),c(7,"Nombre de la empresa"),n(),m(8,"input",17),r(9,"mat-icon",18),c(10,"storefront"),n(),f(11,Et,2,0,"mat-error",19),n(),r(12,"mat-form-field",16)(13,"mat-label"),c(14,"RUC"),n(),m(15,"input",20),f(16,Mt,2,0,"mat-error",19),n(),r(17,"mat-form-field",16)(18,"mat-label"),c(19,"Direcci\xF3n"),n(),m(20,"input",21),n(),r(21,"div",22)(22,"mat-form-field",23)(23,"mat-label"),c(24,"Telefono"),n(),m(25,"input",24),r(26,"mat-icon",18),c(27,"phone"),n()()(),r(28,"mat-form-field",16)(29,"mat-label"),c(30,"Enlace del mapa de cobertura"),n(),m(31,"input",25),n(),r(32,"h2"),c(33,"Marca y aspectos legales"),n(),r(34,"div",26)(35,"p",27),c(36,"Logotipo de empresa"),n(),r(37,"div",28),m(38,"img",29),n(),r(39,"input",30,0),g("change",function(a){p(e);let l=h();return u(l.onLogoFileSelected(a))}),n(),r(41,"button",31),g("click",function(){p(e);let a=x(40);return u(a.click())}),r(42,"mat-icon"),c(43,"cloud_upload"),n(),c(44),n(),r(45,"p",32),c(46,"Recomendado: PNG, JPG, SVG. Max 2MB."),n()(),r(47,"div",26)(48,"p",27),c(49,"Imagen de fondo"),n(),r(50,"div",28),m(51,"img",33),n(),r(52,"input",30,1),g("change",function(a){p(e);let l=h();return u(l.onLogoFileSelected3(a))}),n(),r(54,"button",31),g("click",function(){p(e);let a=x(53);return u(a.click())}),r(55,"mat-icon"),c(56,"cloud_upload"),n(),c(57),n(),r(58,"p",32),c(59,"Recomendado: PNG, JPG, SVG. Max 2MB."),n()(),r(60,"div",26)(61,"p",27),c(62,"imagen de las tarifas"),n(),r(63,"div",28),m(64,"img",34),n(),r(65,"input",30,2),g("change",function(a){p(e);let l=h();return u(l.onLogoFileSelected4(a))}),n(),r(67,"button",31),g("click",function(){p(e);let a=x(66);return u(a.click())}),r(68,"mat-icon"),c(69,"cloud_upload"),n(),c(70),n(),r(71,"p",32),c(72,"Recomendado: PNG, JPG, SVG. Max 2MB."),n()(),r(73,"div",35)(74,"p",27),c(75," Plantilla de Excel para importaci\xF3n "),n(),r(76,"div",36),f(77,Tt,4,2,"ng-container",37)(78,Ut,2,0,"ng-template",null,3,B),n(),r(80,"input",38,4),g("change",function(a){p(e);let l=h();return u(l.onLogoFileSelected5(a))}),n(),r(82,"button",31),g("click",function(){p(e);let a=x(81);return u(a.click())}),r(83,"mat-icon"),c(84,"cloud_upload"),n(),c(85),n(),f(86,Lt,2,0,"p",39)(87,Ot,2,1,"p",39),n(),r(88,"div",35)(89,"p",27),c(90," T\xE9rminos y condiciones (PDF) "),n(),r(91,"div",36),f(92,Dt,4,2,"ng-container",37)(93,Rt,2,0,"ng-template",null,3,B),n(),r(95,"input",40,5),g("change",function(a){p(e);let l=h();return u(l.onTermsFileSelected(a))}),n(),r(97,"button",31),g("click",function(){p(e);let a=x(96);return u(a.click())}),r(98,"mat-icon"),c(99,"cloud_upload"),n(),c(100),n(),f(101,Vt,2,0,"p",39)(102,At,2,1,"p",39),n(),r(103,"div",26)(104,"p",27),c(105,"imagen para avisos globales"),n(),r(106,"div",28),m(107,"img",41),n(),r(108,"input",30,6),g("change",function(a){p(e);let l=h();return u(l.onLogoFileSelected6(a))}),n(),r(110,"button",31),g("click",function(){p(e);let a=x(109);return u(a.click())}),r(111,"mat-icon"),c(112,"cloud_upload"),n(),c(113),n(),r(114,"p",32),c(115,"Recomendado: PNG, JPG, SVG. Max 2MB."),n()(),m(116,"mat-divider",42),r(117,"div",43)(118,"h2"),c(119,"Conjuntos Promocionales/Banners (M\xE1x. 3)"),n(),r(120,"button",44),g("click",function(){p(e);let a=h();return u(a.addPromotionalSet())}),r(121,"mat-icon"),c(122,"add_circle_outline"),n(),c(123," A\xF1adir Conjunto "),n()(),r(124,"div",45),ce(125,jt,36,10,null,null,Ft),n(),r(127,"mat-card-actions",46)(128,"button",47),g("click",function(){p(e);let a=h();return u(a.onDiscardChanges())}),c(129," Descartar cambios "),n(),r(130,"button",48)(131,"mat-icon"),c(132,"save"),n(),c(133),n()()()()()}if(o&2){let e,t,a=x(79),l=h();s(2),d("formGroup",l.settingsForm),s(9),d("ngIf",(e=l.settingsForm.get("business_name"))==null?null:e.hasError("required")),s(5),d("ngIf",(t=l.settingsForm.get("ruc"))==null?null:t.hasError("required")),s(22),d("src",l.logoPreviewUrl,C),s(6),w(" ",l.selectedLogoFile?"Cambiar Logo ("+l.selectedLogoFile.name+")":"Subir nuevo logotipo"," "),s(7),d("src",l.backgroundImagePreviewUrl,C),s(6),w(" ",l.selectedBackgroundImageFile?"Change imagen ("+l.selectedBackgroundImageFile.name+")":"Subir nueva imagen"," "),s(7),d("src",l.ratesImagePreviewUrl,C),s(6),w(" ",l.selectedRatesImageFile?"Cambiar imagen ("+l.selectedRatesImageFile.name+")":"Subir nueva imagen"," "),s(7),d("ngIf",l.currentExcelImportTemplateUrl)("ngIfElse",a),s(8),w(" ",l.selectedExcelImportTemplateFile?"Cambiar archivo ("+l.selectedExcelImportTemplateFile.name+")":"Subir nuevo archivo"," "),s(),d("ngIf",!l.selectedExcelImportTemplateFile),s(),d("ngIf",l.selectedExcelImportTemplateFile),s(5),d("ngIf",l.currentTermsUrl)("ngIfElse",a),s(8),w(" ",l.selectedTermsFile?"Cambiar PDF ("+l.selectedTermsFile.name+")":"Subir nuevo PDF"," "),s(),d("ngIf",!l.selectedTermsFile),s(),d("ngIf",l.selectedTermsFile),s(5),d("src",l.globalNoticeImagePreviewUrl,C),s(6),w(" ",l.selectedGlobalNoticeImageFile?"Cambiar imagen ("+l.selectedGlobalNoticeImageFile.name+")":"Subir nueva imagen"," "),s(7),d("disabled",l.promotionalSetsFormArray.length>=3),s(5),se(l.promotionalSetsFormArray.controls),s(3),d("disabled",l.isSaving||!l.settingsForm.dirty),s(2),d("disabled",l.isSaving||l.settingsForm.invalid||!l.settingsForm.dirty),s(3),w(" ",l.isSaving?"Guardando...":"Guardar configuracion"," ")}}var ht=class o{fb=v($e);settingsService=v(pt);snackBar=v(ct);settingsForm;isLoadingInitialData=!0;isSaving=!1;currentLogoUrl=null;selectedLogoFile=null;logoPreviewUrl=null;currentBackgroundImageUrl=null;selectedBackgroundImageFile=null;backgroundImagePreviewUrl=null;currentRatesImageUrl=null;selectedRatesImageFile=null;ratesImagePreviewUrl=null;currentExcelImportTemplateUrl=null;selectedExcelImportTemplateFile=null;currentTermsUrl=null;selectedTermsFile=null;currentGlobalNoticeImageUrl=null;selectedGlobalNoticeImageFile=null;globalNoticeImagePreviewUrl=null;destroy$=new Y;get promotionalSetsFormArray(){return this.settingsForm.get("promotional_sets")}ngOnInit(){this.buildForm(q),this.loadCurrentSettings()}buildForm(i){this.settingsForm=this.fb.group({id:[i.id],business_name:[i.business_name,E.required],ruc:[i.ruc,E.required],address:[i.address],phone_number:[i.phone_number],logo_url:[i.logo_url],terms_conditions_url:[i.terms_conditions_url],global_notice_image_url:[i.global_notice_image_url],background_image_url:[i.background_image_url],rates_image_url:[i.rates_image_url],coverage_map_url:[i.coverage_map_url],promotional_sets:this.fb.array(i.promotional_sets.map(e=>this.createPromotionalSetGroup(e)))}),this.currentLogoUrl=i.logo_url,this.logoPreviewUrl=i.logo_url,this.currentBackgroundImageUrl=i.background_image_url,this.backgroundImagePreviewUrl=i.background_image_url,this.currentRatesImageUrl=i.rates_image_url,this.ratesImagePreviewUrl=i.rates_image_url,this.currentExcelImportTemplateUrl=i.excel_import_template_url,this.currentTermsUrl=i.terms_conditions_url,this.currentGlobalNoticeImageUrl=i.global_notice_image_url,this.globalNoticeImagePreviewUrl=i.global_notice_image_url,this.promotionalSetsFormArray.controls.forEach((e,t)=>{let a=i.promotional_sets[t];a&&e&&(e.addControl("imagePreviewUrl",this.fb.control(a.imageUrl)),e.addControl("imageFile",this.fb.control(null)))})}loadCurrentSettings(){this.isLoadingInitialData=!0,this.settingsService.loadSettings().pipe(k(this.destroy$),R(()=>this.isLoadingInitialData=!1)).subscribe({next:i=>{let e=i&&i.length>0?i[0]:q;this.promotionalSetsFormArray.clear(),(e.promotional_sets||[]).forEach(t=>{this.promotionalSetsFormArray.push(this.createPromotionalSetGroup(t))}),this.settingsForm.patchValue(J(T({},e),{promotional_sets:[]})),this.currentLogoUrl=e.logo_url,this.logoPreviewUrl=e.logo_url,this.currentBackgroundImageUrl=e.background_image_url,this.backgroundImagePreviewUrl=e.background_image_url,this.currentRatesImageUrl=e.rates_image_url,this.ratesImagePreviewUrl=e.rates_image_url,this.currentExcelImportTemplateUrl=e.excel_import_template_url,this.currentTermsUrl=e.terms_conditions_url,this.currentGlobalNoticeImageUrl=e.global_notice_image_url,this.globalNoticeImagePreviewUrl=e.global_notice_image_url},error:i=>{this.snackBar.open("No se pudo cargar la configuraci\xF3n actual. Int\xE9ntalo de nuevo.","Close",{duration:5e3,panelClass:["error-snackbar"],verticalPosition:"top"})}})}hasPendingFileUploads(){if(this.selectedLogoFile||this.selectedBackgroundImageFile||this.selectedTermsFile||this.selectedGlobalNoticeImageFile||this.selectedExcelImportTemplateFile)return!0;for(let i of this.promotionalSetsFormArray.controls)if(i.get("imageFile")?.value)return!0;return!1}createPromotionalSetGroup(i=null){let e=i?.id||Q();return this.fb.group({id:[e,E.required],imageUrl:[i?.imageUrl||null],linkUrl:[i?.linkUrl||null,[E.pattern("https?://.+")]],buttonText:[i?.buttonText||null,[E.maxLength(30)]],isActive:[i?.isActive===void 0?!0:i.isActive],order:[i?.order||0],imageFile:[null],imagePreviewUrl:[i?.imageUrl||null]})}addPromotionalSet(){if(this.promotionalSetsFormArray.length<3){let i=this.createPromotionalSetGroup();this.promotionalSetsFormArray.push(i),this.settingsForm.markAsDirty()}else this.snackBar.open("Se permite un m\xE1ximo de 3 conjuntos promocionales.","OK",{duration:3e3,verticalPosition:"top"})}removePromotionalSet(i){this.promotionalSetsFormArray.removeAt(i),this.settingsForm.markAsDirty()}onPromotionalSetFileSelected(i,e){let a=i.target.files,l=this.promotionalSetsFormArray.at(e);if(a&&a.length>0){let b=a[0];l.patchValue({imageFile:b});let y=new FileReader;y.onload=P=>{l.patchValue({imagePreviewUrl:P.target.result})},y.readAsDataURL(b),this.settingsForm.markAsDirty()}else l.patchValue({imageFile:null,imagePreviewUrl:l.get("imageUrl")?.value||null})}onLogoFileSelected(i){let t=i.target.files;if(t&&t.length>0){this.selectedLogoFile=t[0];let a=new FileReader;a.onload=l=>{this.logoPreviewUrl=l.target.result},a.readAsDataURL(this.selectedLogoFile),this.settingsForm.get("logo_url")?.markAsDirty()}else this.selectedLogoFile=null,this.logoPreviewUrl=this.currentLogoUrl}onLogoFileSelected3(i){let t=i.target.files;if(t&&t.length>0){this.selectedBackgroundImageFile=t[0];let a=new FileReader;a.onload=l=>{this.backgroundImagePreviewUrl=l.target.result},a.readAsDataURL(this.selectedBackgroundImageFile),this.settingsForm.get("background_image_url")?.markAsDirty()}else this.selectedBackgroundImageFile=null,this.backgroundImagePreviewUrl=this.currentBackgroundImageUrl}onLogoFileSelected4(i){let t=i.target.files;if(t&&t.length>0){this.selectedRatesImageFile=t[0];let a=new FileReader;a.onload=l=>{this.ratesImagePreviewUrl=l.target.result},a.readAsDataURL(this.selectedRatesImageFile),this.settingsForm.get("rates_image_url")?.markAsDirty()}else this.selectedRatesImageFile=null,this.ratesImagePreviewUrl=this.currentRatesImageUrl}onLogoFileSelected5(i){let t=i.target.files;t&&t.length>0?(this.selectedExcelImportTemplateFile=t[0],this.settingsForm.get("terms_conditions_url")?.markAsDirty()):this.selectedExcelImportTemplateFile=null}onLogoFileSelected6(i){let t=i.target.files;if(t&&t.length>0){this.selectedGlobalNoticeImageFile=t[0];let a=new FileReader;a.onload=l=>{this.globalNoticeImagePreviewUrl=l.target.result},a.readAsDataURL(this.selectedGlobalNoticeImageFile),this.settingsForm.get("global_notice_image_url")?.markAsDirty()}else this.selectedGlobalNoticeImageFile=null,this.globalNoticeImagePreviewUrl=this.currentGlobalNoticeImageUrl}onTermsFileSelected(i){let t=i.target.files;t&&t.length>0?(this.selectedTermsFile=t[0],this.settingsForm.get("terms_conditions_url")?.markAsDirty(),console.log("Terms PDF selected:",this.selectedTermsFile.name)):this.selectedTermsFile=null}onSaveSettings(){return K(this,null,function*(){if(this.settingsForm.invalid){this.snackBar.open("Por favor corrija cualquier error en el formulario.","Close",{duration:3e3,panelClass:["error-snackbar"]}),this.settingsForm.markAllAsTouched();return}this.isSaving=!0;let i=T({},this.settingsForm.value),e=[];for(let t=0;t<this.promotionalSetsFormArray.length;t++){let a=this.promotionalSetsFormArray.at(t),l=T({},a.value);if(l.imageFile)try{let b=yield this.settingsService.uploadFile(l.imageFile).pipe(S(),k(this.destroy$)).toPromise();l.imageUrl=b?.file_url||l.imageUrl}catch(b){console.error(`Error uploading promotional set image ${t+1}:`,b),this.snackBar.open(`Error al cargar imagen del conjunto ${t+1}.`,"OK",{duration:3e3,verticalPosition:"top",panelClass:["error-snackbar"]})}delete l.imageFile,delete l.imagePreviewUrl,e.push(l)}if(i.promotional_sets=e,this.selectedLogoFile)try{let t=yield this.settingsService.uploadFile(this.selectedLogoFile).pipe(S(),k(this.destroy$)).toPromise();if(t?.file_url)i.logo_url=t.file_url;else throw new Error("Logo URL not returned from upload.")}catch(t){console.error("Logo upload failed:",t),this.snackBar.open("Error al cargar el logotipo. No se guardaron los ajustes.","Close",{duration:4e3,panelClass:["error-snackbar"],verticalPosition:"top"}),this.isSaving=!1;return}if(this.selectedBackgroundImageFile)try{let t=yield this.settingsService.uploadFile(this.selectedBackgroundImageFile).pipe(S(),k(this.destroy$)).toPromise();if(t?.file_url)i.background_image_url=t.file_url;else throw new Error("Logo URL not returned from upload.")}catch(t){console.error("Logo upload failed:",t),this.snackBar.open("Error al cargar el logotipo. No se guardaron los ajustes.","Close",{duration:4e3,panelClass:["error-snackbar"],verticalPosition:"top"}),this.isSaving=!1;return}if(this.selectedRatesImageFile)try{let t=yield this.settingsService.uploadFile(this.selectedRatesImageFile).pipe(S(),k(this.destroy$)).toPromise();if(t?.file_url)i.rates_image_url=t.file_url;else throw new Error("Logo URL not returned from upload.")}catch(t){console.error("Logo upload failed:",t),this.snackBar.open("Error al cargar el logotipo. No se guardaron los ajustes.","Close",{duration:4e3,panelClass:["error-snackbar"],verticalPosition:"top"}),this.isSaving=!1;return}if(this.selectedExcelImportTemplateFile)try{let t=yield this.settingsService.uploadFile(this.selectedExcelImportTemplateFile).pipe(S(),k(this.destroy$)).toPromise();if(t?.file_url)i.excel_import_template_url=t.file_url;else throw new Error("Logo URL not returned from upload.")}catch(t){console.error("Logo upload failed:",t),this.snackBar.open("Error al cargar el logotipo. No se guardaron los ajustes.","Close",{duration:4e3,panelClass:["error-snackbar"],verticalPosition:"top"}),this.isSaving=!1;return}if(this.selectedTermsFile)try{let t=yield this.settingsService.uploadFile(this.selectedTermsFile).pipe(S(),k(this.destroy$)).toPromise();if(t?.file_url)i.terms_conditions_url=t.file_url;else throw new Error("Terms & Conditions URL not returned from PDF upload.")}catch(t){console.error("Terms PDF upload failed:",t),this.snackBar.open("Terms & Conditions PDF upload failed. Settings not saved.","Close",{duration:4e3,panelClass:["error-snackbar"],verticalPosition:"top"}),this.isSaving=!1;return}if(this.selectedGlobalNoticeImageFile)try{let t=yield this.settingsService.uploadFile(this.selectedGlobalNoticeImageFile).pipe(S(),k(this.destroy$)).toPromise();if(t?.file_url)i.global_notice_image_url=t.file_url;else throw new Error("Logo URL not returned from upload.")}catch(t){console.error("Logo upload failed:",t),this.snackBar.open("Error al cargar el logotipo. No se guardaron los ajustes.","Close",{duration:4e3,panelClass:["error-snackbar"],verticalPosition:"top"}),this.isSaving=!1;return}this.settingsService.saveSettings(i).pipe(k(this.destroy$),R(()=>this.isSaving=!1)).subscribe({next:t=>{this.snackBar.open("\xA1Configuraci\xF3n guardada exitosamente!","OK",{duration:3e3,verticalPosition:"top",panelClass:["success-snackbar"]}),this.buildForm(t),this.settingsForm.markAsPristine(),this.selectedLogoFile=null,this.selectedBackgroundImageFile=null,this.selectedRatesImageFile=null,this.selectedExcelImportTemplateFile=null,this.selectedTermsFile=null,this.selectedGlobalNoticeImageFile=null},error:t=>{this.snackBar.open("No se pudo guardar la configuraci\xF3n. Int\xE9ntalo de nuevo.","Retry",{duration:5e3,verticalPosition:"top",panelClass:["error-snackbar"]})}})})}onDiscardChanges(){this.loadCurrentSettings(),this.snackBar.open("Cambios descartados.","OK",{duration:2e3,verticalPosition:"top"})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=U({type:o,selectors:[["app-settings-page"]],decls:6,vars:2,consts:[["logoUploadInput",""],["logoUploadInput3",""],["logoUploadInput4",""],["noTermsFile",""],["termsUploadInput2",""],["termsUploadInput",""],["logoUploadInput6",""],["promoSetUploadInput",""],[1,"page-container","settings-container"],[1,"page-header"],["class","spinner-overlay",4,"ngIf"],["class","settings-card",4,"ngIf"],[1,"spinner-overlay"],["mode","indeterminate","diameter","60"],[1,"settings-card"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","business_name","required",""],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","ruc","required",""],["matInput","","formControlName","address"],[1,"form-row"],["appearance","outline",1,"flex-field"],["matInput","","formControlName","phone_number"],["matInput","","formControlName","coverage_map_url"],[1,"logo-section","file-upload-section"],[1,"mat-body-1","section-subtitle"],[1,"logo-preview-container"],["alt","Vista previa del logotipo",1,"logo-preview",3,"src"],["type","file","accept","image/png, image/jpeg, image/svg+xml",2,"display","none",3,"change"],["mat-stroked-button","","type","button",1,"upload-button","btn-corp-secondary",3,"click"],[1,"mat-caption","hint"],["alt","Vista previa del imagen de fondo",1,"logo-preview",3,"src"],["alt","Vista previa del imagen de las tarifas",1,"logo-preview",3,"src"],[1,"terms-pdf-section","file-upload-section"],[1,"current-file-info"],[4,"ngIf","ngIfElse"],["type","file",2,"display","none",3,"change"],["class","mat-caption hint",4,"ngIf"],["type","file","accept","application/pdf",2,"display","none",3,"change"],["alt","Vista previa de imagen para avisos globales",1,"logo-preview",3,"src"],[1,"section-divider"],[1,"section-header-with-action"],["mat-stroked-button","","type","button",1,"btn-corp-primary",3,"click","disabled"],["formArrayName","promotional_sets"],["align","end",1,"form-actions"],["mat-stroked-button","","type","button",1,"btn-corp-secondary",3,"click","disabled"],["mat-flat-button","","type","submit",1,"btn-corp-primary",3,"disabled"],["target","_blank",1,"file-link",3,"href"],[1,"no-file-text"],["appearance","outlined",1,"promotional-set-item",3,"formGroupName"],[1,"item-header"],["mat-icon-button","","color","warn","type","button","matTooltip","Eliminar este conjunto",3,"click"],["type","hidden","formControlName","id"],[1,"file-upload-section","compact-upload"],[1,"mat-body-1"],[1,"logo-preview-container","small-preview"],[1,"logo-preview",3,"src","alt"],[1,"mat-caption","hint","selected-file-name"],["matInput","","formControlName","linkUrl","placeholder","https://ejemplo.com/oferta"],["matInput","","formControlName","buttonText","placeholder","Ej: Ver M\xE1s, Comprar Ahora","maxlength","30"],["formControlName","isActive","color","primary",1,"is-active-toggle"],[1,"item-divider"]],template:function(e,t){e&1&&(r(0,"div",8)(1,"div",9)(2,"h1"),c(3,"Configuraci\xF3n de la aplicaci\xF3n"),n()(),f(4,Pt,2,0,"div",10)(5,qt,134,25,"mat-card",11),n()),e&2&&(s(4),d("ngIf",t.isLoadingInitialData),s(),d("ngIf",!t.isLoadingInitialData&&t.settingsForm))},dependencies:[xe,we,He,Ae,Oe,Re,Ve,je,qe,Ne,Be,Ge,ze,Me,Ce,Pe,Fe,Ee,Ie,Ye,Ke,Xe,Qe,Je,We,Ze,nt,at,it,lt,ot,st,Ue,Te,mt,dt,ut,D],styles:[".page-container[_ngcontent-%COMP%]{padding:24px}.settings-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2em;font-weight:500;color:var(--mat-toolbar-standard-title-text-color, #333)}.spinner-overlay[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#ffffffb3;z-index:1000}h2[_ngcontent-%COMP%]{font-size:1.5em;margin-top:24px;margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid rgba(0,0,0,.12);color:var(--mat-card-title-text-color, #333);font-weight:400}h2[_ngcontent-%COMP%]:first-of-type{margin-top:0}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.form-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:20px}.form-row[_ngcontent-%COMP%]   .flex-field[_ngcontent-%COMP%]{flex:1}.logo-section[_ngcontent-%COMP%]{margin-bottom:24px;padding:16px;border:1px solid #e0e0e0;border-radius:4px;background-color:#fafafa}.logo-section[_ngcontent-%COMP%]   .mat-body-1[_ngcontent-%COMP%]{font-weight:500;margin-bottom:12px}.logo-preview-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:16px;min-height:120px}.logo-preview[_ngcontent-%COMP%]{max-width:200px;max-height:100px;object-fit:contain;border:1px solid #ccc;border-radius:4px;background-color:#fff;padding:5px}.hint[_ngcontent-%COMP%]{display:block;text-align:center;color:#757575}.form-actions[_ngcontent-%COMP%]{margin-top:32px;padding-top:24px;border-top:1px solid rgba(0,0,0,.12)}.file-upload-section[_ngcontent-%COMP%]{margin-bottom:24px;padding:16px;border:1px solid #e0e0e0;border-radius:8px;background-color:#f9f9f9}.file-upload-section[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{font-weight:500;margin-bottom:12px;font-size:1.1em;color:#424242}.logo-preview-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:16px;min-height:120px;background-color:#f0f0f0;border-radius:4px}.logo-preview[_ngcontent-%COMP%]{max-width:200px;max-height:100px;object-fit:contain;border:1px dashed #ccc;padding:5px}.terms-pdf-section[_ngcontent-%COMP%]   .current-file-info[_ngcontent-%COMP%]{margin-bottom:12px;font-size:.9em}.terms-pdf-section[_ngcontent-%COMP%]   .current-file-info[_ngcontent-%COMP%]   .file-link[_ngcontent-%COMP%]{color:var(--mat-primary-default, #3f51b5);text-decoration:none;font-weight:500}.terms-pdf-section[_ngcontent-%COMP%]   .current-file-info[_ngcontent-%COMP%]   .file-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.terms-pdf-section[_ngcontent-%COMP%]   .current-file-info[_ngcontent-%COMP%]   .no-file-text[_ngcontent-%COMP%]{font-style:italic;color:#757575}.upload-button[_ngcontent-%COMP%]{display:block;margin:0 auto 8px}.hint[_ngcontent-%COMP%]{display:block;text-align:center;color:#757575;font-size:.85em}.section-divider[_ngcontent-%COMP%]{margin:32px 0}.section-header-with-action[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-header-with-action[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0}.promotional-set-item[_ngcontent-%COMP%]{margin-bottom:24px;padding:16px;border-radius:8px}.promotional-set-item[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:12px;margin-bottom:16px;border-bottom:1px solid #eee}.promotional-set-item[_ngcontent-%COMP%]   .item-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.1em;font-weight:500}.promotional-set-item[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-top:0}.compact-upload[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{font-size:.9em;margin-bottom:8px}.compact-upload[_ngcontent-%COMP%]   .logo-preview-container.small-preview[_ngcontent-%COMP%]{height:80px;width:auto;max-width:150px;margin-bottom:8px;border:1px dashed #ccc}.compact-upload[_ngcontent-%COMP%]   .logo-preview[_ngcontent-%COMP%]{max-height:100%;max-width:100%;object-fit:contain}.compact-upload[_ngcontent-%COMP%]   .upload-button[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:4px}.compact-upload[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{margin-top:0}.is-active-toggle[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:8px;display:block}.item-divider[_ngcontent-%COMP%]{margin-top:0;margin-bottom:24px}.selected-file-name[_ngcontent-%COMP%]{font-style:italic;color:#555;font-size:.8em}"]})};export{ht as SettingsPageComponent};
