import{b as H}from"./chunk-C6HVAWTE.js";import{a as T,b as D,d as U,g as z,h as I,i as k}from"./chunk-K4QNRRQ5.js";import{a as L,b as F}from"./chunk-ASKMK2H5.js";import"./chunk-XRPHOQB2.js";import{Bb as O,Db as S,Eb as g,Ec as E,Gd as W,Hd as R,Ka as l,Oc as w,Qb as o,S as h,Ta as _,Ua as v,Va as d,ba as u,cb as b,ib as M,l as f,mb as p,na as c,nb as P,rb as m,vb as n,wa as C,wb as i,xa as y,xb as x}from"./chunk-YUSEJVZ2.js";function $(r,t){r&1&&(n(0,"div",5),x(1,"mat-progress-spinner",9),n(2,"p"),o(3,"Cargando t\xE9rminos y condiciones..."),i()())}function A(r,t){if(r&1){let a=O();n(0,"div",6)(1,"mat-icon",10),o(2,"error_outline"),i(),n(3,"p"),o(4,"No se pudieron cargar los t\xE9rminos y condiciones."),i(),n(5,"button",11),S("click",function(){C(a);let s=g();return y(s.retryLoad())}),o(6," Reintentar "),i()()}}function N(r,t){if(r&1&&(n(0,"iframe",12),o(1," Tu navegador no soporta la visualizaci\xF3n de PDFs embebidos. Puedes "),n(2,"a",13),o(3,"descargarlo aqu\xED"),i(),o(4,". "),i()),r&2){let a=t,e=g();P("width",e.containerWidth)("height",e.containerHeight),p("src",a,v),d(2),p("href",a,_)}}function V(r,t){r&1&&(n(0,"div",8)(1,"mat-icon",14),o(2,"description"),i(),n(3,"p"),o(4,"T\xE9rminos y condiciones no disponibles."),i()())}var j=class r{containerHeight="70vh";containerWidth="100%";enableSpinner=!0;enableErrorIcon=!0;isLoading=l(!0);hasError=l(!1);safePdfUrl=l(null);settingsService=c(H);sanitizer=c(w);destroy$=new f;ngOnInit(){this.loadPdfUrlFromSettings()}loadPdfUrlFromSettings(){this.isLoading.set(!0),this.hasError.set(!1),this.safePdfUrl.set(null),this.settingsService.loadSettings().pipe(u(this.destroy$),h(()=>this.isLoading.set(!1))).subscribe({next:t=>{console.log("Settings loaded:",t);let e=(t&&t.length>0?t[0]:null)?.terms_conditions_url;e?(console.log("Terms conditions URL from API:",e),this.safePdfUrl.set(this.sanitizer.bypassSecurityTrustResourceUrl(e)),this.hasError.set(!1)):(console.warn("TermsConditionsDisplayComponent: terms_conditions_url is missing or empty in settings."),this.hasError.set(!0))},error:t=>{this.hasError.set(!0),console.error("Error loading settings for PDF URL:",t)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}retryLoad(){this.loadPdfUrlFromSettings()}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=b({type:r,selectors:[["app-terms-conditions-display"]],inputs:{containerHeight:"containerHeight",containerWidth:"containerWidth",enableSpinner:"enableSpinner",enableErrorIcon:"enableErrorIcon"},decls:11,vars:2,consts:[["appearance","outlined",1,"pdf-card"],[1,"pdf-card-header"],["mat-card-avatar","",1,"header-icon"],[1,"header-title"],[1,"pdf-card-content"],[1,"overlay","spinner-overlay"],[1,"overlay","error-overlay"],["type","application/pdf","frameborder","0",1,"pdf-viewer",3,"src","width","height"],[1,"overlay","placeholder-overlay"],["mode","indeterminate","diameter","50"],[1,"error-icon"],["mat-stroked-button","","color","primary",3,"click"],["type","application/pdf","frameborder","0",1,"pdf-viewer",3,"src"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"placeholder-icon"]],template:function(a,e){if(a&1&&(n(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-icon",2),o(3,"gavel"),i(),n(4,"mat-card-title",3),o(5,"T\xE9rminos y Condiciones"),i()(),n(6,"mat-card-content",4),M(7,$,4,0,"div",5)(8,A,7,0,"div",6)(9,N,5,6,"iframe",7)(10,V,5,0,"div",8),i()()),a&2){let s;d(7),m(e.isLoading()&&e.enableSpinner?7:e.hasError()&&e.enableErrorIcon?8:-1),d(2),m((s=e.safePdfUrl())?9:e.isLoading()?-1:10,s)}},dependencies:[E,F,L,R,W,k,T,I,U,z,D],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}.pdf-card[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;border-radius:0!important;box-shadow:0 3px 6px #0000001a,0 1px 2px #0000000f;overflow:hidden}.pdf-card-header[_ngcontent-%COMP%]{color:#f7f8fe;background-color:#012147;padding:16px 24px}.pdf-card-header[_ngcontent-%COMP%]   .mat-mdc-card-header-text[_ngcontent-%COMP%]{margin:0}.pdf-card-header[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;line-height:1.4;margin:0}.pdf-card-header[_ngcontent-%COMP%]   .header-subtitle[_ngcontent-%COMP%]{font-size:.85rem;opacity:.9;line-height:1.3;margin:0}.pdf-card-content[_ngcontent-%COMP%]{flex-grow:1;padding:0;position:relative;display:flex;justify-content:center;align-items:center;background-color:#eee}.pdf-viewer[_ngcontent-%COMP%]{border:none;width:100%;height:100%;display:block}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#ffffffe6;z-index:10;padding:20px;text-align:center;box-sizing:border-box;border-radius:0!important}.overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;font-size:1rem;color:#424242}.overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;font-weight:500}.spinner-overlay[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin-bottom:8px}.spinner-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;color:#212121}.error-overlay[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%], .error-overlay[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%], .placeholder-overlay[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%], .placeholder-overlay[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{font-size:52px;width:52px;height:52px;margin-bottom:12px}.error-icon[_ngcontent-%COMP%]{color:#c62828}.placeholder-icon[_ngcontent-%COMP%]{color:#757575}"]})};export{j as TermsConditionsDisplayComponent};
