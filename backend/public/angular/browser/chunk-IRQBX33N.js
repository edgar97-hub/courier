import{i as Se}from"./chunk-OGYES5VJ.js";import{a as Ce,l as Me,n as Ae,p as Pe}from"./chunk-T2KMRE7C.js";import{d as De,e as Ee}from"./chunk-YQJ4KZBT.js";import"./chunk-QGSO4PMG.js";import{c as xe}from"./chunk-M6APXQQA.js";import"./chunk-QC4LRWAQ.js";import"./chunk-KYFANJAH.js";import{b as we}from"./chunk-PHH6JU56.js";import{d as _e}from"./chunk-E35XVMLM.js";import{A as he,G as E,H as ge,b as oe,d as s,f as se,g as me,l as le,o as ue,r as ce,v as de,x as pe,z as fe}from"./chunk-43WGTYKX.js";import"./chunk-NKCNST4D.js";import"./chunk-3VA5ILTZ.js";import{a as ee,b as te,c as re,d as ie,g as ne,i as ae}from"./chunk-JPSKUWSR.js";import{a as D}from"./chunk-VITECNWY.js";import{b as be,e as ve}from"./chunk-GO2TRNSQ.js";import"./chunk-E5NRZ37D.js";import{Cb as F,D as H,Fd as ye,Ha as Z,Hc as g,Ia as J,Jb as x,Jc as C,Kb as w,Lb as S,Ma as Y,N as j,Pb as l,Ra as W,Rb as N,Ua as f,Wc as M,Ya as K,ba as V,bb as y,db as X,f as q,g as k,ga as Q,h as p,i as G,ia as b,l as T,la as z,lb as h,ma as v,na as c,q as $,s as B,t as L,ub as o,vb as n,wb as u,z as O}from"./chunk-DQQKDGFN.js";var _=class t{constructor(e){this.http=e}API_URL=M.apiUrl+"/settings";authService=c(D);unsubscribe=null;getAuthState(){return p(this,null,function*(){})}getAuthHeaders(){let e=this.authService.getAccessToken();return e?new g({"Content-Type":"application/json",codrr_token:e}):new g({"Content-Type":"application/json"})}getRows(){let e=this.getAuthHeaders();return this.authService.getAccessToken(),this.http.get(this.API_URL+"/all",{headers:e})}update(e){return this.http.put(this.API_URL+"/edit/"+e.id,{business_name:e.business_name,address:e.address,phone_number:e.phone_number,logo_url:e.logo_url},{headers:{"Content-Type":"application/json",codrr_token:e.token}})}updateSubmitStandardMeasurement(e){let r=this.getAuthHeaders();return this.authService.getAccessToken(),this.http.put(this.API_URL+"/edit/"+e.id,{standard_measurements_length:e.standard_measurements_length,standard_measurements_width:e.standard_measurements_width,standard_measurements_height:e.standard_measurements_height,standard_measurements_weight:e.standard_measurements_weight},{headers:r})}updateSubmitMaximumMeasurement(e){let r=this.getAuthHeaders();return this.authService.getAccessToken(),this.http.put(this.API_URL+"/edit/"+e.id,{maximum_measurements_width:e.maximum_measurements_width,maximum_measurements_length:e.maximum_measurements_length,maximum_measurements_height:e.maximum_measurements_height,maximum_measurements_weight:e.maximum_measurements_weight,volumetric_factor:e.volumetric_factor},{headers:r})}remove(e,r){let i=this.getAuthHeaders();return this.authService.getAccessToken(),this.http.delete(this.API_URL+"/delete/"+e,{headers:i})}ngOnDestroy(){this.unsubscribe?.()}static \u0275fac=function(r){return new(r||t)(v(C))};static \u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ge=z;function $e(t){return!!t[Ge]}var Be=Symbol("__destroy"),Le=Symbol("__decoratorApplied");function Oe(t){return typeof t=="string"?Symbol(`__destroy__${t}`):Be}function Ve(t){t.prototype[Le]=!0}function He(t,e){t[e]||(t[e]=new T)}function je(t,e){t[e]&&(t[e].next(),t[e].complete(),t[e]=null)}function Fe(t){t instanceof G&&t.unsubscribe()}function Qe(t){Array.isArray(t)&&t.forEach(Fe)}function Ne(t,e){return function(){if(t&&t.call(this),je(this,Oe()),e.arrayName&&Qe(this[e.arrayName]),e.checkProperties)for(let r in this)e.blackList?.includes(r)||Fe(this[r])}}function ze(t,e){t.prototype.ngOnDestroy=Ne(t.prototype.ngOnDestroy,e)}function Ze(t,e){let r=t.\u0275pipe;r.onDestroy=Ne(r.onDestroy,e)}function Re(t={}){return e=>{$e(e)?Ze(e,t):ze(e,t),Ve(e)}}var Ie=7,ke=Symbol("CheckerHasBeenSet");function Je(t,e){t[ke]||Ye()||(Te(()=>B(Promise.resolve()).pipe(O(()=>{let r;try{r=Y(t)}catch{r=null}let i=r?.lView;if(i==null)return $;let a=i[Ie]||(i[Ie]=[]),m=new T;return a.push(function(){Te(()=>{m.next(),m.complete()})}),m}),O(()=>Promise.resolve())).subscribe(()=>{(e.observed??e.observers.length>0)&&console.warn(We(t))})),t[ke]=!0)}function Ye(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"}function Te(t){let e=Q.Zone;return!!e&&typeof e.root?.run=="function"?e.root.run(t):t()}function We(t){return`
  The ${t.constructor.name} still has subscriptions that haven't been unsubscribed.
  This may happen if the class extends another class decorated with @UntilDestroy().
  The child class implements its own ngOnDestroy() method but doesn't call super.ngOnDestroy().
  Let's look at the following example:
  @UntilDestroy()
  @Directive()
  export abstract class BaseDirective {}
  @Component({ template: '' })
  export class ConcreteComponent extends BaseDirective implements OnDestroy {
    constructor() {
      super();
      someObservable$.pipe(untilDestroyed(this)).subscribe();
    }
    ngOnDestroy(): void {
      // Some logic here...
    }
  }
  The BaseDirective.ngOnDestroy() will not be called since Angular will call ngOnDestroy()
  on the ConcreteComponent, but not on the BaseDirective.
  One of the solutions is to declare an empty ngOnDestroy method on the BaseDirective:
  @UntilDestroy()
  @Directive()
  export abstract class BaseDirective {
    ngOnDestroy(): void {}
  }
  @Component({ template: '' })
  export class ConcreteComponent extends BaseDirective implements OnDestroy {
    constructor() {
      super();
      someObservable$.pipe(untilDestroyed(this)).subscribe();
    }
    ngOnDestroy(): void {
      // Some logic here...
      super.ngOnDestroy();
    }
  }
  `}var R=!1;function Ke(t,e,r){let i=t[e];if(R&&typeof i!="function")throw new Error(`${t.constructor.name} is using untilDestroyed but doesn't implement ${e}`);He(t,r),t[e]=function(){i.apply(this,arguments),je(this,r),t[e]=i}}function Ue(t,e){return r=>{let i=Oe(e);typeof e=="string"?Ke(t,e,i):(R&&Xe(t),He(t,i));let a=t[i];return R&&Je(t,a),r.pipe(V(a))}}function Xe(t){let e=Object.getPrototypeOf(t);if(!(Le in e))throw new Error("untilDestroyed operator cannot be used inside directives or components or providers that are not decorated with UntilDestroy decorator")}var d=class{formField=c(E);element=c(J);customMessage=Z("");ngAfterViewInit(){let e=this.formField._formFieldControl.ngControl?.control;if(!e)throw new Error("FieldErrorDirective must be used with a form control within a mat-form-field");e.events.pipe(Ue(this)).subscribe(()=>{if(e?.errors&&(e.dirty||e.touched)){let r=Object.keys(e.errors)[0];this.element.nativeElement.textContent=this.getErrorMessage(r,e.errors[r])}else this.element.nativeElement.textContent=""})}getErrorMessage(e,r){let a={required:"Este campo es obligatorio",email:"Por favor, introduce una direcci\xF3n de correo electr\xF3nico v\xE1lida",min:m=>`El valor debe ser mayor o igual a ${m.min}`,max:m=>`El valor debe ser menor o igual a ${m.max}`,minlength:m=>`debe ser al menos ${m.requiredLength} characters`,maxlength:m=>`No puede ser m\xE1s que ${m.requiredLength} characters`,pattern:"Por favor, introduzca un valor v\xE1lido"}[e];return typeof a=="function"?a(r):a||"Invalid value"}};k(d,"\u0275fac",function(r){return new(r||d)}),k(d,"\u0275dir",X({type:d,selectors:[["","appFieldError",""]],inputs:{customMessage:[1,"customMessage"]}})),d=q([Re()],d);var P=class t{formulasHTML=`
    <div class="check-item">
    <span class="checkmark"></span>
    
    El sistema calcular\xE1 autom\xE1ticamente el peso volum\xE9trico con la f\xF3rmula:</div>
    <div class="formula">$$\\text{Peso volum\xE9trico} = \\frac{\\text{Largo} \\times \\text{Ancho} \\times \\text{Alto}}{\\text{Factor volum\xE9trico}}$$</div>

    <div class="check-item"><span class="checkmark">
    </span>Luego compara:</div>
    <div class="formula">$$\\text{Peso cobrado} = \\max(\\text{Peso real}, \\text{Peso volum\xE9trico})$$</div>

      <div class="check-item"><span class="checkmark">
    </span>Y busca entre las tablas de tarifas el precio correspondiente a ese peso cobrado </div>
  `;ngAfterViewInit(){window.MathJax&&window.MathJax.typesetPromise()}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=y({type:t,selectors:[["app-peso-volumetrico"]],decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(r,i){r&1&&u(0,"div",0),r&2&&h("innerHTML",i.formulasHTML,W)},styles:['[_nghost-%COMP%]{background-color:#1e1e1e;color:#fff;display:block;padding:20px;font-family:sans-serif}.check-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:20px;margin-bottom:10px}.checkmark[_ngcontent-%COMP%]:before{content:"\\2713";color:#8fd694;margin-right:8px;font-size:1.2em}.formula[_ngcontent-%COMP%]{text-align:center;font-size:1.3em;margin-bottom:20px}']})};var I=class t{constructor(e){this.http=e}API_URL=M.apiUrl+"/districts";unsubscribe=null;authService=c(D);getAuthState(){return p(this,null,function*(){})}getAuthHeaders(){let e=this.authService.getAccessToken();return e?new g({"Content-Type":"application/json",codrr_token:e}):new g({"Content-Type":"application/json"})}getRows(){let e=this.getAuthHeaders();return this.authService.getAccessToken(),this.http.get(this.API_URL+"/all",{headers:e})}update(e){let r=this.getAuthHeaders();return this.authService.getAccessToken(),this.http.put(this.API_URL+"/edit/"+e.id,{name:e.name,weight_from:e.weight_from,weight_to:e.weight_to,price:e.price,isStandard:!!e.isStandard},{headers:r})}insert(e){let r=this.getAuthHeaders();return this.authService.getAccessToken(),this.http.post(this.API_URL+"/register",{name:e.name,weight_from:e.weight_from,weight_to:e.weight_to,price:e.price,isStandard:!!e.isStandard},{headers:r})}remove(e){let r=this.getAuthHeaders();return this.http.delete(this.API_URL+"/delete/"+e,{headers:r})}ngOnDestroy(){this.unsubscribe?.()}static \u0275fac=function(r){return new(r||t)(v(C))};static \u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})};var U=class t{constructor(e){this.fb=e;this.myForm=this.fb.group({id:["",[]],business_name:["",[s.required]],address:["",[s.required]],phone_number:["",[]],logo_url:["",[]]}),this.form_sta_mea=this.fb.group({id:["",[]],standard_measurements_width:["",[s.required]],standard_measurements_length:["",[s.required]],standard_measurements_height:["",[s.required]],standard_measurements_weight:["",[s.required]]}),this.form_max_mea=this.fb.group({id:["",[]],maximum_measurements_width:["",[s.required]],maximum_measurements_length:["",[s.required]],maximum_measurements_height:["",[s.required]],maximum_measurements_weight:["",[s.required]],volumetric_factor:["",[s.required]]}),this.getSetting()}userService=c(_);myForm;displayedColumns=["id","name","rango_peso","price","isStandard","actions"];paginator;sort;table;isLoading=!1;isLoading2=!1;districtService=c(I);settingService=c(_);dialog=c(xe);form_sta_mea;form_max_mea;getSetting(){return p(this,null,function*(){this.settingService.getRows().subscribe({next:e=>{this.form_sta_mea=this.fb.group({id:[e[0].id,[]],standard_measurements_width:[e[0].standard_measurements_width,[s.required]],standard_measurements_length:[e[0].standard_measurements_length,[s.required]],standard_measurements_height:[e[0].standard_measurements_height,[]],standard_measurements_weight:[e[0].standard_measurements_weight,[]]}),this.form_max_mea=this.fb.group({id:[e[0].id,[]],maximum_measurements_width:[e[0].maximum_measurements_width,[s.required]],maximum_measurements_length:[e[0].maximum_measurements_length,[]],maximum_measurements_height:[e[0].maximum_measurements_height,[s.required]],maximum_measurements_weight:[e[0].maximum_measurements_weight,[]],volumetric_factor:[e[0].volumetric_factor,[]]})},error:e=>{console.log(e)}})})}onSubmitStandardMeasurement(e){return p(this,null,function*(){e.valid&&(this.isLoading=!0,this.settingService.updateSubmitStandardMeasurement({id:e.value.id,standard_measurements_width:e.value.standard_measurements_width,standard_measurements_length:e.value.standard_measurements_length,standard_measurements_height:e.value.standard_measurements_height,standard_measurements_weight:e.value.standard_measurements_weight}).subscribe({next:r=>{console.log(r);let i=L("Data received"),a=H(2e3);i.pipe(j(()=>a)).subscribe(m=>{console.log(m),this.isLoading=!1,window.location.reload()})},error:r=>{this.isLoading=!1,console.log(r)}}))})}onSubmitMaximumMeasurement(e){return p(this,null,function*(){e.valid&&(this.isLoading2=!0,this.settingService.updateSubmitMaximumMeasurement({id:e.value.id,maximum_measurements_width:e.value.maximum_measurements_width,maximum_measurements_length:e.value.maximum_measurements_length,maximum_measurements_height:e.value.maximum_measurements_height,maximum_measurements_weight:e.value.maximum_measurements_weight,volumetric_factor:e.value.volumetric_factor}).subscribe({next:r=>{console.log(r);let i=L("Data received"),a=H(1500);i.pipe(j(()=>a)).subscribe(m=>{console.log(m),this.isLoading2=!1,window.location.reload()})},error:r=>{console.log(r),this.isLoading2=!1}}))})}static \u0275fac=function(r){return new(r||t)(K(de))};static \u0275cmp=y({type:t,selectors:[["app-table"]],viewQuery:function(r,i){if(r&1&&(x(De,5),x(Ae,5),x(Ce,5)),r&2){let a;w(a=S())&&(i.paginator=a.first),w(a=S())&&(i.sort=a.first),w(a=S())&&(i.table=a.first)}},decls:72,vars:6,consts:[[1,"@apply","flex","flex-col","gap-3"],["appearance","outlined"],[1,"flex","gap-3",2,"padding","25px"],[1,"@apply","flex","justify-between","flex-col","items-start","gap-3",3,"ngSubmit","formGroup"],[1,"@apply","flex","justify-between","items-center","gap-3"],["appearance","outline"],["matInput","","formControlName","standard_measurements_width"],["appFieldError",""],["matInput","","formControlName","standard_measurements_length"],["matInput","","formControlName","standard_measurements_height"],["matInput","","formControlName","standard_measurements_weight"],["type","submit","mat-flat-button","",1,"mb-3","mt-5","btn-corp-primary",3,"disabled"],[1,"@apply","mb-[10px]"],[2,"margin","5px","margin-bottom","20px"],[1,"@apply","flex","justify-between","items-center","gap-3","flex-wrap"],[1,"@apply","mb-[5px]",2,"margin-left","20px"],[1,"@apply","flex","justify-between","items-center","gap-3",2,"padding","20px"],["matInput","","formControlName","maximum_measurements_width"],["matInput","","formControlName","maximum_measurements_length"],["matInput","","formControlName","maximum_measurements_height"],["matInput","","formControlName","maximum_measurements_weight"],["appearance","outline",2,"margin-top","20px"],["matInput","","formControlName","volumetric_factor"],["type","submit","mat-flat-button","",1,"mb-3","mt-5","btn-corp-primary",2,"margin-top","10px",3,"disabled"]],template:function(r,i){r&1&&(o(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),l(4," 1. Configuraci\xF3n de medida Est\xE1ndar "),n()(),o(5,"mat-card-content",2)(6,"form",3),F("ngSubmit",function(){return i.onSubmitStandardMeasurement(i.form_sta_mea)}),o(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),l(10,"Ancho (cm)"),n(),u(11,"input",6)(12,"mat-error",7),n(),o(13,"mat-form-field",5)(14,"mat-label"),l(15,"Largo (cm)"),n(),u(16,"input",8)(17,"mat-error",7),n(),o(18,"mat-form-field",5)(19,"mat-label"),l(20,"Alto (cm)"),n(),u(21,"input",9)(22,"mat-error",7),n(),o(23,"mat-form-field",5)(24,"mat-label"),l(25,"Peso real (kg)"),n(),u(26,"input",10)(27,"mat-error",7),n()(),o(28,"button",11),l(29),n()()()(),o(30,"mat-card",1)(31,"mat-card-header",12)(32,"mat-card-title-group")(33,"mat-card-title",13),l(34,"2. Configuraci\xF3n de c\xE1lculo para medida personalizada"),n()()(),o(35,"mat-card-content")(36,"form",3),F("ngSubmit",function(){return i.onSubmitMaximumMeasurement(i.form_max_mea)}),o(37,"div",14)(38,"mat-card",1)(39,"mat-card-header",15)(40,"mat-card-title"),l(41,"Medidas m\xE1ximas (cm):"),n()(),o(42,"mat-card-content")(43,"div",16)(44,"mat-form-field",5)(45,"mat-label"),l(46,"Ancho (cm)"),n(),u(47,"input",17)(48,"mat-error",7),n(),o(49,"mat-form-field",5)(50,"mat-label"),l(51,"Largo (cm)"),n(),u(52,"input",18)(53,"mat-error",7),n(),o(54,"mat-form-field",5)(55,"mat-label"),l(56,"Alto (cm)"),n(),u(57,"input",19)(58,"mat-error",7),n(),o(59,"mat-form-field",5)(60,"mat-label"),l(61,"Peso m\xE1ximo permitido (kg)"),n(),u(62,"input",20)(63,"mat-error",7),n()()()(),o(64,"mat-form-field",21)(65,"mat-label"),l(66,"Factor volum\xE9trico"),n(),u(67,"input",22)(68,"mat-error",7),n()(),u(69,"app-peso-volumetrico"),o(70,"button",23),l(71),n()()()()()),r&2&&(f(6),h("formGroup",i.form_sta_mea),f(22),h("disabled",i.isLoading),f(),N(" ",i.isLoading?"Guardando...":"Guardar"," "),f(7),h("formGroup",i.form_max_mea),f(34),h("disabled",i.isLoading2),f(),N(" ",i.isLoading2?"Guardando...":"Guardar"," "))},dependencies:[ge,E,fe,he,Me,Ee,_e,Pe,ye,ae,ee,ie,ne,te,re,ve,be,pe,le,oe,se,me,ue,ce,d,Se,we,P],encapsulation:2})};export{U as default};
